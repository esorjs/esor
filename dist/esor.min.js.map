{
  "version": 3,
  "sources": ["../src/lifecycle.js", "../src/globals.js", "../src/events.js", "../src/utils/parser.js", "../src/templates/engine.js", "../src/utils/dom.js", "../node_modules/alien-signals/esm/index.mjs", "../src/hooks/arrays.js", "../src/hooks/signals.js", "../src/templates/reconcile.js", "../src/dom-bindings.js", "../src/templates/helpers.js", "../src/templates/props.js", "../src/component.js", "../src/hooks/ref.js", "../src/hooks/memo.js", "../src/logger.js", "../src/hooks/emit.js", "../src/hooks/store.js"],
  "sourcesContent": ["export class Lifecycle {\n    static current;\n    #lc = new Map();\n\n    constructor() {\n        Lifecycle.current = this;\n    }\n\n    #hooks(t) {\n        if (!this.#lc.has(t)) this.#lc.set(t, new Set());\n        return this.#lc.get(t);\n    }\n\n    add(t, fn) {\n        this.#hooks(t).add(fn);\n        return () => this.#lc.get(t)?.delete(fn);\n    }\n\n    run(t, ctx) {\n        queueMicrotask(() => {\n            const hooks = this.#lc.get(t);\n            if (hooks?.size) {\n                for (const fn of hooks) {\n                    try {\n                        fn.call(ctx);\n                    } catch (e) {\n                        // Verificar si ctx tiene el m\u00E9todo _catchError\n                        (typeof ctx._catchError === \"function\"\n                            ? ctx._catchError\n                            : console.error)(\"Error in lifecycle hook:\", e);\n                    }\n                }\n            }\n        });\n    }\n\n    clear(t) {\n        if (t) this.#lc.delete(t);\n        else this.#lc.clear();\n    }\n}\n\nconst getLC = () =>\n    Lifecycle.current ||\n    (() => {\n        throw \"Lifecycle not initialized\";\n    })();\n\nexport const [beforeMount, onMount, beforeUpdate, onUpdate, onDestroy] = [\n    \"beforeMount\",\n    \"mount\",\n    \"beforeUpdate\",\n    \"update\",\n    \"destroy\",\n].map((t) => (fn) => getLC().add(t, fn));\n\nexport const onEffect = (fn) => {\n    const clean = fn();\n    return (\n        (clean instanceof Function && getLC().add(\"destroy\", clean)) ||\n        (() => {})\n    );\n};\n", "// Global mutable state\nconst STATE = {\n    currentEffect: null,\n    currentComponent: null,\n    pendingEffects: new Set(),\n    batchQueue: new Set(),\n    isEffectsFlushing: false,\n    globalEvents: {\n        handlersByType: new Map(),\n        nextId: 0,\n    },\n};\n\nexport default STATE;\n\nexport function withCurrentComponent(component, fn) {\n    const prev = STATE.currentComponent;\n    STATE.currentComponent = component;\n    try {\n        return fn();\n    } finally {\n        STATE.currentComponent = prev;\n    }\n}\n", "const eventHandlers = new WeakMap(); // WeakMap<ComponentInstance, Map<number, {type: string, handler: Function}>>\nlet nextEventId = 1;\n\nexport function registerEvent(component, type, handler) {\n    if (!eventHandlers.has(component)) eventHandlers.set(component, new Map());\n    const handlersMap = eventHandlers.get(component);\n    const id = nextEventId++;\n    handlersMap.set(id, { type, handler });\n    return id;\n}\n\nexport function getEventHandler(component, id) {\n    return eventHandlers.get(component)?.get(id)?.handler;\n}\n\nexport function clearEventHandler(component, id) {\n    const handlers = eventHandlers.get(component);\n    if (handlers) {\n        handlers.delete(id);\n        if (handlers.size === 0) eventHandlers.delete(component);\n    }\n}\n\nexport function clearAllEventHandlers(component) {\n    eventHandlers.delete(component);\n}\n", "export const escapeHTML = (value) => {\n    if (value === undefined || value === null) return \"\";\n    return value.toString().replace(\n        /[&<>'\"]/g,\n        (match) =>\n            ({\n                \"&\": \"&amp;\",\n                \"<\": \"&lt;\",\n                \">\": \"&gt;\",\n                \"'\": \"&#39;\",\n                '\"': \"&quot;\",\n                \"/\": \"&#x2F;\",\n            }[match])\n    );\n};\n\nexport function cleanAttributeValue(value) {\n    if (value === undefined || value === null) return \"\";\n\n    return String(value)\n        .replace(/^[\"']|[\"']$/g, \"\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#39;\");\n}\n", "import { registerEvent } from \"../events\";\nimport STATE from \"../globals\";\nimport { escapeHTML } from \"../utils/parser\";\n\nexport const PLACEHOLDER_EXPRESSION_PREFIX = \"$:\";\nexport const ATTRIBUTES_NAMES_EVENTS = \"data_esor_event\";\nexport const ATTRIBUTES_NAMES_BIND = \"data_esor_bind\";\nexport const ATTRIBUTES_NAMES_REFS = \"data_esor_ref\";\n\nconst attrReg = /* @__PURE__ */ new RegExp(/\\s(\\w[\\w-]*)=([\"'])?(?:(?!\\2).)*$/);\nconst refReg = /* @__PURE__ */ new RegExp(/ref=([\"'])?\\s*$/);\nconst evtReg = /* @__PURE__ */ new RegExp(/(@\\w+)=([\"'])?\\s*$/);\nconst qReg = /* @__PURE__ */ new RegExp(/[\"']\\s*$/);\nconst rawTags = /* @__PURE__ */ new RegExp(/^(script|style|textarea|title)$/i);\n\nfunction replaceAttribute(hStr, regexMatch, name, value) {\n    const q = hStr && hStr.charAt(hStr.length - 1) === '\"' ? '\"' : \"'\";\n    return hStr.replace(regexMatch, `${name}=${q}${value}${q}`);\n}\n\nconst removeQuote = (s) => s.replace(qReg, \"\");\n\nexport const isTemplateObject = (o) =>\n    o?.template?.nodeType === Node.DOCUMENT_FRAGMENT_NODE;\n\nfunction injectEvent(fn, eType, hStr) {\n    const component = STATE.currentComponent;\n    const id = registerEvent(component, eType, fn);\n    return replaceAttribute(\n        hStr,\n        evtReg,\n        `${ATTRIBUTES_NAMES_EVENTS}-${eType}`,\n        id\n    );\n}\n\nfunction injectRef(fn, hStr, i, refs) {\n    refs.set(i, fn);\n    return replaceAttribute(hStr, refReg, `${ATTRIBUTES_NAMES_REFS}-${i}`, i);\n}\n\nfunction injectSignalAttr(val, aName, hStr, sIdx, signals) {\n    hStr = removeQuote(hStr);\n    const quote = hStr && hStr.charAt(hStr.length - 1) === '\"' ? '\"' : \"'\";\n    const initVal = typeof val === \"function\" ? val() : val;\n    const escVal = rawTags.test(aName) ? String(initVal) : escapeHTML(initVal);\n    const bindAttr = `${ATTRIBUTES_NAMES_BIND}-${sIdx}`;\n    hStr += `${quote}${escVal}${quote} ${bindAttr}=${quote}true${quote}`;\n    signals.set(sIdx, {\n        type: \"attribute\",\n        signal: val,\n        attributeName: aName,\n        bindAttr,\n    });\n    return hStr;\n}\n\nfunction injectExpr(val, isFn, hStr, sIdx, signals) {\n    const bA = `${PLACEHOLDER_EXPRESSION_PREFIX}${sIdx}`;\n    signals.set(sIdx, {\n        type: isFn ? \"expression\" : \"text\",\n        signal: val,\n        bindAttr: bA,\n    });\n    const out = isFn ? val() : val;\n    return `${hStr}<!--${bA}-->${escapeHTML(String(out))}<!--//${bA}-->`;\n}\n\nfunction injectArray(v, sIdx, signals, hStr, isSigArr, fn) {\n    const bind = `${PLACEHOLDER_EXPRESSION_PREFIX}${sIdx}`;\n    const signalEntry = {\n        type: \"array\",\n        signal: isSigArr\n            ? () => (v.__signal() || []).map(v.__mapFn || ((x) => x))\n            : typeof fn === \"function\"\n            ? fn\n            : () => v,\n        bindAttr: bind,\n    };\n    signals.set(sIdx, signalEntry);\n    const items = Array.isArray(v) ? v : [];\n    const out = items.map(processVal).join(\"\");\n    return `${hStr}<!--${bind}-->${out}<!--//${bind}-->`;\n}\n\nfunction processTemplateNodes(template) {\n    let output = \"\";\n    for (const node of template.childNodes) {\n        if (node.nodeType === Node.ELEMENT_NODE && node.hasAttribute(\"key\")) {\n            node.setAttribute(\"data-key\", node.getAttribute(\"key\"));\n            node.removeAttribute(\"key\");\n        }\n        output += node.outerHTML || node.textContent;\n    }\n    return output;\n}\n\nfunction processVal(v) {\n    if (v == null || v === false) return \"\";\n    if (Array.isArray(v)) return v.reduce((acc, x) => acc + processVal(x), \"\");\n    if (v instanceof SVGElement) return v.outerHTML;\n    if (isTemplateObject(v)) return processTemplateNodes(v.template);\n    if (v?.type === \"template-array\")\n        return v.templates.reduce((a, x) => a + processVal(x), \"\");\n    return v.toString();\n}\n\nfunction processTemplate(strs, ...vals) {\n    let hStr = \"\";\n    const sMap = new Map();\n    const rMap = new Map();\n    let sIdx = 0;\n    let rIdx = 0;\n\n    for (let i = 0; i < strs.length; i++) {\n        hStr += strs[i];\n        if (i >= vals.length) continue;\n\n        const val = vals[i];\n        // Detectar si estamos en un atributo\n        const aMatch = strs[i].match(attrReg);\n        const inAttr = !!aMatch;\n        const aName = aMatch?.[1];\n\n        const refMatch = refReg.exec(hStr);\n        const evtMatch = evtReg.exec(hStr);\n\n        const isRef = refMatch && typeof val === \"function\";\n        const isEvt = evtMatch && typeof val === \"function\";\n        const evtType = isEvt ? evtMatch[1].slice(1) : null;\n\n        if (isRef) {\n            hStr = injectRef(val, hStr, rIdx++, rMap);\n        } else if (isEvt) {\n            hStr = injectEvent(val, evtType, hStr);\n        } else if ((val?.signal || typeof val === \"function\") && inAttr) {\n            hStr = injectSignalAttr(val, aName, hStr, sIdx++, sMap);\n        } else if (Array.isArray(val) && val.__signalArray === true) {\n            hStr = injectArray(val, sIdx++, sMap, hStr, true);\n        } else if (val?.signal) {\n            hStr = injectExpr(val, false, hStr, sIdx++, sMap);\n        } else if (typeof val === \"function\") {\n            hStr = injectExpr(val, true, hStr, sIdx++, sMap);\n        } else if (Array.isArray(val)) {\n            hStr = injectArray(val, sIdx++, sMap, hStr, false, val);\n        } else if (val != null) {\n            hStr += processVal(val);\n        }\n    }\n\n    const t = document.createElement(\"template\");\n    t.innerHTML = hStr.trim();\n\n    return { template: t.content, signals: sMap, refs: rMap };\n}\n\nconst templateCache = new WeakMap();\n\nexport function html(strs, ...vals) {\n    if (vals.length === 0 && strs.raw) {\n        if (templateCache.has(strs)) return templateCache.get(strs);\n\n        const result = processTemplate(strs, ...vals);\n        templateCache.set(strs, result);\n        return result;\n    }\n\n    return processTemplate(strs, ...vals);\n}\n", "import {\n    ATTRIBUTES_NAMES_BIND,\n    ATTRIBUTES_NAMES_EVENTS,\n    ATTRIBUTES_NAMES_REFS,\n} from \"../templates/engine\";\n\nexport function valuesChanged(val1, val2) {\n    return !Object.is(val1, val2);\n}\n\nexport const getDocumentFragment = (e) =>\n    (e instanceof DocumentFragment && e) ||\n    e?.content?.cloneNode() ||\n    document.createDocumentFragment();\n\nexport function removeChildNodesBetween(startNode, endNode) {\n    let node = startNode.nextSibling;\n    while (node && node !== endNode) {\n        const next = node.nextSibling;\n        node.parentNode.removeChild(node);\n        node = next;\n    }\n}\n\nlet placeholderCache = new WeakMap();\n\nexport function findCommentPlaceholders(root, attr) {\n    if (placeholderCache.has(root)) {\n        const cached = placeholderCache.get(root)[attr];\n        if (cached) return cached;\n    }\n    const walker = document.createTreeWalker(root, NodeFilter.SHOW_COMMENT);\n    let start = null,\n        end = null;\n    while (walker.nextNode() && !end) {\n        const current = walker.currentNode;\n        if (!start && current.nodeValue === attr) start = current;\n        else if (start && current.nodeValue === `//${attr}`) end = current;\n    }\n\n    const result = [start, end];\n    placeholderCache.set(root, {\n        ...placeholderCache.get(root),\n        [attr]: result,\n    });\n    return result;\n}\n\nexport function setupDeclarativeShadowRoot(host) {\n    const supportsDeclarative =\n        HTMLElement.prototype.hasOwnProperty(\"attachInternals\");\n    const internals = supportsDeclarative ? host.attachInternals() : null;\n\n    if (internals?.shadowRoot) host.shadowRoot = internals.shadowRoot;\n    else host.attachShadow({ mode: \"open\" });\n}\n\nexport function findAttributesWithEsorDirectives(\n    root,\n    prefixes = [\n        ATTRIBUTES_NAMES_REFS,\n        ATTRIBUTES_NAMES_EVENTS,\n        ATTRIBUTES_NAMES_BIND,\n    ]\n) {\n    const found = {};\n    const iterator = document.createNodeIterator(\n        root,\n        NodeFilter.SHOW_ELEMENT,\n        {\n            acceptNode(node) {\n                if (node.hasAttributes()) {\n                    for (const { name } of node.attributes) {\n                        if (prefixes.some((prefix) => name.startsWith(prefix)))\n                            return NodeFilter.FILTER_ACCEPT;\n                    }\n                }\n                return NodeFilter.FILTER_SKIP;\n            },\n        }\n    );\n\n    let node;\n    while ((node = iterator.nextNode())) {\n        for (const attribute of node.attributes) {\n            const matchingPrefix = prefixes.find((prefix) =>\n                attribute.name.startsWith(prefix)\n            );\n            if (matchingPrefix) {\n                // Se crea el array solo en caso de encontrar el prefijo\n                if (!found[matchingPrefix]) {\n                    found[matchingPrefix] = [];\n                }\n                found[matchingPrefix].push(attribute);\n            }\n        }\n    }\n\n    return Object.keys(found).length ? found : null;\n}\n", "var SubscriberFlags=(SubscriberFlags2=>{SubscriberFlags2[SubscriberFlags2[\"Computed\"]=1]=\"Computed\";SubscriberFlags2[SubscriberFlags2[\"Effect\"]=2]=\"Effect\";SubscriberFlags2[SubscriberFlags2[\"Tracking\"]=4]=\"Tracking\";SubscriberFlags2[SubscriberFlags2[\"Notified\"]=8]=\"Notified\";SubscriberFlags2[SubscriberFlags2[\"Recursed\"]=16]=\"Recursed\";SubscriberFlags2[SubscriberFlags2[\"Dirty\"]=32]=\"Dirty\";SubscriberFlags2[SubscriberFlags2[\"PendingComputed\"]=64]=\"PendingComputed\";SubscriberFlags2[SubscriberFlags2[\"PendingEffect\"]=128]=\"PendingEffect\";SubscriberFlags2[SubscriberFlags2[\"Propagated\"]=224]=\"Propagated\";return SubscriberFlags2})(SubscriberFlags||{});function createReactiveSystem({updateComputed,notifyEffect:notifyEffect2}){let queuedEffects;let queuedEffectsTail;return{link(dep,sub){const currentDep=sub.depsTail;if(currentDep!==void 0&&currentDep.dep===dep){return}const nextDep=currentDep!==void 0?currentDep.nextDep:sub.deps;if(nextDep!==void 0&&nextDep.dep===dep){sub.depsTail=nextDep;return}const depLastSub=dep.subsTail;if(depLastSub!==void 0&&depLastSub.sub===sub&&isValidLink(depLastSub,sub)){return}return linkNewDep(dep,sub,nextDep,currentDep)},propagate(link2){let targetFlag=32;let subs=link2;let stack=0;top:do{const sub=link2.sub;const subFlags=sub.flags;if(!(subFlags&(4|16|224))&&(sub.flags=subFlags|targetFlag|8,true)||subFlags&16&&!(subFlags&4)&&(sub.flags=subFlags&~16|targetFlag|8,true)||!(subFlags&224)&&isValidLink(link2,sub)&&(sub.flags=subFlags|16|targetFlag|8,sub.subs!==void 0)){const subSubs=sub.subs;if(subSubs!==void 0){if(subSubs.nextSub!==void 0){subSubs.prevSub=subs;link2=subs=subSubs;targetFlag=64;++stack}else{link2=subSubs;targetFlag=subFlags&2?128:64}continue}if(subFlags&2){if(queuedEffectsTail!==void 0){queuedEffectsTail.depsTail.nextDep=sub.deps}else{queuedEffects=sub}queuedEffectsTail=sub}}else if(!(subFlags&(4|targetFlag))){sub.flags=subFlags|targetFlag|8;if((subFlags&(2|8))===2){if(queuedEffectsTail!==void 0){queuedEffectsTail.depsTail.nextDep=sub.deps}else{queuedEffects=sub}queuedEffectsTail=sub}}else if(!(subFlags&targetFlag)&&subFlags&224&&isValidLink(link2,sub)){sub.flags=subFlags|targetFlag}if((link2=subs.nextSub)!==void 0){subs=link2;targetFlag=stack?64:32;continue}while(stack){--stack;const dep=subs.dep;const depSubs=dep.subs;subs=depSubs.prevSub;depSubs.prevSub=void 0;if((link2=subs.nextSub)!==void 0){subs=link2;targetFlag=stack?64:32;continue top}}break}while(true)},startTracking(sub){sub.depsTail=void 0;sub.flags=sub.flags&~(8|16|224)|4},endTracking(sub){const depsTail=sub.depsTail;if(depsTail!==void 0){const nextDep=depsTail.nextDep;if(nextDep!==void 0){clearTracking(nextDep);depsTail.nextDep=void 0}}else if(sub.deps!==void 0){clearTracking(sub.deps);sub.deps=void 0}sub.flags&=~4},updateDirtyFlag(sub,flags){if(checkDirty(sub.deps)){sub.flags=flags|32;return true}else{sub.flags=flags&~64;return false}},processComputedUpdate(computed2,flags){if(flags&32||(checkDirty(computed2.deps)?true:(computed2.flags=flags&~64,false))){if(updateComputed(computed2)){const subs=computed2.subs;if(subs!==void 0){shallowPropagate(subs)}}}},processPendingInnerEffects(sub,flags){if(flags&128){sub.flags=flags&~128;let link2=sub.deps;do{const dep=link2.dep;if(\"flags\"in dep&&dep.flags&2&&dep.flags&224){notifyEffect2(dep)}link2=link2.nextDep}while(link2!==void 0)}},processEffectNotifications(){while(queuedEffects!==void 0){const effect2=queuedEffects;const depsTail=effect2.depsTail;const queuedNext=depsTail.nextDep;if(queuedNext!==void 0){depsTail.nextDep=void 0;queuedEffects=queuedNext.sub}else{queuedEffects=void 0;queuedEffectsTail=void 0}if(!notifyEffect2(effect2)){effect2.flags&=~8}}}};function linkNewDep(dep,sub,nextDep,depsTail){const newLink={dep,sub,nextDep,prevSub:void 0,nextSub:void 0};if(depsTail===void 0){sub.deps=newLink}else{depsTail.nextDep=newLink}if(dep.subs===void 0){dep.subs=newLink}else{const oldTail=dep.subsTail;newLink.prevSub=oldTail;oldTail.nextSub=newLink}sub.depsTail=newLink;dep.subsTail=newLink;return newLink}function checkDirty(link2){let stack=0;let dirty;top:do{dirty=false;const dep=link2.dep;if(\"flags\"in dep){const depFlags=dep.flags;if((depFlags&(1|32))===(1|32)){if(updateComputed(dep)){const subs=dep.subs;if(subs.nextSub!==void 0){shallowPropagate(subs)}dirty=true}}else if((depFlags&(1|64))===(1|64)){const depSubs=dep.subs;if(depSubs.nextSub!==void 0){depSubs.prevSub=link2}link2=dep.deps;++stack;continue}}if(!dirty&&link2.nextDep!==void 0){link2=link2.nextDep;continue}if(stack){let sub=link2.sub;do{--stack;const subSubs=sub.subs;if(dirty){if(updateComputed(sub)){if((link2=subSubs.prevSub)!==void 0){subSubs.prevSub=void 0;shallowPropagate(subSubs);sub=link2.sub}else{sub=subSubs.sub}continue}}else{sub.flags&=~64}if((link2=subSubs.prevSub)!==void 0){subSubs.prevSub=void 0;if(link2.nextDep!==void 0){link2=link2.nextDep;continue top}sub=link2.sub}else{if((link2=subSubs.nextDep)!==void 0){continue top}sub=subSubs.sub}dirty=false}while(stack)}return dirty}while(true)}function shallowPropagate(link2){do{const sub=link2.sub;const subFlags=sub.flags;if((subFlags&(64|32))===64){sub.flags=subFlags|32|8;if((subFlags&(2|8))===2){if(queuedEffectsTail!==void 0){queuedEffectsTail.depsTail.nextDep=sub.deps}else{queuedEffects=sub}queuedEffectsTail=sub}}link2=link2.nextSub}while(link2!==void 0)}function isValidLink(checkLink,sub){const depsTail=sub.depsTail;if(depsTail!==void 0){let link2=sub.deps;do{if(link2===checkLink){return true}if(link2===depsTail){break}link2=link2.nextDep}while(link2!==void 0)}return false}function clearTracking(link2){do{const dep=link2.dep;const nextDep=link2.nextDep;const nextSub=link2.nextSub;const prevSub=link2.prevSub;if(nextSub!==void 0){nextSub.prevSub=prevSub}else{dep.subsTail=prevSub}if(prevSub!==void 0){prevSub.nextSub=nextSub}else{dep.subs=nextSub}if(dep.subs===void 0&&\"deps\"in dep){const depFlags=dep.flags;if(!(depFlags&32)){dep.flags=depFlags|32}const depDeps=dep.deps;if(depDeps!==void 0){link2=depDeps;dep.depsTail.nextDep=nextDep;dep.deps=void 0;dep.depsTail=void 0;continue}}link2=nextDep}while(link2!==void 0)}}var{link,propagate,updateDirtyFlag,startTracking,endTracking,processEffectNotifications,processComputedUpdate,processPendingInnerEffects}=createReactiveSystem({updateComputed(computed2){const prevSub=activeSub;activeSub=computed2;startTracking(computed2);try{const oldValue=computed2.currentValue;const newValue=computed2.getter(oldValue);if(oldValue!==newValue){computed2.currentValue=newValue;return true}return false}finally{activeSub=prevSub;endTracking(computed2)}},notifyEffect(e){if(\"isScope\"in e){return notifyEffectScope(e)}else{return notifyEffect(e)}}});var pauseStack=[];var batchDepth=0;var activeSub;var activeScope;function startBatch(){++batchDepth}function endBatch(){if(!--batchDepth){processEffectNotifications()}}function pauseTracking(){pauseStack.push(activeSub);activeSub=void 0}function resumeTracking(){activeSub=pauseStack.pop()}function signal(oldValue){return signalGetterSetter.bind({currentValue:oldValue,subs:void 0,subsTail:void 0})}function computed(getter){return computedGetter.bind({currentValue:void 0,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:1|32,getter})}function effect(fn){const e={fn,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:2};if(activeSub!==void 0){link(e,activeSub)}else if(activeScope!==void 0){link(e,activeScope)}runEffect(e);return effectStop.bind(e)}function effectScope(fn){const e={deps:void 0,depsTail:void 0,flags:2,isScope:true};runEffectScope(e,fn);return effectStop.bind(e)}function runEffect(e){const prevSub=activeSub;activeSub=e;startTracking(e);try{e.fn()}finally{activeSub=prevSub;endTracking(e)}}function runEffectScope(e,fn){const prevSub=activeScope;activeScope=e;startTracking(e);try{fn()}finally{activeScope=prevSub;endTracking(e)}}function notifyEffect(e){const flags=e.flags;if(flags&32||flags&64&&updateDirtyFlag(e,flags)){runEffect(e)}else{processPendingInnerEffects(e,e.flags)}return true}function notifyEffectScope(e){const flags=e.flags;if(flags&128){processPendingInnerEffects(e,e.flags);return true}return false}function computedGetter(){const flags=this.flags;if(flags&(32|64)){processComputedUpdate(this,flags)}if(activeSub!==void 0){link(this,activeSub)}else if(activeScope!==void 0){link(this,activeScope)}return this.currentValue}function signalGetterSetter(...value){if(value.length){if(this.currentValue!==(this.currentValue=value[0])){const subs=this.subs;if(subs!==void 0){propagate(subs);if(!batchDepth){processEffectNotifications()}}}}else{if(activeSub!==void 0){link(this,activeSub)}return this.currentValue}}function effectStop(){startTracking(this);endTracking(this)}export{SubscriberFlags,computed,createReactiveSystem,effect,effectScope,endBatch,pauseTracking,resumeTracking,signal,startBatch};\n", "const arraysCache = new WeakMap();\n\n/**\n * Funci\u00F3n gen\u00E9rica para envolver arrays en un Proxy que\n * intercepte cualquier acceso y los haga reactivos.\n */\nexport function wrapArray(arr, read) {\n    if (arr && arr.__signalArray === true) return arr;\n    if (arraysCache.has(arr)) return arraysCache.get(arr);\n\n    const proxy = new Proxy(arr, {\n        get(target, prop, receiver) {\n            const value = Reflect.get(target, prop, receiver);\n            if (typeof value === \"function\") {\n                return function (...args) {\n                    const result = value.apply(target, args);\n                    if (Array.isArray(result)) {\n                        result.__signalArray = true;\n                        result.__signal = read;\n                        if (args.length > 0 && typeof args[0] === \"function\")\n                            result.__mapFn = args[0];\n\n                        return wrapArray(result, read);\n                    }\n                    return result;\n                };\n            }\n            return value;\n        },\n    });\n\n    arraysCache.set(arr, proxy);\n    return proxy;\n}\n", "import {\n    signal as alienSignal,\n    effect,\n    computed,\n    startBatch,\n    endBatch,\n} from \"alien-signals\";\nimport { wrapArray } from \"./arrays\";\nimport STATE from \"../globals\";\n\nfunction signal(initialValue) {\n    if (Array.isArray(initialValue)) {\n        const sig = alienSignal(initialValue);\n        let reactiveArray = wrapArray(initialValue, () => sig());\n        reactiveArray.__signalArray = true;\n\n        // Function acting as getter (without arguments) or setter (with argument)\n        const func = (...args) => {\n            if (args.length > 0) {\n                const newVal = args[0];\n                sig(newVal);\n                reactiveArray = wrapArray(newVal, () => sig());\n                reactiveArray.__signalArray = true;\n                return reactiveArray;\n            }\n            return reactiveArray;\n        };\n\n        return func;\n    }\n    return alienSignal(initialValue);\n}\n\nfunction batch(fn) {\n    if (STATE.batchQueue) return fn();\n\n    STATE.batchQueue = new Set();\n    startBatch();\n    try {\n        fn();\n        flushBatch();\n    } finally {\n        endBatch();\n        STATE.batchQueue = null;\n    }\n}\n\nfunction flushBatch() {\n    const effects = STATE.batchQueue;\n    STATE.batchQueue = null;\n    for (const effect of effects) effect();\n    STATE.batchQueue.forEach((effect) => effect());\n    STATE.batchQueue.clear();\n}\n\nexport { signal, computed, effect, batch };\n", "import { bindEventsInRange } from \"../dom-bindings\";\nimport { batch } from \"../hooks/signals\";\nimport { ATTRIBUTES_NAMES_EVENTS } from \"./engine\";\n\nexport function reconcileArrays(\n    startNode,\n    endNode,\n    oldItems = [],\n    newItems = [],\n    host\n) {\n    const oldArr = [...oldItems],\n        newArr = [...newItems];\n    const parent = endNode.parentNode;\n    const currentNodes = collectNodes(startNode, endNode);\n    const newNodes = createOrReuseNodes(newArr, currentNodes, oldArr);\n\n    // Si las listas son id\u00E9nticas, no hay nada que actualizar.\n    if (\n        oldArr.length === newArr.length &&\n        oldArr.every((item, i) => item === newArr[i])\n    )\n        return;\n\n    batch(() => {\n        ddiff(parent, currentNodes, newNodes, endNode);\n        bindEventsInRange(host, startNode, endNode);\n        startNode.__oldItems = [...newArr];\n    });\n}\n\nconst collectNodes = (start, end) => {\n    const nodes = [];\n    for (\n        let curr = start.nextSibling;\n        curr && curr !== end;\n        curr = curr.nextSibling\n    ) {\n        nodes.push(curr);\n    }\n    return nodes;\n};\n\nconst isValidDOMNode = (node) => node && node.nodeType === Node.ELEMENT_NODE;\n\nconst getNodeKey = (node) =>\n    isValidDOMNode(node) ? node.getAttribute(\"data-key\") : null;\n\nfunction updateNodeContent(oldNode, newNode, oldItem, newItem) {\n    if (!oldNode || !newNode || !oldItem?.template || !newItem?.template)\n        return false;\n    if (oldNode.firstChild?.nodeType === 3) oldNode.normalize();\n    if (newNode.firstChild?.nodeType === 3) newNode.normalize();\n\n    const oldTextNodes = getTextNodes(oldNode);\n    const newTextNodes = getTextNodes(newNode);\n    if (oldTextNodes.length !== newTextNodes.length) return false;\n\n    let updated = false;\n    for (let i = 0, len = oldTextNodes.length; i < len; i++) {\n        if (oldTextNodes[i].textContent !== newTextNodes[i].textContent) {\n            oldTextNodes[i].textContent = newTextNodes[i].textContent;\n            updated = true;\n        }\n    }\n    return updated;\n}\n\nconst getTextNodes = (node) => {\n    const nodes = [];\n    const walker = document.createTreeWalker(\n        node,\n        NodeFilter.SHOW_TEXT,\n        null,\n        false\n    );\n    let curr;\n    while ((curr = walker.nextNode())) nodes.push(curr);\n    return nodes;\n};\n\nfunction createOrReuseNodes(items, currentNodes, oldItems) {\n    const nodeMap = new Map(),\n        oldMap = new Map(),\n        keys = [];\n    currentNodes.forEach((n) => {\n        const key = getNodeKey(n);\n        if (key) nodeMap.set(key, n);\n    });\n    oldItems.forEach((item, i) => oldMap.set(getItemKey(item, i), item));\n    items.forEach((item, i) => (keys[i] = getItemKey(item, i)));\n\n    return items.map((item, i) => {\n        const key = keys[i],\n            existing = nodeMap.get(key),\n            oldItem = oldMap.get(key);\n        if (existing?.nodeType === 1) {\n            if (!oldItem || hasChanged(oldItem, item)) {\n                const newNode = createNode(item, key);\n                // Si solo se requieren cambios en el contenido, actualizamos y copiamos los atributos de eventos.\n                if (updateNodeContent(existing, newNode, oldItem, item)) {\n                    copyEventAttributes(existing, newNode);\n                    return existing;\n                }\n                return newNode;\n            }\n            return existing;\n        }\n        return createNode(item, key);\n    });\n}\n\nfunction hasChanged(oldItem, newItem) {\n    if (!oldItem || !newItem) return true;\n    if (oldItem?.template && newItem?.template) {\n        const oldVals = extractDynamicValues(oldItem),\n            newVals = extractDynamicValues(newItem);\n        return !areValuesEqual(oldVals, newVals);\n    }\n    return !areValuesEqual(oldItem, newItem);\n}\n\nfunction extractDynamicValues(item) {\n    const { template } = item;\n    if (!template) return null;\n    const values = [],\n        frag = template.cloneNode(true);\n    const walker = document.createTreeWalker(\n        frag,\n        NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT,\n        {\n            acceptNode(node) {\n                if (node.nodeType === 3)\n                    return node.textContent.trim().length > 0\n                        ? NodeFilter.FILTER_ACCEPT\n                        : NodeFilter.FILTER_SKIP;\n                return NodeFilter.FILTER_ACCEPT;\n            },\n        }\n    );\n    let node;\n    while ((node = walker.nextNode())) {\n        if (node.nodeType === 3) values.push(node.textContent);\n        else {\n            for (let i = 0, len = node.attributes.length; i < len; i++) {\n                const attrVal = node.attributes[i].value;\n                if (attrVal.includes(\"${\")) values.push(attrVal);\n            }\n        }\n    }\n    return values;\n}\n\nfunction areValuesEqual(a, b) {\n    if (a === b) return true;\n    if (!a || !b || typeof a !== typeof b) return false;\n    if (Array.isArray(a) && Array.isArray(b))\n        return (\n            a.length === b.length && a.every((v, i) => areValuesEqual(v, b[i]))\n        );\n    if (typeof a === \"object\") {\n        const keysA = Object.keys(a),\n            keysB = Object.keys(b);\n        if (keysA.length !== keysB.length) return false;\n        return keysA.every((key) => areValuesEqual(a[key], b[key]));\n    }\n    return String(a) === String(b);\n}\n\nfunction copyEventAttributes(oldNode, newNode) {\n    if (!isValidDOMNode(oldNode) || !isValidDOMNode(newNode)) return;\n    for (let i = oldNode.attributes.length - 1; i >= 0; i--) {\n        const attr = oldNode.attributes[i];\n        if (attr.name.startsWith(ATTRIBUTES_NAMES_EVENTS))\n            newNode.setAttribute(attr.name, attr.value);\n    }\n}\n\nfunction getItemKey(item, index) {\n    if (item?.key !== undefined) return `key-${item.key}`;\n    if (item?.id) return `item-${item.id}`;\n    if (item?.template) {\n        const el = item.template.firstElementChild;\n        if (el && el.hasAttribute(\"key\")) return el.getAttribute(\"key\");\n    }\n\n    return `item-${index}-${String(item)}`;\n}\n\nfunction createNode(item, key) {\n    let node;\n    if (item?.template) {\n        const content = item.template.cloneNode(true);\n        node = content.firstElementChild || document.createElement(\"div\");\n    } else {\n        node = document.createElement(\"div\");\n        node.textContent = String(item);\n    }\n    if (isValidDOMNode(node)) node.setAttribute(\"data-key\", key);\n    return node;\n}\n\nexport const moveBefore = (parent, newNode, referenceNode) =>\n    parent.insertBefore(newNode, referenceNode);\n\nfunction ddiff(parent, current, newList, refNode) {\n    let aStart = 0,\n        aEnd = current.length,\n        bStart = 0,\n        bEnd = newList.length,\n        after = aEnd > 0 ? current[aEnd - 1].nextSibling : refNode,\n        map = null;\n\n    if (!aEnd) {\n        for (let i = 0; i < bEnd; i++) parent.insertBefore(newList[i], after);\n        return;\n    }\n    if (!bEnd) {\n        while (aStart < aEnd) parent.removeChild(current[aStart++]);\n        return;\n    }\n    while (aStart < aEnd || bStart < bEnd) {\n        if (current[aStart] === newList[bStart]) {\n            aStart++;\n            bStart++;\n            continue;\n        }\n        while (current[aEnd - 1] === newList[bEnd - 1]) {\n            aEnd--;\n            bEnd--;\n        }\n        if (aStart === aEnd) {\n            const node =\n                bEnd < newList.length\n                    ? bStart\n                        ? newList[bStart - 1].nextSibling\n                        : newList[bEnd - bStart]\n                    : after;\n            while (bStart < bEnd) parent.insertBefore(newList[bStart++], node);\n        } else if (bStart === bEnd) {\n            while (aStart < aEnd) {\n                if (!map || !map.has(current[aStart]))\n                    parent.removeChild(current[aStart]);\n                aStart++;\n            }\n        } else if (\n            current[aStart] === newList[bEnd - 1] &&\n            newList[bStart] === current[aEnd - 1]\n        ) {\n            const node = current[--aEnd].nextSibling;\n            parent.insertBefore(\n                newList[bStart++],\n                current[aStart++].nextSibling\n            );\n            parent.insertBefore(newList[--bEnd], node);\n            current[aEnd] = newList[bEnd];\n        } else {\n            if (!map) {\n                map = new Map();\n                for (let i = bStart; i < bEnd; i++) map.set(newList[i], i);\n            }\n            const index = map.get(current[aStart]);\n            if (index == null) parent.removeChild(current[aStart++]);\n            else if (bStart < index && index < bEnd) {\n                let sequence = 1;\n                while (\n                    aStart + sequence < aEnd &&\n                    index + sequence < bEnd &&\n                    current[aStart + sequence] === newList[index + sequence]\n                )\n                    sequence++;\n\n                if (sequence > index - bStart) {\n                    const node = current[aStart];\n                    while (bStart < index)\n                        parent.insertBefore(newList[bStart++], node);\n                } else\n                    parent.replaceChild(newList[bStart++], current[aStart++]);\n            } else aStart++;\n        }\n    }\n}\n", "import STATE, { withCurrentComponent } from \"./globals\";\nimport { reconcileArrays } from \"./templates/reconcile\";\nimport { findCommentPlaceholders } from \"./utils/dom\";\nimport { effect } from \"./hooks/signals\";\nimport { getEventHandler } from \"./events\";\nimport { handleSignalBinding } from \"./templates/helpers\";\nimport { ATTRIBUTES_NAMES_EVENTS } from \"./templates/engine\";\n\nexport function setupEventDelegation(instance, eventAttrs) {\n    const shadow = instance?.shadowRoot;\n    if (!shadow) return;\n\n    const eventTypes = new Set();\n    for (const attr of eventAttrs) {\n        const evtType = attr.name.replace(`${ATTRIBUTES_NAMES_EVENTS}-`, \"\");\n        if (evtType) eventTypes.add(evtType);\n    }\n\n    for (const evtType of eventTypes) {\n        const listener = (event) => {\n            const target = event.target;\n            if (target.hasAttribute(`${ATTRIBUTES_NAMES_EVENTS}-${evtType}`)) {\n                const handlerId = Number(\n                    target.getAttribute(`${ATTRIBUTES_NAMES_EVENTS}-${evtType}`)\n                );\n                const handler = getEventHandler(instance, handlerId);\n                if (typeof handler === \"function\") {\n                    withCurrentComponent(instance, () => {\n                        handler.call(instance, event);\n                    });\n                }\n            }\n        };\n\n        shadow.addEventListener(evtType, listener, {\n            passive: false,\n            capture: true,\n        });\n        instance._eventHandlers = instance._eventHandlers || new Map();\n        instance._eventHandlers.set(evtType, listener);\n    }\n}\n\nexport function setupRefs(refAttrs, refMap) {\n    if (!refAttrs || !refMap) return;\n\n    for (const attr of refAttrs) {\n        const el = attr.ownerElement;\n        if (!el) continue;\n\n        const idx = Number(attr.value);\n        el.removeAttribute(attr.name);\n\n        const refFn = refMap.get(idx);\n        if (typeof refFn === \"function\") refFn(el);\n    }\n}\n\nexport function bindSignalToElement(instance, sig, updateFn) {\n    const eff = effect(() => {\n        if (instance._isUpdating) return;\n        instance._isUpdating = true;\n        try {\n            updateFn(sig());\n        } finally {\n            instance._isUpdating = false;\n        }\n    });\n    instance._cleanup.add(eff);\n}\n\nexport function setupSignals(instance, signals) {\n    if (!signals || signals.size === 0) return;\n\n    for (const { type, signal, bindAttr, attributeName } of signals.values()) {\n        switch (type) {\n            case \"attribute\":\n                handleAttributeSignal(\n                    instance,\n                    signal,\n                    bindAttr,\n                    attributeName\n                );\n                break;\n            case \"array\":\n                handleArraySignal(instance, signal, bindAttr);\n                break;\n            case \"text\":\n            case \"expression\":\n                handleSignalBinding({ host: instance, type, signal, bindAttr });\n                break;\n        }\n    }\n}\n\nfunction handleAttributeSignal(instance, sig, bindAttr, attributeName) {\n    const el = instance.shadowRoot.querySelector(`[${bindAttr}]`);\n    if (!el) return;\n    el.removeAttribute(bindAttr);\n\n    bindSignalToElement(instance, sig, (value) => {\n        const stringValue = String(value);\n        if (el.getAttribute(attributeName) !== stringValue) {\n            el.setAttribute(attributeName, stringValue);\n        }\n    });\n}\n\nfunction handleArraySignal(instance, sig, bindAttr) {\n    const [startNode, endNode] = findCommentPlaceholders(\n        instance.shadowRoot,\n        bindAttr\n    );\n    if (!startNode || !endNode) return;\n\n    bindSignalToElement(instance, sig, (newValue) => {\n        const oldItems = startNode.__oldItems || [];\n        const newItems = Array.isArray(newValue) ? newValue : [];\n        reconcileArrays(startNode, endNode, oldItems, newItems, instance);\n    });\n}\n\nexport function bindEventsInRange(instance, startNode, endNode) {\n    const { shadowRoot } = instance;\n    const elements = getElementsInRange(shadowRoot, startNode, endNode);\n    bindEvents(instance, elements);\n}\n\nexport function bindEvents(instance, elements) {\n    for (const el of elements) {\n        for (const attr of Array.from(el.attributes)) {\n            if (!attr.name.startsWith(`${ATTRIBUTES_NAMES_EVENTS}`)) continue;\n            const event = attr.name.replace(ATTRIBUTES_NAMES_EVENTS, \"\");\n            const handlerId = parseInt(attr.value, 10);\n\n            const eventHandler = STATE.globalEvents.handlersByType\n                .get(event)\n                ?.get(handlerId);\n            if (typeof eventHandler === \"function\") {\n                el.addEventListener(event, (...args) =>\n                    withCurrentComponent(instance, () =>\n                        eventHandler.call(instance, ...args)\n                    )\n                );\n                el.removeAttribute(attr.name);\n            }\n        }\n    }\n}\n\nexport function getElementsInRange(shadowRoot, startNode, endNode) {\n    const elements = [];\n    const walker = document.createTreeWalker(\n        shadowRoot,\n        NodeFilter.SHOW_ELEMENT,\n        null\n    );\n\n    if (!startNode && !endNode) {\n        while (walker.nextNode()) elements.push(walker.currentNode);\n\n        return elements;\n    }\n\n    const startPoint = startNode?.nextSibling || shadowRoot.firstChild;\n    if (!startPoint) return elements;\n\n    walker.currentNode = startPoint;\n    do {\n        if (walker.currentNode === endNode) break;\n        elements.push(walker.currentNode);\n    } while (walker.nextNode());\n\n    return elements;\n}\n", "import {\n    getDocumentFragment,\n    removeChildNodesBetween,\n    findCommentPlaceholders,\n} from \"../utils/dom\";\nimport { bindSignalToElement } from \"../dom-bindings\";\n\n/**\n * Cache global para las plantillas\n */\nconst cacheTemplate = new Map();\n\n/**\n * Devuelve una copia de la plantilla cacheada. Si no est\u00E1 en cache,\n * la clona y la guarda en cache.\n */\nexport function cachedTemplate(key, fragmentOrTemplate) {\n    const content = getDocumentFragment(fragmentOrTemplate);\n    if (!cacheTemplate.has(key))\n        cacheTemplate.set(key, content.cloneNode(true));\n\n    return cacheTemplate.get(key).cloneNode(true);\n}\n\nconst exprCache = new WeakMap();\n\n/**\n * Eval\u00FAa la expresi\u00F3n fn() con simple cache interno para no recalcular\n * en cada render (opcional). Retorna null si ocurre error o si fn() retorna undefined.\n */\nexport function evalExpr(fn) {\n    if (exprCache.has(fn)) return exprCache.get(fn);\n\n    try {\n        const result = fn() ?? null;\n        exprCache.set(fn, result);\n        return result;\n    } catch {\n        return null;\n    }\n}\n\n/**\n * Inserta o actualiza un texto entre dos comentarios \"placeholder\"\n * (start y end). Si ya existe un nodo de texto, actualiza su contenido;\n * si no, limpia y lo vuelve a insertar.\n */\nexport function renderEvaluated(host, start, end, val) {\n    let current = start.nextSibling;\n    if (current && current.nodeType === Node.TEXT_NODE) {\n        current.textContent = String(val);\n    } else {\n        removeChildNodesBetween(start, end);\n        const textNode = document.createTextNode(String(val));\n        end.parentNode.insertBefore(textNode, end);\n    }\n}\n\n/**\n * Conecta una signal con un \"placeholder\" en el DOM:\n * cuando la signal cambie, se llama a renderer(startNode, endNode, newVal).\n */\nexport function bindPlaceholderSignal(host, { signal, bindAttr, renderer }) {\n    const [startNode, endNode] = findCommentPlaceholders(\n        host.shadowRoot,\n        bindAttr\n    );\n    if (!startNode || !endNode) return;\n\n    bindSignalToElement(host, signal, (newVal) => {\n        renderer(startNode, endNode, newVal);\n    });\n}\n\n/**\n * Dado un host (componente), un tipo (\"expression\" | \"text\"), una signal\n * y un atributo de placeholder (bindAttr), configura la reacci\u00F3n al cambio\n * de la signal e invoca renderEvaluated() cuando cambie.\n */\nexport function handleSignalBinding({ host, type, signal, bindAttr }) {\n    bindPlaceholderSignal(host, {\n        signal,\n        bindAttr,\n        renderer: (start, end, val) => {\n            const evaluated = type === \"expression\" ? evalExpr(() => val) : val;\n            if (evaluated != null) {\n                renderEvaluated(host, start, end, evaluated);\n            }\n        },\n    });\n}\n\nexport const specialAttr = (n) =>\n    n && !/^(data_esor_|@|ref|key$)/.test(n) && /^[a-z][\\w\\-_:]*$/i.test(n);\n", "import { signal } from \"../hooks/signals\";\nimport { cleanAttributeValue } from \"../utils/parser\";\nimport { specialAttr } from \"./helpers\";\n\nlet textAreaElement;\n\nfunction decodeHTMLEntities(text) {\n    if (!textAreaElement) textAreaElement = document.createElement(\"textarea\");\n    textAreaElement.innerHTML = text;\n    return textAreaElement.value;\n}\n\nfunction coerceAttrValue(raw) {\n    if (typeof raw !== \"string\") return raw;\n    if (raw.indexOf(\"&\") !== -1) raw = decodeHTMLEntities(raw);\n    const t = raw.trim();\n    if (!t) return t;\n    const low = t.toLowerCase();\n    const sp = {\n        true: true,\n        false: false,\n        null: null,\n        undefined: undefined,\n        nan: NaN,\n        infinity: Infinity,\n        \"-infinity\": -Infinity,\n    };\n    if (low in sp) return sp[low];\n    const num = Number(t);\n    if (!Number.isNaN(num)) return num;\n    try {\n        return JSON.parse(t);\n    } catch {\n        return t;\n    }\n}\n\nexport function generateSpecialAttrSignals(instance) {\n    for (const { name, value } of instance.attributes) {\n        if (!specialAttr(name)) continue;\n        const prop = coerceAttrValue(cleanAttributeValue(value));\n        instance._props[name] = signal(prop);\n    }\n}\n\nexport function observeAttrMutations(instance) {\n    const handler = (mutationsList) => {\n        for (const { attributeName } of mutationsList) {\n            if (!specialAttr(attributeName)) continue;\n            const sig = instance._props[attributeName];\n            if (sig) sig(coerceAttrValue(instance.getAttribute(attributeName)));\n        }\n    };\n    const observer = new MutationObserver(handler);\n    observer.observe(instance, { attributes: true });\n    instance._cleanup.add(() => observer.disconnect());\n}\n\nexport function initPropsAndObserve(instance) {\n    generateSpecialAttrSignals(instance);\n    observeAttrMutations(instance);\n}\n", "import { Lifecycle } from \"./lifecycle\";\nimport STATE, { withCurrentComponent } from \"./globals\";\nimport {\n    findAttributesWithEsorDirectives,\n    setupDeclarativeShadowRoot,\n} from \"./utils/dom\";\nimport { initPropsAndObserve } from \"./templates/props\";\nimport { setupEventDelegation, setupSignals, setupRefs } from \"./dom-bindings\";\nimport { clearAllEventHandlers } from \"./events\";\nimport { cachedTemplate } from \"./templates/helpers\";\n\nexport function component(name, setup) {\n    class EsorComponent extends HTMLElement {\n        constructor() {\n            super();\n            setupDeclarativeShadowRoot(this); // Configuramos el Shadow DOM\n            this._initEsorComponent(this);\n            this._render();\n        }\n\n        _initEsorComponent(instance) {\n            Object.assign(instance, {\n                _cleanup: new Set(),\n                _isUpdating: false,\n                _props: {},\n                _eventIds: [],\n                lifecycle: new Lifecycle(),\n            });\n            STATE.currentComponent = instance;\n            initPropsAndObserve(instance);\n            instance.lifecycle.run(\"beforeMount\", instance);\n        }\n\n        connectedCallback() {\n            this.lifecycle.run(\"mount\", this);\n        }\n\n        disconnectedCallback() {\n            this.lifecycle.run(\"destroy\", this);\n            this._cleanup.forEach((fn) => fn());\n            this._cleanup.clear();\n            clearAllEventHandlers(this); // Limpiar todos los handlers\n        }\n\n        _render() {\n            withCurrentComponent(this, () => {\n                this.lifecycle.run(\"beforeUpdate\", this);\n                const setupResult = setup.call(this, this._props);\n                const { template, signals, refs } =\n                    typeof setupResult === \"function\"\n                        ? setupResult()\n                        : setupResult || {};\n\n                if (!this.shadowRoot.hasChildNodes()) {\n                    this.shadowRoot.appendChild(cachedTemplate(name, template));\n                }\n\n                const data = findAttributesWithEsorDirectives(this.shadowRoot);\n                if (data) {\n                    if (data.data_esor_ref) setupRefs(data.data_esor_ref, refs);\n                    if (data.data_esor_event)\n                        setupEventDelegation(this, data.data_esor_event);\n                }\n                setupSignals(this, signals);\n\n                this.lifecycle.run(\"update\", this);\n            });\n        }\n    }\n    customElements.define(name, EsorComponent);\n    return EsorComponent;\n}\n", "export function ref(initialValue = null) {\n    let ref = initialValue;\n\n    return new Proxy(() => {}, {\n        apply: (__, _, args) => (args.length ? (ref = args[0]) : ref),\n        get: (_, prop) => ref && (ref[prop] === undefined ? ref : ref[prop]),\n        set: (_, prop, value) => !!ref && ((ref[prop] = value), true),\n    });\n}\n", "import { signal, effect } from \"./signals\";\n\n/**\n * memo: Recalcula y memorizza el valor solo cuando cambian las dependencias.\n *\n * @param {Function} fn - Funci\u00F3n que calcula el valor memoizado.\n * @param {Array<any>} deps - Arreglo de dependencias que controlan cu\u00E1ndo se recalcula el valor.\n * @returns {Function} signal - Una funci\u00F3n reactiva que retorna el valor memoizado.\n */\nexport function memo(fn, deps = []) {\n    // Inicializamos el valor memoizado llamando a la funci\u00F3n fn() en el primer render.\n    const _signal = signal(fn());\n\n    // Solo se recalcula el valor si alguna de las dependencias cambia.\n    effect(() => (_signal(fn()), deps));\n\n    return _signal;\n}\n", "import STATE from \"./globals\";\n\nconst STYLES = {\n    info: { color: \"#0066cc\", icon: \"\u2139\uFE0F\" },\n    warn: { color: \"#FFA500\", icon: \"\u26A0\uFE0F\" },\n    error: { color: \"#FF0000\", icon: \"\uD83D\uDEAB\" },\n};\n\nconst log = (type = \"info\", message = \"\", ...args) => {\n    if (!STYLES[type]) type = \"info\";\n    const capitalType = type.charAt(0).toUpperCase() + type.slice(1);\n\n    console.groupCollapsed(\n        `%c[ESOR ${STYLES[type].icon}${capitalType}] ${message}`,\n        `color: ${STYLES[type].color}; font-weight: bold;`\n    );\n\n    console[type]({\n        message,\n        component: STATE.currentComponent?.constructor?.name || \"Unknown\",\n        time: new Date().toISOString(),\n        data: args.length ? args : undefined,\n    });\n\n    console[type === \"error\" ? \"trace\" : \"debug\"]();\n    console.groupEnd();\n};\n\nexport const info = (...args) => log(\"info\", ...args);\nexport const warn = (...args) => log(\"warn\", ...args);\nexport const error = (...args) => log(\"error\", ...args);\n", "import STATE from \"../globals\";\nimport { error } from \"../logger\";\n\nexport function useEmit(name, detail) {\n    const comp = STATE.currentComponent;\n    if (!comp) {\n        error(\"useEmit must be used within a component\");\n        return null;\n    }\n\n    const event = new CustomEvent(name, {\n        detail,\n        bubbles: true,\n        composed: true,\n        cancelable: true,\n    });\n\n    event.__esor = {\n        name,\n        detail,\n        receivedBy: [],\n        timestamp: Date.now(),\n    };\n\n    comp.dispatchEvent(event);\n    return event;\n}\n", "import { signal, effect } from \"./signals\";\nimport { error } from \"../logger\";\n\nconst STORAGE_PREFIX = \"esor-store:\";\n\nexport const store = (initialState, options = {}) => {\n    const storedState = options.persist\n        ? loadFromStorage(options.persist)\n        : null;\n\n    const state = signal(storedState || initialState);\n    const subscribers = new Set();\n\n    if (options.persist) {\n        // Escuchamos cambios en localStorage para sincronizar\n        effect(() => {\n            const handleStorage = (e) => {\n                if (e.key === STORAGE_PREFIX + options.persist) {\n                    try {\n                        state.set(JSON.parse(e.newValue));\n                    } catch (err) {\n                        error(`Failed to sync state: ${err.message}`);\n                    }\n                }\n            };\n            window.addEventListener(\"storage\", handleStorage);\n            return () => window.removeEventListener(\"storage\", handleStorage);\n        });\n    }\n\n    const store = {\n        setState(update) {\n            const newState =\n                typeof update === \"function\" ? update(state()) : update;\n            state.set(newState);\n            if (options.persist) saveToStorage(options.persist, newState);\n            subscribers.forEach((cb) => cb(newState));\n        },\n        subscribe(callback) {\n            subscribers.add(callback);\n            return () => subscribers.delete(callback);\n        },\n        // Leer estado: store.getState() -> state()\n        getState: state,\n    };\n\n    return [state, store];\n};\n\nfunction loadFromStorage(key) {\n    try {\n        const data = localStorage.getItem(STORAGE_PREFIX + key);\n        return data ? JSON.parse(data) : null;\n    } catch (e) {\n        error(`Failed to load state: ${e.message}`);\n        return null;\n    }\n}\n\nfunction saveToStorage(key, value) {\n    try {\n        localStorage.setItem(STORAGE_PREFIX + key, JSON.stringify(value));\n    } catch (e) {\n        error(`Failed to save state: ${e.message}`);\n    }\n}\n"],
  "mappings": "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",
  "names": ["_lc", "_Lifecycle_instances", "hooks_fn", "_Lifecycle", "__privateAdd", "fn", "__privateMethod", "__privateGet", "ctx", "hooks", "e", "__name", "__publicField", "Lifecycle", "getLC", "beforeMount", "onMount", "beforeUpdate", "onUpdate", "onDestroy", "t", "onEffect", "clean", "STATE", "globals_default", "withCurrentComponent", "component", "fn", "prev", "__name", "eventHandlers", "nextEventId", "registerEvent", "component", "type", "handler", "handlersMap", "id", "__name", "getEventHandler", "clearEventHandler", "handlers", "clearAllEventHandlers", "escapeHTML", "__name", "value", "match", "cleanAttributeValue", "PLACEHOLDER_EXPRESSION_PREFIX", "ATTRIBUTES_NAMES_EVENTS", "ATTRIBUTES_NAMES_BIND", "ATTRIBUTES_NAMES_REFS", "attrReg", "refReg", "evtReg", "qReg", "rawTags", "replaceAttribute", "hStr", "regexMatch", "name", "value", "q", "__name", "removeQuote", "s", "isTemplateObject", "o", "injectEvent", "fn", "eType", "component", "globals_default", "id", "registerEvent", "injectRef", "i", "refs", "injectSignalAttr", "val", "aName", "sIdx", "signals", "quote", "initVal", "escVal", "escapeHTML", "bindAttr", "injectExpr", "isFn", "bA", "out", "injectArray", "v", "isSigArr", "bind", "signalEntry", "x", "processVal", "processTemplateNodes", "template", "output", "node", "acc", "a", "processTemplate", "strs", "vals", "sMap", "rMap", "rIdx", "aMatch", "inAttr", "refMatch", "evtMatch", "isRef", "isEvt", "evtType", "t", "templateCache", "html", "result", "valuesChanged", "val1", "val2", "__name", "getDocumentFragment", "removeChildNodesBetween", "startNode", "endNode", "node", "next", "placeholderCache", "findCommentPlaceholders", "root", "attr", "cached", "walker", "start", "end", "current", "result", "setupDeclarativeShadowRoot", "host", "internals", "findAttributesWithEsorDirectives", "prefixes", "ATTRIBUTES_NAMES_REFS", "ATTRIBUTES_NAMES_EVENTS", "ATTRIBUTES_NAMES_BIND", "found", "iterator", "name", "prefix", "attribute", "matchingPrefix", "SubscriberFlags", "SubscriberFlags2", "createReactiveSystem", "updateComputed", "notifyEffect2", "queuedEffects", "queuedEffectsTail", "dep", "sub", "currentDep", "nextDep", "depLastSub", "isValidLink", "linkNewDep", "link2", "targetFlag", "subs", "stack", "top", "subFlags", "subSubs", "depSubs", "depsTail", "clearTracking", "flags", "checkDirty", "computed2", "shallowPropagate", "effect2", "queuedNext", "newLink", "oldTail", "dirty", "depFlags", "checkLink", "nextSub", "prevSub", "depDeps", "__name", "link", "propagate", "updateDirtyFlag", "startTracking", "endTracking", "processEffectNotifications", "processComputedUpdate", "processPendingInnerEffects", "activeSub", "oldValue", "newValue", "notifyEffectScope", "notifyEffect", "pauseStack", "batchDepth", "activeScope", "startBatch", "endBatch", "pauseTracking", "resumeTracking", "signal", "signalGetterSetter", "computed", "getter", "computedGetter", "effect", "fn", "e", "runEffect", "effectStop", "effectScope", "runEffectScope", "value", "arraysCache", "wrapArray", "arr", "read", "proxy", "target", "prop", "receiver", "value", "args", "result", "__name", "signal", "initialValue", "sig", "reactiveArray", "wrapArray", "__name", "args", "newVal", "batch", "fn", "globals_default", "startBatch", "flushBatch", "endBatch", "effects", "effect", "reconcileArrays", "startNode", "endNode", "oldItems", "newItems", "host", "oldArr", "newArr", "parent", "currentNodes", "collectNodes", "newNodes", "createOrReuseNodes", "item", "i", "batch", "ddiff", "bindEventsInRange", "__name", "start", "end", "nodes", "curr", "isValidDOMNode", "node", "getNodeKey", "updateNodeContent", "oldNode", "newNode", "oldItem", "newItem", "oldTextNodes", "getTextNodes", "newTextNodes", "updated", "len", "walker", "items", "nodeMap", "oldMap", "keys", "n", "key", "getItemKey", "existing", "hasChanged", "createNode", "copyEventAttributes", "oldVals", "extractDynamicValues", "newVals", "areValuesEqual", "template", "values", "frag", "attrVal", "a", "b", "v", "keysA", "keysB", "attr", "ATTRIBUTES_NAMES_EVENTS", "index", "el", "moveBefore", "referenceNode", "current", "newList", "refNode", "aStart", "aEnd", "bStart", "bEnd", "after", "map", "sequence", "setupEventDelegation", "instance", "eventAttrs", "shadow", "eventTypes", "attr", "evtType", "ATTRIBUTES_NAMES_EVENTS", "listener", "__name", "event", "target", "handlerId", "handler", "getEventHandler", "withCurrentComponent", "setupRefs", "refAttrs", "refMap", "el", "idx", "refFn", "bindSignalToElement", "sig", "updateFn", "eff", "effect", "setupSignals", "signals", "type", "signal", "bindAttr", "attributeName", "handleAttributeSignal", "handleArraySignal", "handleSignalBinding", "value", "stringValue", "startNode", "endNode", "findCommentPlaceholders", "newValue", "oldItems", "newItems", "reconcileArrays", "bindEventsInRange", "shadowRoot", "elements", "getElementsInRange", "bindEvents", "eventHandler", "globals_default", "args", "walker", "startPoint", "cacheTemplate", "cachedTemplate", "key", "fragmentOrTemplate", "content", "getDocumentFragment", "__name", "exprCache", "evalExpr", "fn", "result", "renderEvaluated", "host", "start", "end", "val", "current", "removeChildNodesBetween", "textNode", "bindPlaceholderSignal", "signal", "bindAttr", "renderer", "startNode", "endNode", "findCommentPlaceholders", "bindSignalToElement", "newVal", "handleSignalBinding", "type", "evaluated", "specialAttr", "n", "textAreaElement", "decodeHTMLEntities", "text", "__name", "coerceAttrValue", "raw", "low", "sp", "num", "generateSpecialAttrSignals", "instance", "name", "value", "specialAttr", "prop", "cleanAttributeValue", "signal", "observeAttrMutations", "handler", "mutationsList", "attributeName", "sig", "observer", "initPropsAndObserve", "component", "name", "setup", "_EsorComponent", "setupDeclarativeShadowRoot", "instance", "Lifecycle", "globals_default", "initPropsAndObserve", "fn", "clearAllEventHandlers", "withCurrentComponent", "setupResult", "template", "signals", "refs", "cachedTemplate", "data", "findAttributesWithEsorDirectives", "setupRefs", "setupEventDelegation", "setupSignals", "__name", "EsorComponent", "ref", "initialValue", "__name", "__", "_", "args", "prop", "value", "memo", "fn", "deps", "_signal", "signal", "effect", "__name", "STYLES", "log", "__name", "type", "message", "args", "capitalType", "globals_default", "info", "warn", "error", "useEmit", "name", "detail", "comp", "globals_default", "error", "event", "__name", "STORAGE_PREFIX", "store", "__name", "initialState", "options", "storedState", "loadFromStorage", "state", "signal", "subscribers", "effect", "handleStorage", "e", "err", "error", "update", "newState", "saveToStorage", "cb", "callback", "key", "data", "value"]
}
