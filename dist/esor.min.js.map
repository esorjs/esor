{
  "version": 3,
  "sources": ["../src/lifecycle.js", "../src/globals.js", "../src/utils/dom.js", "../src/hooks/effects.js", "../src/hooks/signals.js", "../src/utils/parser.js", "../src/templates/reconcile.js", "../src/helpers.js", "../src/logger.js", "../src/events/events.js", "../src/templates/engine.js", "../src/templates/templates.js", "../src/templates/props.js", "../src/component.js", "../src/hooks/ref.js", "../src/hooks/memo.js", "../src/hooks/store.js"],
  "sourcesContent": ["export class Lifecycle {\n    static current;\n    #lc = new Map();\n\n    constructor() {\n        Lifecycle.current = this;\n    }\n\n    #hooks(t) {\n        return this.#lc.has(t) || this.#lc.set(t, new Set()), this.#lc.get(t);\n    }\n\n    add(t, fn) {\n        this.#hooks(t).add(fn);\n        return () => this.#lc.get(t)?.delete(fn);\n    }\n    run(t, ctx) {\n        this.#lc.get(t)?.forEach((f) => f.call(ctx));\n    }\n    clear(t) {\n        t ? this.#lc.delete(t) : this.#lc.clear();\n    }\n}\n\nconst getLC = () =>\n    Lifecycle.current ||\n    (() => {\n        throw \"Lifecycle not initialized\";\n    })();\n\nexport const [beforeMount, onMount, beforeUpdate, onUpdate, onDestroy] = [\n    \"beforeMount\",\n    \"mount\",\n    \"beforeUpdate\",\n    \"update\",\n    \"destroy\",\n].map((t) => (fn) => getLC().add(t, fn));\n\nexport const onEffect = (fn) => {\n    const clean = fn();\n    return (\n        (clean instanceof Function && getLC().add(\"destroy\", clean)) ||\n        (() => {})\n    );\n};\n", "// Global mutable state\nconst STATE = {\n    currentEffect: null,\n    currentComponent: null,\n    pendingEffects: new Set(),\n    isEffectsFlushing: false,\n    globalEvents: {\n        handlersByType: new Map(),\n        nextId: 0,\n    },\n};\n\nexport default STATE;\n\nexport function withCurrentComponent(component, fn) {\n    const prev = STATE.currentComponent;\n    STATE.currentComponent = component;\n    try {\n        return fn();\n    } finally {\n        STATE.currentComponent = prev;\n    }\n}\n", "export function valuesChanged(val1, val2) {\n    return !Object.is(val1, val2);\n}\n\nexport const getDocumentFragment = (e) =>\n    (e instanceof DocumentFragment && e) ||\n    e?.content?.cloneNode() ||\n    document.createDocumentFragment();\n\nexport function removeChildNodesBetween(startNode, endNode) {\n    let node = startNode.nextSibling;\n    while (node && node !== endNode) {\n        const next = node.nextSibling;\n        node.parentNode.removeChild(node);\n        node = next;\n    }\n}\n\nexport const findCommentPlaceholders = (root, attr) => {\n    const w = document.createTreeWalker(root, NodeFilter.SHOW_COMMENT);\n    let [s, e] = [null, null];\n    while (w.nextNode() && !e) {\n        const n = w.currentNode;\n        if (!s && n.nodeValue === attr) s = n;\n        else if (s && n.nodeValue === `//${attr}`) e = n;\n    }\n    return [s, e];\n};\n\nexport function setupDeclarativeShadowRoot(host) {\n    const supportsDeclarative =\n        HTMLElement.prototype.hasOwnProperty(\"attachInternals\");\n    const internals = supportsDeclarative ? host.attachInternals() : null;\n\n    if (internals?.shadowRoot) host.shadowRoot = internals.shadowRoot;\n    else host.attachShadow({ mode: \"open\" });\n}\n", "import STATE from \"../globals\";\n\n/**\n * Efectos pendientes se ejecutan en microtask,\n * evitando actualizaciones sin control.\n */\nexport function flushEffects() {\n    if (STATE.isEffectsFlushing) return;\n    STATE.isEffectsFlushing = true;\n    Promise.resolve().then(() => {\n        const effectsToRun = new Set(STATE.pendingEffects);\n        STATE.pendingEffects.clear();\n        effectsToRun.forEach((effect) => effect());\n        STATE.isEffectsFlushing = false;\n    });\n}\n\n/**\n * useEffect: registra una funci\u00F3n \"effect\" que se re-ejecuta al cambiar\n * signals le\u00EDdos durante su ejecuci\u00F3n.\n */\nexport function useEffect(fn) {\n    const effect = () => {\n        const prevEffect = STATE.currentEffect;\n        STATE.currentEffect = effect;\n        try {\n            return fn();\n        } finally {\n            STATE.currentEffect = prevEffect;\n        }\n    };\n    effect(); // Ejecuta inmediatamente la primera vez\n    return effect;\n}\n", "import STATE from \"../globals\";\nimport { valuesChanged } from \"../utils/dom\";\nimport { flushEffects, useEffect } from \"./effects\";\n\nlet batchDepth = 0;\nconst pendingUpdates = new Set();\n\n/**\n * useSignal: crea un valor reactivo que notifica a suscriptores (effects)\n */\nexport function useSignal(initialValue) {\n    const subscriptions = new Set();\n    let value = initialValue;\n\n    const read = () => {\n        if (STATE.currentEffect) subscriptions.add(STATE.currentEffect);\n        if (Array.isArray(value)) return addSignalMap(value, read);\n        return value;\n    };\n\n    const write = (newValue) => {\n        if (!valuesChanged(value, newValue)) return;\n        value = newValue;\n\n        if (batchDepth > 0) {\n            subscriptions.forEach((sub) => pendingUpdates.add(sub));\n            return;\n        }\n        // Actualizamos en microtask\n        queueMicrotask(() => {\n            for (const effect of subscriptions) {\n                if (typeof effect === \"function\") {\n                    STATE.pendingEffects.add(effect);\n                }\n            }\n            flushEffects();\n        });\n    };\n\n    read.valueOf = () => read();\n    read.toString = () => String(read());\n    read.signal = true;\n    read.cleanup = () => {\n        subscriptions.clear();\n        value = initialValue;\n    };\n\n    return [read, write];\n}\n\n/**\n * useComputed: computa un valor derivado y se actualiza cuando cambian\n * los signals usados dentro de la funci\u00F3n `fn`.\n */\nexport function useComputed(fn) {\n    const [value, setValue] = useSignal(fn());\n    useEffect(() => {\n        const newValue = fn();\n        if (valuesChanged(value(), newValue)) {\n            queueMicrotask(() => setValue(newValue));\n        }\n    });\n    return value;\n}\n\n// M\u00E9todos para arrays reactivas:\nconst ARRAY_METHODS = [\n    \"map\",\n    \"filter\",\n    \"find\",\n    \"findIndex\",\n    \"slice\",\n    \"concat\",\n    \"reduce\",\n    \"every\",\n    \"some\",\n    \"includes\",\n    \"push\",\n    \"pop\",\n    \"shift\",\n    \"unshift\",\n    \"splice\",\n    \"reverse\",\n    \"sort\",\n];\n\nfunction addSignalMap(arr, read) {\n    ARRAY_METHODS.forEach((method) => {\n        const orig = arr[method];\n        arr[method] = function (...args) {\n            const mappedArray = orig.apply(this, args);\n            mappedArray.__signalArray = true;\n            mappedArray.__signal = read;\n            mappedArray.__mapFn = args[0];\n            return mappedArray;\n        };\n    });\n    return arr;\n}\n\n/**\n * useBatch: agrupa varias escrituras de signals en un bloque at\u00F3mico,\n * generando actualizaciones una sola vez al final.\n */\nexport function useBatch(fn) {\n    batchDepth++;\n    try {\n        return fn();\n    } finally {\n        batchDepth--;\n        if (batchDepth === 0 && pendingUpdates.size) {\n            const updates = Array.from(pendingUpdates);\n            pendingUpdates.clear();\n            updates.forEach((effect) => STATE.pendingEffects.add(effect));\n            flushEffects();\n        }\n    }\n}\n", "export const escapeHTML = (value) => {\n    if (value === undefined || value === null) return \"\";\n    return value.toString().replace(\n        /[&<>'\"]/g,\n        (match) =>\n            ({\n                \"&\": \"&amp;\",\n                \"<\": \"&lt;\",\n                \">\": \"&gt;\",\n                \"'\": \"&#39;\",\n                '\"': \"&quot;\",\n                \"/\": \"&#x2F;\",\n            }[match])\n    );\n};\n\nexport function cleanAttributeValue(value) {\n    if (value === undefined || value === null) return \"\";\n\n    return String(value)\n        .replace(/^[\"']|[\"']$/g, \"\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#39;\");\n}\n", "import { bindEventsInRange } from \"../helpers\";\n\nexport function reconcileArrays(startNode, endNode, oldItems, newItems, host) {\n    oldItems = [...(oldItems || [])];\n    newItems = [...(newItems || [])];\n    const parent = endNode.parentNode;\n    const currentNodes = collectDOMNodesBetween(startNode, endNode);\n    const newNodeList = newItems.map((item, i) =>\n        createItem(item, getItemKey(item, i))\n    );\n    ddiff(parent, currentNodes, newNodeList, endNode);\n    bindEventsInRange(host, startNode, endNode);\n    startNode.__oldItems = [...newItems];\n}\n\nfunction ddiff(parent, current, newList, refNode) {\n    let as = 0,\n        ae = current.length,\n        bs = 0,\n        be = newList.length;\n    const ref = (ae && current[ae - 1].nextSibling) || refNode;\n    while (as < ae && bs < be && current[as] === newList[bs]) {\n        as++;\n        bs++;\n    }\n    while (ae > as && be > bs && current[ae - 1] === newList[be - 1]) {\n        ae--;\n        be--;\n    }\n    let map = null;\n    while (as < ae || bs < be) {\n        if (ae === as) {\n            const t =\n                be < newList.length\n                    ? bs\n                        ? newList[bs - 1].nextSibling\n                        : newList[be - bs]\n                    : ref;\n            while (bs < be) parent.insertBefore(newList[bs++], t);\n        } else if (be === bs) {\n            while (as < ae) parent.removeChild(current[as++]);\n        } else if (\n            current[as] === newList[be - 1] &&\n            newList[bs] === current[ae - 1]\n        ) {\n            const t = current[--ae].nextSibling;\n            parent.insertBefore(newList[bs++], current[as++].nextSibling);\n            parent.insertBefore(newList[--be], t);\n            current[ae] = newList[be];\n        } else {\n            map ||= new Map(newList.slice(bs, be).map((x, i) => [x, bs + i]));\n            const i = map.get(current[as]);\n            if (i == null) parent.removeChild(current[as++]);\n            else if (bs < i && i < be) {\n                let sq = 1,\n                    x = as;\n                while (++x < ae && x < be && map.get(current[x]) === i + sq)\n                    sq++;\n                if (sq > i - bs) {\n                    const t = current[as];\n                    while (bs < i) parent.insertBefore(newList[bs++], t);\n                } else parent.replaceChild(newList[bs++], current[as++]);\n            } else as++;\n        }\n    }\n}\n\nfunction collectDOMNodesBetween(s, e, c = []) {\n    for (let n = s?.nextSibling; n && n !== e; n = n.nextSibling) c.push(n);\n    return c;\n}\nfunction getItemKey(i, x) {\n    return i?.key ?? i?.id ?? `index-${x}`;\n}\nfunction createItem(i, k) {\n    if (i?.template) {\n        const n =\n            i.template.cloneNode(true).childNodes[0] ||\n            document.createTextNode(\"\");\n        if (n.nodeType === 1 && k) n.setAttribute(\"data-key\", k);\n        return n;\n    }\n    return document.createTextNode(i ?? \"\");\n}\n", "import STATE, { withCurrentComponent } from \"./globals\";\nimport { handleSignalBinding } from \"./templates/templates\";\nimport { findCommentPlaceholders } from \"./utils/dom\";\nimport { reconcileArrays } from \"./templates/reconcile\";\nimport { useEffect } from \"./hooks/effects\";\n\nexport function bindSignalToElement(instance, signal, updateFn) {\n    const effect = useEffect(() => {\n        if (instance._isUpdating) return;\n        instance._isUpdating = true;\n        try {\n            updateFn(signal());\n        } finally {\n            instance._isUpdating = false;\n        }\n    });\n    instance._cleanup.add(effect);\n}\n\nexport function bindEventsInRange(instance, startNode, endNode) {\n    const { shadowRoot } = instance;\n    const elements = [];\n    if (!startNode && !endNode) {\n        if (shadowRoot.nodeType === Node.ELEMENT_NODE)\n            elements.push(shadowRoot);\n        elements.push(...shadowRoot.querySelectorAll(\"*\"));\n    } else {\n        let cur = startNode?.nextSibling;\n        while (cur && cur !== endNode) {\n            if (cur.nodeType === Node.ELEMENT_NODE) {\n                elements.push(cur, ...cur.querySelectorAll(\"*\"));\n            }\n            cur = cur.nextSibling;\n        }\n    }\n\n    for (const el of elements) {\n        for (const attr of el.attributes) {\n            if (!attr.name.startsWith(\"data-event-\")) continue;\n            const eventType = attr.name.replace(\"data-event-\", \"\");\n            const handlerId = parseInt(attr.value, 10);\n            const eventHandler = STATE.globalEvents.handlersByType\n                .get(eventType)\n                ?.get(handlerId);\n            if (typeof eventHandler === \"function\") {\n                const ac = new AbortController();\n                el.addEventListener(\n                    eventType,\n                    (...args) =>\n                        withCurrentComponent(instance, () =>\n                            eventHandler.call(instance, ...args)\n                        ),\n                    { signal: ac.signal }\n                );\n                instance._cleanup.add(() => ac.abort());\n                el.removeAttribute(attr.name);\n            }\n        }\n    }\n}\n\nexport function setupSignals(instance, signals) {\n    if (!signals) return;\n    signals.forEach(({ type, signal, bindAttr, attributeName }) => {\n        if (type === \"attribute\") {\n            const el = instance.shadowRoot.querySelector(`[${bindAttr}]`);\n            if (!el) return;\n            el.removeAttribute(bindAttr);\n            bindSignalToElement(instance, signal, (val) => {\n                const strVal = String(val);\n                if (el.getAttribute(attributeName) !== strVal)\n                    el.setAttribute(attributeName, strVal);\n            });\n        } else if (type === \"array\") {\n            const [startNode, endNode] = findCommentPlaceholders(\n                instance.shadowRoot,\n                bindAttr\n            );\n            if (!startNode || !endNode) return;\n            bindSignalToElement(instance, signal, (newVal) => {\n                const oldVal = startNode.__oldItems || [];\n                reconcileArrays(\n                    startNode,\n                    endNode,\n                    oldVal,\n                    Array.isArray(newVal) ? newVal : [],\n                    instance\n                );\n            });\n        } else if (type === \"text\" || type === \"expression\") {\n            handleSignalBinding({ host: instance, type, signal, bindAttr });\n        }\n    });\n}\n\nexport function setupRefs(instance, refs) {\n    if (!refs) return;\n    refs.forEach((refFn, i) => {\n        const el = instance.shadowRoot.querySelector(`[data-ref-${i}]`);\n        if (!el) return;\n        el.removeAttribute(`data-ref-${i}`);\n        refFn(el);\n    });\n}\n", "import STATE from \"./globals\";\n\nconst STYLES = {\n    info: { color: \"#0066cc\", icon: \"\u2139\uFE0F\" },\n    warn: { color: \"#FFA500\", icon: \"\u26A0\uFE0F\" },\n    error: { color: \"#FF0000\", icon: \"\uD83D\uDEAB\" },\n};\n\nconst log = (type = \"info\", message = \"\", ...args) => {\n    if (!STYLES[type]) type = \"info\";\n\n    console.groupCollapsed(\n        `%c[ESOR ${STYLES[type].icon}${capitalize(type)}] ${message}`,\n        `color: ${STYLES[type].color}; font-weight: bold;`\n    );\n\n    console[type]({\n        message,\n        component: STATE.currentComponent?.constructor?.name || \"Unknown\",\n        time: new Date().toISOString(),\n        data: args.length ? args : undefined,\n    });\n\n    console[type === \"error\" ? \"trace\" : \"debug\"]();\n    console.groupEnd();\n};\n\nconst capitalize = (s) => (s ? str.charAt(0).toUpperCase() + s.slice(1) : \"\");\n\nexport const info = (...args) => log(\"info\", ...args);\nexport const warn = (...args) => log(\"warn\", ...args);\nexport const error = (...args) => log(\"error\", ...args);\n", "import STATE from \"../globals\";\nimport { error } from \"../logger\";\n\nexport function registerEvent(type, handler) {\n    const state = STATE.globalEvents.handlersByType.get(type) || new Map();\n    const id = STATE.globalEvents.nextId++;\n    state.set(id, handler);\n    STATE.globalEvents.handlersByType.set(type, state);\n    return id;\n}\n\nexport function clearEventHandler(type, id) {\n    const handlers = STATE.globalEvents.handlersByType.get(type);\n    if (handlers) handlers.delete(id);\n    if (handlers.size === 0) STATE.globalEvents.handlersByType.delete(type);\n}\n\nexport function useEmit(name, detail) {\n    const comp = STATE.currentComponent;\n    if (!comp) error(\"useEmit must be used within a component\");\n\n    const event = new CustomEvent(name, {\n        detail,\n        bubbles: true,\n        composed: true,\n        cancelable: true,\n    });\n\n    event.__esor = { name, detail, receivedBy: [] };\n    comp.dispatchEvent(event);\n    return event;\n}\n", "import { registerEvent } from \"../events/events\";\nimport { escapeHTML } from \"../utils/parser\";\n\nconst attrReg = /\\s(\\w[\\w-]*)=([\"'])?(?:(?!\\2).)*$/;\nconst refReg = /ref=([\"'])?\\s*$/;\nconst evtReg = /(@\\w+)=([\"'])?\\s*$/;\nconst qReg = /([\"'])\\s*$/;\nconst rawTags = /^(script|style|textarea|title)$/i;\n\nconst trimQuote = (s) => s.replace(qReg, \"\");\nconst getQuote = (s) => (s.endsWith('\"') ? '\"' : \"'\");\nconst isTemplateObject = (o) => o && typeof o === \"object\" && o.template;\n\nfunction injectRef(fn, hStr, i, refs) {\n    const q = getQuote(hStr);\n    refs.set(i, fn);\n    return hStr.replace(refReg, `data-ref-${i}=${q}true${q}`);\n}\nfunction injectEvent(fn, eType, hStr) {\n    const q = getQuote(hStr);\n    const id = registerEvent(eType, fn);\n    fn.isEventHandler = true;\n    return hStr.replace(evtReg, `data-event-${eType}=${q}${id}${q}`);\n}\nfunction injectSignalAttr(val, aName, hStr, sIdx, signals) {\n    hStr = trimQuote(hStr);\n    const q = getQuote(hStr);\n    const initVal = typeof val === \"function\" ? val() : val;\n    const escVal = rawTags.test(aName) ? String(initVal) : escapeHTML(initVal);\n    const bindAttr = `data-bind-${sIdx}`;\n    hStr += `${escVal}\" ${bindAttr}=${q}true${q}`;\n    signals.set(sIdx, {\n        type: \"attribute\",\n        signal: val,\n        attributeName: aName,\n        bindAttr,\n    });\n    return hStr;\n}\nfunction injectExpr(val, isFn, hStr, sIdx, signals) {\n    const bA = `data-expr-${sIdx}`;\n    signals.set(sIdx, {\n        type: isFn ? \"expression\" : \"text\",\n        signal: val,\n        bindAttr: bA,\n    });\n    const out = isFn ? val() : val;\n    return `${hStr}<!--${bA}-->${escapeHTML(String(out))}<!--//${bA}-->`;\n}\nfunction injectArray(v, sIdx, signals, hStr, isSigArr, fn) {\n    const bind = `data-expr-${sIdx}`;\n    let out = `<!--${bind}-->`;\n    if (isSigArr) {\n        const sig = v.__signal,\n            mapFn = v.__mapFn;\n        const arrFn = () => (sig() || []).map(mapFn || ((x) => x));\n        const items = arrFn();\n        for (const item of Array.isArray(items) ? items : [])\n            out += processVal(item);\n        signals.set(sIdx, { type: \"array\", signal: arrFn, bindAttr: bind });\n    } else {\n        const arr = Array.isArray(v) ? v : [];\n        for (const item of arr) out += `<div>${processVal(item)}</div>`;\n        signals.set(sIdx, {\n            type: \"array\",\n            bindAttr: bind,\n            signal: typeof fn === \"function\" ? fn : () => v,\n        });\n    }\n    return hStr + out + `<!--//${bind}-->`;\n}\nfunction processVal(v) {\n    if (v == null || v === false) return \"\";\n    if (Array.isArray(v)) return v.reduce((acc, x) => acc + processVal(x), \"\");\n    if (isTemplateObject(v))\n        return [...v.template.childNodes].reduce((acc, n) => {\n            if (n.nodeType === 1 && n.hasAttribute(\"key\")) {\n                n.setAttribute(\"data-key\", n.getAttribute(\"key\"));\n                n.removeAttribute(\"key\");\n            }\n            return acc + (n.outerHTML || n.textContent);\n        }, \"\");\n    if (v?.type === \"template-array\")\n        return v.templates.reduce((a, x) => a + processVal(x), \"\");\n    return escapeHTML(String(v));\n}\n\nfunction processTemplate(strs, ...vals) {\n    let hStr = \"\",\n        sMap = new Map(),\n        rMap = new Map();\n    let sIdx = 0,\n        rIdx = 0;\n\n    for (let i = 0; i < strs.length; i++) {\n        hStr += strs[i];\n        if (i < vals.length) {\n            const val = vals[i];\n            const aMatch = strs[i].match(attrReg);\n            const inAttr = !!aMatch;\n            const aName = aMatch?.[1];\n\n            // Inlined \"determineInjection\"\n            const refMatch = hStr.match(refReg),\n                evtMatch = hStr.match(evtReg),\n                ref = refMatch && typeof val === \"function\",\n                event = evtMatch && typeof val === \"function\",\n                evtType = evtMatch ? evtMatch[1].slice(1) : null;\n\n            if (ref) {\n                hStr = injectRef(val, hStr, rIdx++, rMap);\n            } else if (event) {\n                hStr = injectEvent(val, evtType, hStr);\n            } else if ((val?.signal || typeof val === \"function\") && inAttr) {\n                hStr = injectSignalAttr(val, aName, hStr, sIdx++, sMap);\n            } else if (Array.isArray(val) && val.__signalArray === true) {\n                hStr = injectArray(val, sIdx++, sMap, hStr, true);\n            } else if (val?.signal) {\n                hStr = injectExpr(val, false, hStr, sIdx++, sMap);\n            } else if (typeof val === \"function\") {\n                hStr = injectExpr(val, true, hStr, sIdx++, sMap);\n            } else if (Array.isArray(val)) {\n                hStr = injectArray(val, sIdx++, sMap, hStr, false, val);\n            } else if (val != null) {\n                hStr += processVal(val);\n            }\n        }\n    }\n\n    const t = document.createElement(\"template\");\n    t.innerHTML = hStr.trim();\n    return { template: t.content, signals: sMap, refs: rMap };\n}\n\nexport function html(strs, ...vals) {\n    return processTemplate(strs, ...vals);\n}\nexport function evalExpr(fn) {\n    try {\n        return fn() ?? null;\n    } catch {\n        return null;\n    }\n}\nexport { isTemplateObject };\n", "import { bindEventsInRange, bindSignalToElement } from \"../helpers\";\nimport {\n    removeChildNodesBetween,\n    findCommentPlaceholders,\n    getDocumentFragment,\n} from \"../utils/dom\";\nimport { evalExpr, isTemplateObject } from \"./engine\";\nimport { reconcileArrays } from \"./reconcile\";\n\nconst cache = new Map();\n\nexport function cachedTemplate(key, fragmentOrTemplate) {\n    const content = getDocumentFragment(fragmentOrTemplate);\n    if (!cache.has(key)) cache.set(key, content.cloneNode(true));\n    return cache.get(key).cloneNode(true);\n}\n\nexport function bindPlaceholderSignal(host, { signal, bindAttr, renderer }) {\n    const [startNode, endNode] = findCommentPlaceholders(\n        host.shadowRoot,\n        bindAttr\n    );\n    if (!startNode || !endNode) return;\n    bindSignalToElement(host, signal, (newVal) =>\n        renderer(startNode, endNode, newVal)\n    );\n}\n\nexport function handleSignalBinding({ host, type, signal, bindAttr }) {\n    bindPlaceholderSignal(host, {\n        signal,\n        bindAttr,\n        renderer: (start, end, val) => {\n            const evaluated = type === \"expression\" ? evalExpr(() => val) : val;\n            if (evaluated != null) renderEvaluated(host, start, end, evaluated);\n        },\n    });\n}\n\nfunction renderEvaluated(host, start, end, val) {\n    if (val.type === \"template-array\") {\n        reconcileArrays(\n            start,\n            end,\n            start.__oldItems || [],\n            val.templates,\n            host\n        );\n        return;\n    }\n    const node = isTemplateObject(val)\n        ? val.template.cloneNode(true)\n        : document.createTextNode(String(val));\n    removeChildNodesBetween(start, end);\n    end.parentNode.insertBefore(node, end);\n    if (isTemplateObject(val)) bindEventsInRange(host, start, end);\n}\n\nexport const specialAttr = (n) =>\n    n && !/^(data-|@|ref$)/.test(n) && /^[a-z][\\w\\-_:]*$/i.test(n);\n", "import { useSignal } from \"../hooks/signals\";\nimport { cleanAttributeValue } from \"../utils/parser\";\nimport { specialAttr } from \"./templates\";\n\nfunction coerceAttrValue(raw) {\n    if (typeof raw !== \"string\") return raw;\n    const t = raw.trim();\n    if (!t) return t;\n    const low = t.toLowerCase(),\n        sp = {\n            true: true,\n            false: false,\n            null: null,\n            undefined: undefined,\n            nan: NaN,\n            infinity: Infinity,\n            \"-infinity\": -Infinity,\n        };\n    if (low in sp) return sp[low];\n    const num = Number(t);\n    if (!Number.isNaN(num)) return num;\n    try {\n        return JSON.parse(t);\n    } catch {\n        return t;\n    }\n}\n\nexport function generateSpecialAttrSignals(instance) {\n    for (const { name, value } of instance.attributes) {\n        if (!specialAttr(name)) continue;\n        const [signal, setSignal] = useSignal(\n            coerceAttrValue(cleanAttributeValue(value))\n        );\n        signal.set = setSignal;\n        instance._props[name] = signal;\n    }\n}\n\nexport function observeAttrMutations(instance) {\n    const obs = new MutationObserver((ms) => {\n        for (const m of ms) {\n            if (m.type !== \"attributes\" || !specialAttr(m.attributeName))\n                continue;\n            const sig = instance._props[m.attributeName];\n            if (sig?.set)\n                sig.set(\n                    coerceAttrValue(instance.getAttribute(m.attributeName))\n                );\n        }\n    });\n    obs.observe(instance, { attributes: true, attributeOldValue: true });\n    instance._cleanup.add(() => obs.disconnect());\n}\n\nexport function initPropsAndObserve(instance) {\n    generateSpecialAttrSignals(instance);\n    observeAttrMutations(instance);\n}\n", "import { Lifecycle } from \"./lifecycle\";\nimport STATE, { withCurrentComponent } from \"./globals\";\nimport { setupDeclarativeShadowRoot } from \"./utils/dom\";\nimport { initPropsAndObserve } from \"./templates/props\";\nimport { bindEventsInRange, setupSignals, setupRefs } from \"./helpers\";\nimport { cachedTemplate } from \"./templates/templates\";\n\nexport function component(name, setup) {\n    class EsorComponent extends HTMLElement {\n        constructor() {\n            super();\n            setupDeclarativeShadowRoot(this);\n            this._cleanup = new Set();\n            this._isUpdating = false;\n            this._props = {};\n            this.lifecycle = new Lifecycle();\n            STATE.currentComponent = this;\n\n            initPropsAndObserve(this);\n            this.lifecycle.run(\"beforeMount\", this);\n            this._render(); // Render inicial\n        }\n\n        connectedCallback() {\n            this.lifecycle.run(\"mount\", this);\n        }\n\n        disconnectedCallback() {\n            this.lifecycle.run(\"destroy\", this);\n            this._cleanup.forEach((fn) => fn());\n            this._cleanup.clear();\n        }\n\n        _render() {\n            withCurrentComponent(this, () => {\n                this.lifecycle.run(\"beforeUpdate\", this);\n\n                const setupResult = setup.call(this, this._props);\n                const { template, signals, refs } =\n                    typeof setupResult === \"function\"\n                        ? setupResult()\n                        : setupResult || {};\n\n                if (!this.shadowRoot.hasChildNodes()) {\n                    this.shadowRoot.appendChild(cachedTemplate(name, template));\n                }\n\n                bindEventsInRange(this);\n                setupSignals(this, signals);\n                setupRefs(this, refs);\n                this.lifecycle.run(\"update\", this);\n            });\n        }\n    }\n\n    customElements.define(name, EsorComponent);\n    return EsorComponent;\n}\n", "/**\n * useRef: devuelve un objeto mutable cuyo valor .current se asigna\n * al elemento DOM real.\n */\nexport function useRef() {\n    let ref = null;\n    return new Proxy(() => {}, {\n        apply: (_, __, [arg]) => (ref = arg),\n        get: (_, prop) => ref?.[prop]?.bind?.(ref) || ref?.[prop],\n        set: (_, prop, value) => (ref ? ((ref[prop] = value), true) : false),\n    });\n}\n", "import { useSignal } from \"./signals\";\nimport { useEffect } from \"./effects\";\n\n/**\n * useMemo: recalcula el valor solo cuando sus dependencias cambian.\n */\nexport function useMemo(fn) {\n    const [signal, setSignal] = useSignal();\n    useEffect(() => setSignal(fn()));\n    return signal;\n}\n", "import { useSignal } from \"./signals\";\nimport { useEffect } from \"./effects\";\nimport { error } from \"../logger\";\n\nconst STORAGE_PREFIX = \"esor-store:\";\n\n/**\n * useStore: peque\u00F1o store reactivo con persistencia opcional en localStorage\n */\nexport const useStore = (initialState, options = {}) => {\n    const storedState = options.persist\n        ? loadFromStorage(options.persist)\n        : null;\n\n    const [state, setState] = useSignal(storedState || initialState);\n    const subscribers = new Set();\n\n    if (options.persist) {\n        useEffect(() => {\n            const handleStorage = (e) => {\n                if (e.key === STORAGE_PREFIX + options.persist) {\n                    try {\n                        setState(JSON.parse(e.newValue));\n                    } catch (err) {\n                        error(`Failed to sync state: ${err.message}`);\n                    }\n                }\n            };\n            window.addEventListener(\"storage\", handleStorage);\n            return () => window.removeEventListener(\"storage\", handleStorage);\n        });\n    }\n\n    const store = {\n        setState(update) {\n            const newState =\n                typeof update === \"function\" ? update(state()) : update;\n            setState(newState);\n            if (options.persist) saveToStorage(options.persist, newState);\n            subscribers.forEach((cb) => cb(newState));\n        },\n        subscribe(callback) {\n            subscribers.add(callback);\n            return () => subscribers.delete(callback);\n        },\n        getState: state,\n    };\n\n    return [state, store];\n};\n\nfunction loadFromStorage(key) {\n    try {\n        const data = localStorage.getItem(STORAGE_PREFIX + key);\n        return data ? JSON.parse(data) : null;\n    } catch (e) {\n        error(`Failed to load state: ${e.message}`);\n        return null;\n    }\n}\n\nfunction saveToStorage(key, value) {\n    try {\n        localStorage.setItem(STORAGE_PREFIX + key, JSON.stringify(value));\n    } catch (e) {\n        error(`Failed to save state: ${e.message}`);\n    }\n}\n"],
  "mappings": "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",
  "names": ["_lc", "_Lifecycle_instances", "hooks_fn", "_Lifecycle", "__privateAdd", "fn", "__privateMethod", "__privateGet", "ctx", "f", "__name", "__publicField", "Lifecycle", "getLC", "beforeMount", "onMount", "beforeUpdate", "onUpdate", "onDestroy", "t", "onEffect", "clean", "STATE", "globals_default", "withCurrentComponent", "component", "fn", "prev", "__name", "valuesChanged", "val1", "val2", "__name", "getDocumentFragment", "removeChildNodesBetween", "startNode", "endNode", "node", "next", "findCommentPlaceholders", "root", "attr", "w", "s", "e", "n", "setupDeclarativeShadowRoot", "host", "internals", "flushEffects", "globals_default", "effectsToRun", "effect", "__name", "useEffect", "fn", "prevEffect", "batchDepth", "pendingUpdates", "useSignal", "initialValue", "subscriptions", "value", "read", "__name", "globals_default", "addSignalMap", "write", "newValue", "valuesChanged", "sub", "effect", "flushEffects", "useComputed", "fn", "setValue", "useEffect", "ARRAY_METHODS", "arr", "method", "orig", "args", "mappedArray", "useBatch", "updates", "escapeHTML", "__name", "value", "match", "cleanAttributeValue", "reconcileArrays", "startNode", "endNode", "oldItems", "newItems", "host", "parent", "currentNodes", "collectDOMNodesBetween", "newNodeList", "item", "i", "createItem", "getItemKey", "ddiff", "bindEventsInRange", "__name", "current", "newList", "refNode", "as", "ae", "bs", "be", "ref", "map", "t", "x", "sq", "s", "e", "c", "n", "k", "bindSignalToElement", "instance", "signal", "updateFn", "effect", "useEffect", "__name", "bindEventsInRange", "startNode", "endNode", "shadowRoot", "elements", "cur", "el", "attr", "eventType", "handlerId", "eventHandler", "globals_default", "ac", "args", "withCurrentComponent", "setupSignals", "signals", "type", "bindAttr", "attributeName", "val", "strVal", "findCommentPlaceholders", "newVal", "oldVal", "reconcileArrays", "handleSignalBinding", "setupRefs", "refs", "refFn", "i", "STYLES", "log", "__name", "type", "message", "args", "capitalize", "globals_default", "s", "info", "warn", "error", "registerEvent", "type", "handler", "state", "globals_default", "id", "__name", "clearEventHandler", "handlers", "useEmit", "name", "detail", "comp", "error", "event", "attrReg", "refReg", "evtReg", "qReg", "rawTags", "trimQuote", "__name", "s", "getQuote", "isTemplateObject", "o", "injectRef", "fn", "hStr", "i", "refs", "q", "injectEvent", "eType", "id", "registerEvent", "injectSignalAttr", "val", "aName", "sIdx", "signals", "initVal", "escVal", "escapeHTML", "bindAttr", "injectExpr", "isFn", "bA", "out", "injectArray", "v", "isSigArr", "bind", "sig", "mapFn", "arrFn", "x", "items", "item", "processVal", "arr", "acc", "a", "processTemplate", "strs", "vals", "sMap", "rMap", "rIdx", "aMatch", "inAttr", "refMatch", "evtMatch", "ref", "event", "evtType", "t", "html", "evalExpr", "cache", "cachedTemplate", "key", "fragmentOrTemplate", "content", "getDocumentFragment", "__name", "bindPlaceholderSignal", "host", "signal", "bindAttr", "renderer", "startNode", "endNode", "findCommentPlaceholders", "bindSignalToElement", "newVal", "handleSignalBinding", "type", "start", "end", "val", "evaluated", "evalExpr", "renderEvaluated", "reconcileArrays", "node", "isTemplateObject", "removeChildNodesBetween", "bindEventsInRange", "specialAttr", "n", "coerceAttrValue", "raw", "low", "sp", "num", "__name", "generateSpecialAttrSignals", "instance", "name", "value", "specialAttr", "signal", "setSignal", "useSignal", "cleanAttributeValue", "observeAttrMutations", "obs", "ms", "m", "sig", "initPropsAndObserve", "component", "name", "setup", "_EsorComponent", "setupDeclarativeShadowRoot", "Lifecycle", "globals_default", "initPropsAndObserve", "fn", "withCurrentComponent", "setupResult", "template", "signals", "refs", "cachedTemplate", "bindEventsInRange", "setupSignals", "setupRefs", "__name", "EsorComponent", "useRef", "ref", "__name", "_", "__", "arg", "prop", "value", "useMemo", "fn", "signal", "setSignal", "useSignal", "useEffect", "__name", "STORAGE_PREFIX", "useStore", "__name", "initialState", "options", "storedState", "loadFromStorage", "state", "setState", "useSignal", "subscribers", "useEffect", "handleStorage", "e", "err", "error", "update", "newState", "saveToStorage", "cb", "callback", "key", "data", "value"]
}
