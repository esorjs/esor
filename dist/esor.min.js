var ce=Object.defineProperty;var ae=e=>{throw TypeError(e)};var at=(e,t,n)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var o=(e,t)=>ce(e,"name",{value:t,configurable:!0});var fe=(e,t,n)=>at(e,typeof t!="symbol"?t+"":t,n),ue=(e,t,n)=>t.has(e)||ae("Cannot "+n);var S=(e,t,n)=>(ue(e,t,"read from private field"),n?n.call(e):t.get(e)),z=(e,t,n)=>t.has(e)?ae("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var le=(e,t,n)=>(ue(e,t,"access private method"),n);var T,O,pe,$=class ${constructor(){z(this,O);z(this,T,new Map);$.current=this}add(t,n){return le(this,O,pe).call(this,t).add(n),()=>S(this,T).get(t)?.delete(n)}run(t,n){queueMicrotask(()=>{let r=S(this,T).get(t);if(r?.size)for(let s of r)try{s.call(n)}catch(c){(typeof n._catchError=="function"?n._catchError:console.error)("Error in lifecycle hook:",c)}})}clear(t){t?S(this,T).delete(t):S(this,T).clear()}};T=new WeakMap,O=new WeakSet,pe=o(function(t){return S(this,T).has(t)||S(this,T).set(t,new Set),S(this,T).get(t)},"#hooks"),o($,"Lifecycle"),fe($,"current");var C=$,de=o(()=>C.current||(()=>{throw"Lifecycle not initialized"})(),"getLC"),[me,he,ge,Ee,ve]=["beforeMount","mount","beforeUpdate","update","destroy"].map(e=>t=>de().add(e,t)),ye=o(e=>{let t=e();return t instanceof Function&&de().add("destroy",t)||(()=>{})},"onEffect");var B={currentEffect:null,currentComponent:null,pendingEffects:new Set,batchQueue:new Set,isEffectsFlushing:!1,globalEvents:{handlersByType:new Map,nextId:0}},g=B;function M(e,t){let n=B.currentComponent;B.currentComponent=e;try{return t()}finally{B.currentComponent=n}}o(M,"withCurrentComponent");var A=new WeakMap,ft=1;function be(e,t,n){A.has(e)||A.set(e,new Map);let r=A.get(e),s=ft++;return r.set(s,{type:t,handler:n}),s}o(be,"registerEvent");function Te(e,t){return A.get(e)?.get(t)?.handler}o(Te,"getEventHandler");function tn(e,t){let n=A.get(e);n&&(n.delete(t),n.size===0&&A.delete(e))}o(tn,"clearEventHandler");function xe(e){A.delete(e)}o(xe,"clearAllEventHandlers");var X=o(e=>e==null?"":e.toString().replace(/[&<>'"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","/":"&#x2F;"})[t]),"escapeHTML");function Se(e){return e==null?"":String(e).replace(/^["']|["']$/g,"").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}o(Se,"cleanAttributeValue");var Ae="$:",y="data_esor_event",J="data_esor_bind",K="data_esor_ref",ut=new RegExp(/\s(\w[\w-]*)=(["'])?(?:(?!\2).)*$/),_e=new RegExp(/ref=(["'])?\s*$/),Ne=new RegExp(/(@\w+)=(["'])?\s*$/),lt=new RegExp(/["']\s*$/),dt=new RegExp(/^(script|style|textarea|title)$/i);function we(e,t,n,r){let s=e&&e.charAt(e.length-1)==='"'?'"':"'";return e.replace(t,`${n}=${s}${r}${s}`)}o(we,"replaceAttribute");var pt=o(e=>e.replace(lt,""),"removeQuote"),mt=o(e=>e?.template?.nodeType===Node.DOCUMENT_FRAGMENT_NODE,"isTemplateObject");function ht(e,t,n){let r=g.currentComponent,s=be(r,t,e);return we(n,Ne,`${y}-${t}`,s)}o(ht,"injectEvent");function gt(e,t,n,r){return r.set(n,e),we(t,_e,`${K}-${n}`,n)}o(gt,"injectRef");function Et(e,t,n,r,s){n=pt(n);let c=n&&n.charAt(n.length-1)==='"'?'"':"'",a=typeof e=="function"?e():e,u=dt.test(t)?String(a):X(a),h=`${J}-${r}`;return n+=`${c}${u}${c} ${h}=${c}true${c}`,s.set(r,{type:"attribute",signal:e,attributeName:t,bindAttr:h}),n}o(Et,"injectSignalAttr");function Ce(e,t,n,r,s){let c=`${Ae}${r}`;s.set(r,{type:t?"expression":"text",signal:e,bindAttr:c});let a=t?e():e;return`${n}<!--${c}-->${X(String(a))}<!--//${c}-->`}o(Ce,"injectExpr");function $e(e,t,n,r,s,c){let a=`${Ae}${t}`,u={type:"array",signal:s?()=>(e.__signal()||[]).map(e.__mapFn||(f=>f)):typeof c=="function"?c:()=>e,bindAttr:a};n.set(t,u);let i=(Array.isArray(e)?e:[]).map(k).join("");return`${r}<!--${a}-->${i}<!--//${a}-->`}o($e,"injectArray");function vt(e){let t="";for(let n of e.childNodes)n.nodeType===Node.ELEMENT_NODE&&n.hasAttribute("key")&&(n.setAttribute("data-key",n.getAttribute("key")),n.removeAttribute("key")),t+=n.outerHTML||n.textContent;return t}o(vt,"processTemplateNodes");function k(e){return e==null||e===!1?"":Array.isArray(e)?e.reduce((t,n)=>t+k(n),""):e instanceof SVGElement?e.outerHTML:mt(e)?vt(e.template):e?.type==="template-array"?e.templates.reduce((t,n)=>t+k(n),""):e.toString()}o(k,"processVal");function Me(e,...t){let n="",r=new Map,s=new Map,c=0,a=0;for(let h=0;h<e.length;h++){if(n+=e[h],h>=t.length)continue;let i=t[h],f=e[h].match(ut),l=!!f,p=f?.[1],d=_e.exec(n),m=Ne.exec(n),v=d&&typeof i=="function",w=m&&typeof i=="function",ct=w?m[1].slice(1):null;v?n=gt(i,n,a++,s):w?n=ht(i,ct,n):(i?.signal||typeof i=="function")&&l?n=Et(i,p,n,c++,r):Array.isArray(i)&&i.__signalArray===!0?n=$e(i,c++,r,n,!0):i?.signal?n=Ce(i,!1,n,c++,r):typeof i=="function"?n=Ce(i,!0,n,c++,r):Array.isArray(i)?n=$e(i,c++,r,n,!1,i):i!=null&&(n+=k(i))}let u=document.createElement("template");return u.innerHTML=n.trim(),{template:u.content,signals:r,refs:s}}o(Me,"processTemplate");var G=new WeakMap;function De(e,...t){if(t.length===0&&e.raw){if(G.has(e))return G.get(e);let n=Me(e,...t);return G.set(e,n),n}return Me(e,...t)}o(De,"html");function pn(e,t){return!Object.is(e,t)}o(pn,"valuesChanged");var Re=o(e=>e instanceof DocumentFragment&&e||e?.content?.cloneNode()||document.createDocumentFragment(),"getDocumentFragment");function Ie(e,t){let n=e.nextSibling;for(;n&&n!==t;){let r=n.nextSibling;n.parentNode.removeChild(n),n=r}}o(Ie,"removeChildNodesBetween");var F=new WeakMap;function P(e,t){if(F.has(e)){let a=F.get(e)[t];if(a)return a}let n=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT),r=null,s=null;for(;n.nextNode()&&!s;){let a=n.currentNode;!r&&a.nodeValue===t?r=a:r&&a.nodeValue===`//${t}`&&(s=a)}let c=[r,s];return F.set(e,{...F.get(e),[t]:c}),c}o(P,"findCommentPlaceholders");function Oe(e){let n=HTMLElement.prototype.hasOwnProperty("attachInternals")?e.attachInternals():null;n?.shadowRoot?e.shadowRoot=n.shadowRoot:e.attachShadow({mode:"open"})}o(Oe,"setupDeclarativeShadowRoot");function Be(e,t=[K,y,J]){let n={},r=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT,{acceptNode(c){if(c.hasAttributes()){for(let{name:a}of c.attributes)if(t.some(u=>a.startsWith(u)))return NodeFilter.FILTER_ACCEPT}return NodeFilter.FILTER_SKIP}}),s;for(;s=r.nextNode();)for(let c of s.attributes){let a=t.find(u=>c.name.startsWith(u));a&&(n[a]||(n[a]=[]),n[a].push(c))}return Object.keys(n).length?n:null}o(Be,"findAttributesWithEsorDirectives");var ke=(e=>(e[e.Computed=1]="Computed",e[e.Effect=2]="Effect",e[e.Tracking=4]="Tracking",e[e.Notified=8]="Notified",e[e.Recursed=16]="Recursed",e[e.Dirty=32]="Dirty",e[e.PendingComputed=64]="PendingComputed",e[e.PendingEffect=128]="PendingEffect",e[e.Propagated=224]="Propagated",e))(ke||{});function Fe({updateComputed:e,notifyEffect:t}){let n,r;return{link(i,f){let l=f.depsTail;if(l!==void 0&&l.dep===i)return;let p=l!==void 0?l.nextDep:f.deps;if(p!==void 0&&p.dep===i){f.depsTail=p;return}let d=i.subsTail;if(!(d!==void 0&&d.sub===f&&u(d,f)))return s(i,f,p,l)},propagate(i){let f=32,l=i,p=0;e:do{let d=i.sub,m=d.flags;if(!(m&244)&&(d.flags=m|f|8,!0)||m&16&&!(m&4)&&(d.flags=m&-17|f|8,!0)||!(m&224)&&u(i,d)&&(d.flags=m|16|f|8,d.subs!==void 0)){let v=d.subs;if(v!==void 0){v.nextSub!==void 0?(v.prevSub=l,i=l=v,f=64,++p):(i=v,f=m&2?128:64);continue}m&2&&(r!==void 0?r.depsTail.nextDep=d.deps:n=d,r=d)}else m&(4|f)?!(m&f)&&m&224&&u(i,d)&&(d.flags=m|f):(d.flags=m|f|8,(m&10)===2&&(r!==void 0?r.depsTail.nextDep=d.deps:n=d,r=d));if((i=l.nextSub)!==void 0){l=i,f=p?64:32;continue}for(;p;){--p;let w=l.dep.subs;if(l=w.prevSub,w.prevSub=void 0,(i=l.nextSub)!==void 0){l=i,f=p?64:32;continue e}}break}while(!0)},startTracking(i){i.depsTail=void 0,i.flags=i.flags&-249|4},endTracking(i){let f=i.depsTail;if(f!==void 0){let l=f.nextDep;l!==void 0&&(h(l),f.nextDep=void 0)}else i.deps!==void 0&&(h(i.deps),i.deps=void 0);i.flags&=-5},updateDirtyFlag(i,f){return c(i.deps)?(i.flags=f|32,!0):(i.flags=f&-65,!1)},processComputedUpdate(i,f){if((f&32||(c(i.deps)||(i.flags=f&-65,!1)))&&e(i)){let l=i.subs;l!==void 0&&a(l)}},processPendingInnerEffects(i,f){if(f&128){i.flags=f&-129;let l=i.deps;do{let p=l.dep;"flags"in p&&p.flags&2&&p.flags&224&&t(p),l=l.nextDep}while(l!==void 0)}},processEffectNotifications(){for(;n!==void 0;){let i=n,f=i.depsTail,l=f.nextDep;l!==void 0?(f.nextDep=void 0,n=l.sub):(n=void 0,r=void 0),t(i)||(i.flags&=-9)}}};function s(i,f,l,p){let d={dep:i,sub:f,nextDep:l,prevSub:void 0,nextSub:void 0};if(p===void 0?f.deps=d:p.nextDep=d,i.subs===void 0)i.subs=d;else{let m=i.subsTail;d.prevSub=m,m.nextSub=d}return f.depsTail=d,i.subsTail=d,d}function c(i){let f=0,l;e:do{l=!1;let p=i.dep;if("flags"in p){let d=p.flags;if((d&33)===33){if(e(p)){let m=p.subs;m.nextSub!==void 0&&a(m),l=!0}}else if((d&65)===65){let m=p.subs;m.nextSub!==void 0&&(m.prevSub=i),i=p.deps,++f;continue}}if(!l&&i.nextDep!==void 0){i=i.nextDep;continue}if(f){let d=i.sub;do{--f;let m=d.subs;if(l){if(e(d)){(i=m.prevSub)!==void 0?(m.prevSub=void 0,a(m),d=i.sub):d=m.sub;continue}}else d.flags&=-65;if((i=m.prevSub)!==void 0){if(m.prevSub=void 0,i.nextDep!==void 0){i=i.nextDep;continue e}d=i.sub}else{if((i=m.nextDep)!==void 0)continue e;d=m.sub}l=!1}while(f)}return l}while(!0)}function a(i){do{let f=i.sub,l=f.flags;(l&96)===64&&(f.flags=l|32|8,(l&10)===2&&(r!==void 0?r.depsTail.nextDep=f.deps:n=f,r=f)),i=i.nextSub}while(i!==void 0)}function u(i,f){let l=f.depsTail;if(l!==void 0){let p=f.deps;do{if(p===i)return!0;if(p===l)break;p=p.nextDep}while(p!==void 0)}return!1}function h(i){do{let f=i.dep,l=i.nextDep,p=i.nextSub,d=i.prevSub;if(p!==void 0?p.prevSub=d:f.subsTail=d,d!==void 0?d.nextSub=p:f.subs=p,f.subs===void 0&&"deps"in f){let m=f.flags;m&32||(f.flags=m|32);let v=f.deps;if(v!==void 0){i=v,f.depsTail.nextDep=l,f.deps=void 0,f.depsTail=void 0;continue}}i=l}while(i!==void 0)}}o(Fe,"createReactiveSystem");var{link:D,propagate:yt,updateDirtyFlag:bt,startTracking:V,endTracking:H,processEffectNotifications:Pe,processComputedUpdate:Tt,processPendingInnerEffects:Ve}=Fe({updateComputed(e){let t=E;E=e,V(e);try{let n=e.currentValue,r=e.getter(n);return n!==r?(e.currentValue=r,!0):!1}finally{E=t,H(e)}},notifyEffect(e){return"isScope"in e?wt(e):Nt(e)}}),He=[],Y=0,E,_;function Z(){++Y}o(Z,"startBatch");function ee(){--Y||Pe()}o(ee,"endBatch");function xt(){He.push(E),E=void 0}o(xt,"pauseTracking");function St(){E=He.pop()}o(St,"resumeTracking");function U(e){return $t.bind({currentValue:e,subs:void 0,subsTail:void 0})}o(U,"signal");function R(e){return Ct.bind({currentValue:void 0,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:33,getter:e})}o(R,"computed");function b(e){let t={fn:e,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:2};return E!==void 0?D(t,E):_!==void 0&&D(t,_),Ue(t),We.bind(t)}o(b,"effect");function At(e){let t={deps:void 0,depsTail:void 0,flags:2,isScope:!0};return _t(t,e),We.bind(t)}o(At,"effectScope");function Ue(e){let t=E;E=e,V(e);try{e.fn()}finally{E=t,H(e)}}o(Ue,"runEffect");function _t(e,t){let n=_;_=e,V(e);try{t()}finally{_=n,H(e)}}o(_t,"runEffectScope");function Nt(e){let t=e.flags;return t&32||t&64&&bt(e,t)?Ue(e):Ve(e,e.flags),!0}o(Nt,"notifyEffect");function wt(e){return e.flags&128?(Ve(e,e.flags),!0):!1}o(wt,"notifyEffectScope");function Ct(){let e=this.flags;return e&96&&Tt(this,e),E!==void 0?D(this,E):_!==void 0&&D(this,_),this.currentValue}o(Ct,"computedGetter");function $t(...e){if(e.length){if(this.currentValue!==(this.currentValue=e[0])){let t=this.subs;t!==void 0&&(yt(t),Y||Pe())}}else return E!==void 0&&D(this,E),this.currentValue}o($t,"signalGetterSetter");function We(){V(this),H(this)}o(We,"effectStop");function W(e,t){return e?.__signalArray===!0?e:new Proxy(e,{get(n,r,s){let c=Reflect.get(n,r,s);return typeof c!="function"?c:function(...a){let u=c.apply(n,a);return Array.isArray(u)?(u.__signalArray=!0,u.__signal=t,u.__mapFn=a[0],W(u,t)):u}}})}o(W,"wrapArray");function x(e){if(Array.isArray(e)){let t=U(e),n=W(e,()=>t());return n.__signalArray=!0,o((...s)=>{if(s.length>0){let c=s[0];return t(c),n=W(c,()=>t()),n.__signalArray=!0,n}return n},"func")}return U(e)}o(x,"signal");function I(e){if(g.batchQueue)return e();g.batchQueue=new Set,Z();try{e(),Mt()}finally{ee(),g.batchQueue=null}}o(I,"batch");function Mt(){let e=g.batchQueue;g.batchQueue=null;for(let t of e)t();g.batchQueue.forEach(t=>t()),g.batchQueue.clear()}o(Mt,"flushBatch");function ze(e,t,n=[],r=[],s){let c=[...n],a=[...r],u=t.parentNode,h=Dt(e,t),i=Ot(a,h,c);c.length===a.length&&c.every((f,l)=>f===a[l])||I(()=>{Ft(u,h,i,t),Xe(s,e,t),e.__oldItems=[...a]})}o(ze,"reconcileArrays");var Dt=o((e,t)=>{let n=[];for(let r=e.nextSibling;r&&r!==t;r=r.nextSibling)n.push(r);return n},"collectNodes"),j=o(e=>e&&e.nodeType===Node.ELEMENT_NODE,"isValidDOMNode"),Rt=o(e=>j(e)?e.getAttribute("data-key"):null,"getNodeKey");function It(e,t,n,r){if(!e||!t||!n?.template||!r?.template)return!1;e.firstChild?.nodeType===3&&e.normalize(),t.firstChild?.nodeType===3&&t.normalize();let s=je(e),c=je(t);if(s.length!==c.length)return!1;let a=!1;for(let u=0,h=s.length;u<h;u++)s[u].textContent!==c[u].textContent&&(s[u].textContent=c[u].textContent,a=!0);return a}o(It,"updateNodeContent");var je=o(e=>{let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),r;for(;r=n.nextNode();)t.push(r);return t},"getTextNodes");function Ot(e,t,n){let r=new Map,s=new Map,c=[];return t.forEach(a=>{let u=Rt(a);u&&r.set(u,a)}),n.forEach((a,u)=>s.set(qe(a,u),a)),e.forEach((a,u)=>c[u]=qe(a,u)),e.map((a,u)=>{let h=c[u],i=r.get(h),f=s.get(h);if(i?.nodeType===1){if(!f||Bt(f,a)){let l=Qe(a,h);return It(i,l,f,a)?(kt(i,l),i):l}return i}return Qe(a,h)})}o(Ot,"createOrReuseNodes");function Bt(e,t){if(!e||!t)return!0;if(e?.template&&t?.template){let n=Le(e),r=Le(t);return!L(n,r)}return!L(e,t)}o(Bt,"hasChanged");function Le(e){let{template:t}=e;if(!t)return null;let n=[],r=t.cloneNode(!0),s=document.createTreeWalker(r,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode(a){return a.nodeType===3?a.textContent.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}}),c;for(;c=s.nextNode();)if(c.nodeType===3)n.push(c.textContent);else for(let a=0,u=c.attributes.length;a<u;a++){let h=c.attributes[a].value;h.includes("${")&&n.push(h)}return n}o(Le,"extractDynamicValues");function L(e,t){if(e===t)return!0;if(!e||!t||typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((n,r)=>L(n,t[r]));if(typeof e=="object"){let n=Object.keys(e),r=Object.keys(t);return n.length!==r.length?!1:n.every(s=>L(e[s],t[s]))}return String(e)===String(t)}o(L,"areValuesEqual");function kt(e,t){if(!(!j(e)||!j(t)))for(let n=e.attributes.length-1;n>=0;n--){let r=e.attributes[n];r.name.startsWith(y)&&t.setAttribute(r.name,r.value)}}o(kt,"copyEventAttributes");function qe(e,t){if(e&&typeof e=="object"){if("key"in e)return`key-${e.key}`;if(e.id)return`item-${e.id}`;if(e.template){let n=e.template.firstElementChild;return n&&n.hasAttribute("key")?n.getAttribute("key"):`template-${t}`}try{return`item-${t}-${JSON.stringify(e)}`}catch{return`item-${t}`}}return`item-${t}-${String(e)}`}o(qe,"getItemKey");function Qe(e,t){let n;return e?.template?n=e.template.cloneNode(!0).firstElementChild||document.createElement("div"):(n=document.createElement("div"),n.textContent=String(e)),j(n)&&n.setAttribute("data-key",t),n}o(Qe,"createNode");var Cn=o((e,t,n)=>e.insertBefore(t,n),"moveBefore");function Ft(e,t,n,r){let s=0,c=t.length,a=0,u=n.length,h=c>0?t[c-1].nextSibling:r,i=null;if(!c){for(let f=0;f<u;f++)e.insertBefore(n[f],h);return}if(!u){for(;s<c;)e.removeChild(t[s++]);return}for(;s<c||a<u;){if(t[s]===n[a]){s++,a++;continue}for(;t[c-1]===n[u-1];)c--,u--;if(s===c){let f=u<n.length?a?n[a-1].nextSibling:n[u-a]:h;for(;a<u;)e.insertBefore(n[a++],f)}else if(a===u)for(;s<c;)(!i||!i.has(t[s]))&&e.removeChild(t[s]),s++;else if(t[s]===n[u-1]&&n[a]===t[c-1]){let f=t[--c].nextSibling;e.insertBefore(n[a++],t[s++].nextSibling),e.insertBefore(n[--u],f),t[c]=n[u]}else{if(!i){i=new Map;for(let l=a;l<u;l++)i.set(n[l],l)}let f=i.get(t[s]);if(f==null)e.removeChild(t[s++]);else if(a<f&&f<u){let l=1;for(;s+l<c&&f+l<u&&t[s+l]===n[f+l];)l++;if(l>f-a){let p=t[s];for(;a<f;)e.insertBefore(n[a++],p)}else e.replaceChild(n[a++],t[s++])}else s++}}}o(Ft,"ddiff");function Ge(e,t){let n=e?.shadowRoot;if(!n)return;let r=new Set;for(let s of t){let c=s.name.replace(`${y}-`,"");c&&r.add(c)}for(let s of r){let c=o(a=>{let u=a.target;if(u.hasAttribute(`${y}-${s}`)){let h=Number(u.getAttribute(`${y}-${s}`)),i=Te(e,h);typeof i=="function"&&M(e,()=>{i.call(e,a)})}},"listener");n.addEventListener(s,c,{passive:!1,capture:!0}),e._eventHandlers=e._eventHandlers||new Map,e._eventHandlers.set(s,c)}}o(Ge,"setupEventDelegation");function Je(e,t){if(!(!e||!t))for(let n of e){let r=n.ownerElement;if(!r)continue;let s=Number(n.value);r.removeAttribute(n.name);let c=t.get(s);typeof c=="function"&&c(r)}}o(Je,"setupRefs");function q(e,t,n){let r=b(()=>{if(!e._isUpdating){e._isUpdating=!0;try{n(t())}finally{e._isUpdating=!1}}});e._cleanup.add(r)}o(q,"bindSignalToElement");function Ke(e,t){if(!(!t||t.size===0))for(let{type:n,signal:r,bindAttr:s,attributeName:c}of t.values())switch(n){case"attribute":Pt(e,r,s,c);break;case"array":Vt(e,r,s);break;case"text":case"expression":Ye({host:e,type:n,signal:r,bindAttr:s});break}}o(Ke,"setupSignals");function Pt(e,t,n,r){let s=e.shadowRoot.querySelector(`[${n}]`);s&&(s.removeAttribute(n),q(e,t,c=>{let a=String(c);s.getAttribute(r)!==a&&s.setAttribute(r,a)}))}o(Pt,"handleAttributeSignal");function Vt(e,t,n){let[r,s]=P(e.shadowRoot,n);!r||!s||q(e,t,c=>{let a=r.__oldItems||[],u=Array.isArray(c)?c:[];ze(r,s,a,u,e)})}o(Vt,"handleArraySignal");function Xe(e,t,n){let{shadowRoot:r}=e,s=Ut(r,t,n);Ht(e,s)}o(Xe,"bindEventsInRange");function Ht(e,t){for(let n of t)for(let r of Array.from(n.attributes)){if(!r.name.startsWith(`${y}`))continue;let s=r.name.replace(y,""),c=parseInt(r.value,10),a=g.globalEvents.handlersByType.get(s)?.get(c);typeof a=="function"&&(n.addEventListener(s,(...u)=>M(e,()=>a.call(e,...u))),n.removeAttribute(r.name))}}o(Ht,"bindEvents");function Ut(e,t,n){let r=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);if(!t&&!n){for(;s.nextNode();)r.push(s.currentNode);return r}let c=t?.nextSibling||e.firstChild;if(!c)return r;s.currentNode=c;do{if(s.currentNode===n)break;r.push(s.currentNode)}while(s.nextNode());return r}o(Ut,"getElementsInRange");var te=new Map;function Ze(e,t){let n=Re(t);return te.has(e)||te.set(e,n.cloneNode(!0)),te.get(e).cloneNode(!0)}o(Ze,"cachedTemplate");var ne=new WeakMap;function Wt(e){if(ne.has(e))return ne.get(e);try{let t=e()??null;return ne.set(e,t),t}catch{return null}}o(Wt,"evalExpr");function jt(e,t,n,r){let s=t.nextSibling;if(s&&s.nodeType===Node.TEXT_NODE)s.textContent=String(r);else{Ie(t,n);let c=document.createTextNode(String(r));n.parentNode.insertBefore(c,n)}}o(jt,"renderEvaluated");function Lt(e,{signal:t,bindAttr:n,renderer:r}){let[s,c]=P(e.shadowRoot,n);!s||!c||q(e,t,a=>{r(s,c,a)})}o(Lt,"bindPlaceholderSignal");function Ye({host:e,type:t,signal:n,bindAttr:r}){Lt(e,{signal:n,bindAttr:r,renderer:o((s,c,a)=>{let u=t==="expression"?Wt(()=>a):a;u!=null&&jt(e,s,c,u)},"renderer")})}o(Ye,"handleSignalBinding");var re=o(e=>e&&!/^(data_esor_|@|ref|key$)/.test(e)&&/^[a-z][\w\-_:]*$/i.test(e),"specialAttr");var Q;function qt(e){return Q||(Q=document.createElement("textarea")),Q.innerHTML=e,Q.value}o(qt,"decodeHTMLEntities");function et(e){if(typeof e!="string")return e;e.indexOf("&")!==-1&&(e=qt(e));let t=e.trim();if(!t)return t;let n=t.toLowerCase(),r={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0};if(n in r)return r[n];let s=Number(t);if(!Number.isNaN(s))return s;try{return JSON.parse(t)}catch{return t}}o(et,"coerceAttrValue");function Qt(e){for(let{name:t,value:n}of e.attributes){if(!re(t))continue;let r=et(Se(n));e._props[t]=x(r)}}o(Qt,"generateSpecialAttrSignals");function zt(e){let t=o(r=>{for(let{attributeName:s}of r){if(!re(s))continue;let c=e._props[s];c&&c(et(e.getAttribute(s)))}},"handler"),n=new MutationObserver(t);n.observe(e,{attributes:!0}),e._cleanup.add(()=>n.disconnect())}o(zt,"observeAttrMutations");function tt(e){Qt(e),zt(e)}o(tt,"initPropsAndObserve");function nt(e,t){let r=class r extends HTMLElement{constructor(){super(),Oe(this),this._initEsorComponent(this),this._render()}_initEsorComponent(c){Object.assign(c,{_cleanup:new Set,_isUpdating:!1,_props:{},_eventIds:[],lifecycle:new C}),g.currentComponent=c,tt(c),c.lifecycle.run("beforeMount",c)}connectedCallback(){this.lifecycle.run("mount",this)}disconnectedCallback(){this.lifecycle.run("destroy",this),this._cleanup.forEach(c=>c()),this._cleanup.clear(),xe(this)}_render(){M(this,()=>{this.lifecycle.run("beforeUpdate",this);let c=t.call(this,this._props),{template:a,signals:u,refs:h}=typeof c=="function"?c():c||{};this.shadowRoot.hasChildNodes()||this.shadowRoot.appendChild(Ze(e,a));let i=Be(this.shadowRoot);i&&(i.data_esor_ref&&Je(i.data_esor_ref,h),i.data_esor_event&&Ge(this,i.data_esor_event)),Ke(this,u),this.lifecycle.run("update",this)})}};o(r,"EsorComponent");let n=r;return customElements.define(e,n),n}o(nt,"component");function rt(e=null){let t=e,n=o(r=>r!==void 0?t=r:t,"refFn");return Object.defineProperty(n,"current",{get:o(()=>t,"get"),set:o(r=>t=r,"set"),enumerable:!0}),n}o(rt,"ref");function ot(e,t=[]){let n=x(e());return b(()=>(n(e()),t)),n}o(ot,"memo");var oe={info:{color:"#0066cc",icon:"\u2139\uFE0F"},warn:{color:"#FFA500",icon:"\u26A0\uFE0F"},error:{color:"#FF0000",icon:"\u{1F6AB}"}},ie=o((e="info",t="",...n)=>{oe[e]||(e="info");let r=e.charAt(0).toUpperCase()+e.slice(1);console.groupCollapsed(`%c[ESOR ${oe[e].icon}${r}] ${t}`,`color: ${oe[e].color}; font-weight: bold;`),console[e]({message:t,component:g.currentComponent?.constructor?.name||"Unknown",time:new Date().toISOString(),data:n.length?n:void 0}),console[e==="error"?"trace":"debug"](),console.groupEnd()},"log"),ur=o((...e)=>ie("info",...e),"info"),lr=o((...e)=>ie("warn",...e),"warn"),N=o((...e)=>ie("error",...e),"error");function it(e,t){let n=g.currentComponent;if(!n)return N("useEmit must be used within a component"),null;let r=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0});return r.__esor={name:e,detail:t,receivedBy:[],timestamp:Date.now()},n.dispatchEvent(r),r}o(it,"useEmit");var se="esor-store:",st=o((e,t={})=>{let n=t.persist?Xt(t.persist):null,r=x(n||e),s=new Set;return t.persist&&b(()=>{let a=o(u=>{if(u.key===se+t.persist)try{r.set(JSON.parse(u.newValue))}catch(h){N(`Failed to sync state: ${h.message}`)}},"handleStorage");return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)}),[r,{setState(a){let u=typeof a=="function"?a(r()):a;r.set(u),t.persist&&Gt(t.persist,u),s.forEach(h=>h(u))},subscribe(a){return s.add(a),()=>s.delete(a)},getState:r}]},"store");function Xt(e){try{let t=localStorage.getItem(se+e);return t?JSON.parse(t):null}catch(t){return N(`Failed to load state: ${t.message}`),null}}o(Xt,"loadFromStorage");function Gt(e,t){try{localStorage.setItem(se+e,JSON.stringify(t))}catch(n){N(`Failed to save state: ${n.message}`)}}o(Gt,"saveToStorage");export{I as batch,me as beforeMount,ge as beforeUpdate,nt as component,R as computed,b as effect,De as html,ot as memo,ve as onDestroy,ye as onEffect,he as onMount,Ee as onUpdate,rt as ref,x as signal,st as store,it as useEmit};
//# sourceMappingURL=esor.min.js.map
