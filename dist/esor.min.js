var j=Object.defineProperty;var B=e=>{throw TypeError(e)};var re=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var r=(e,t)=>j(e,"name",{value:t,configurable:!0});var N=(e,t,n)=>re(e,typeof t!="symbol"?t+"":t,n),U=(e,t,n)=>t.has(e)||B("Cannot "+n);var M=(e,t,n)=>(U(e,t,"read from private field"),n?n.call(e):t.get(e)),T=(e,t,n)=>t.has(e)?B("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),w=(e,t,n,o)=>(U(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n);var d=null,ie=0,y=r(e=>{let t=e,n=new Set;return r(i=>{if(i===void 0)return d&&n.add(d),t;let u=typeof i=="function"?i(t):i;return Object.is(u,t)||(t=u,n.forEach(s=>s())),t},"getterSetter")},"signal"),m=r(e=>{let t=!1,n=r(()=>{if(t)return;t=!0;let o=d;d=n;try{e()}finally{d=o,t=!1}},"reactive");return n(),()=>subs.delete(n)},"effect"),S=r(e=>{let t=y();return m(()=>t(e())),()=>t()},"computed"),O=r(e=>{let t=d;d={id:ie++};try{return e()}finally{d=t}},"batch");function C(e,t,n=null){let o=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0});return n&&n.dispatchEvent(o),o}r(C,"emit");function $(e=null){let t=e;return n=>n!==void 0?t=n:t}r($,"ref");function D(e){return e&&(e.__nodeGroups=!0),e}r(D,"markNode");function x(e){return k(e,D)}r(x,"markedFragment");function k(e,t=null,n=null){let o=document.createDocumentFragment();if(!e?.length)return o;for(let i of e)i&&(i=typeof t=="function"?t(i,o):i,Array.isArray(i)?o.appendChild(k(i,t)):o.appendChild(i));return n&&o.childNodes.length&&n.appendChild(o),o}r(k,"createFragment");function V(e,t){if(!e||!t||!t.parentNode)return;let n=t.parentNode,o=r(c=>{for(let f of c)!f||f.parentNode!==n||(f._cleanup&&typeof f._cleanup=="function"&&f._cleanup(),n.removeChild(f))},"removeNodes"),i=r((c,f)=>c.length!==f.length||c.some((h,g)=>!h.isEqualNode(f[g])),"nodesChanged"),u=t.__nodeGroups||[],s=new Map(u.map(c=>[c.key,c])),l=e.map((c,f)=>{let h=Array.isArray(c)?c.filter(Boolean):[c];return{key:h.find(oe=>oe?.getAttribute?.("key")!=null)?.getAttribute("key")||`__key_${f}`,nodes:h}}),_=new Map(l.map(c=>[c.key,c]));for(let c of u)!_.has(c.key)&&o(c.nodes);let p=t;for(let c of l){let f=s.get(c.key);if(f)if(i(f.nodes,c.nodes))o(f.nodes),n.insertBefore(x(c.nodes),p.nextSibling);else{let h=p.nextSibling;if(f.nodes[0]!==h){let g=document.createDocumentFragment();for(let W of f.nodes)g.appendChild(W);n.insertBefore(g,h)}c.nodes=f.nodes}else n.insertBefore(x(c.nodes),p.nextSibling);p=c.nodes[c.nodes.length-1]||p}t.__nodeGroups=l}r(V,"reconcile");var F=new WeakMap,E="\uFEFF";function H(e){let t=document.createElement("template");return t.innerHTML=e,t}r(H,"createTemplate");var G=r((e,t,n)=>{if(t)if(e.removeAttribute(t),t==="ref")typeof n=="function"?n(e):n&&(n.current=e);else if(t[0]=="o"&&t[1]=="n"&&typeof n=="function"){let o=t.slice(2).toLowerCase();e.addEventListener(o,n),e._cleanup=()=>e.removeEventListener(o,n)}else t==="style"&&typeof n=="object"?m(()=>Object.assign(e.style,n)):typeof n=="function"?m(()=>P(e,t,n())):P(e,t,n);else ce(e,n)},"render");function P(e,t,n){t==="value"||t==="checked"?e[t]=n:n===!1||n===null||n===void 0?e.removeAttribute(t):e.setAttribute(t,n)}r(P,"setAttribute");function ce(e,t){let n=r(o=>{if(typeof o=="boolean"&&(o=""),Array.isArray(o))V(o,e);else{let i=document.createTextNode(String(o??""));D(i),se(e,[i])}},"updateContent");typeof t=="function"?m(()=>n(t())):n(t)}r(ce,"setContent");function se(e,t){let n=e.parentNode,o=e.nextSibling;for(;o&&o.__nodeGroups;)o._cleanup&&o._cleanup(),n.removeChild(o),o=e.nextSibling;t?.length&&fe(x(t),n,e.nextSibling)}r(se,"replaceNodes");function fe(e,t,n=null){!e||!t||(n&&n.parentNode===t?t.insertBefore(e,n):t.appendChild(e))}r(fe,"insertFragment");function ue(e,t){let n=[],o=document.createTreeWalker(e.content,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);for(;o.nextNode();)n.push(o.currentNode);let i=0;for(let u=0;u<n.length;u++){let s=n[u];if(s.nodeType===Node.ELEMENT_NODE&&s.attributes.length)for(let l of Array.from(s.attributes))l.value===E&&G(s,l.name,t[i++]);else if(s.nodeType===Node.TEXT_NODE&&s.nodeValue.includes(E))if(s.nodeValue===E){let l=document.createComment("");s.parentNode.replaceChild(l,s),G(l,null,t[i++])}else{let l=H(s.nodeValue.replaceAll(E,"<!>")),_=Array.from(l.content.childNodes);for(let p=0;p<_.length;p++){let c=_[p];c.nodeType===Node.COMMENT_NODE&&G(c,null,t[i++])}s.parentNode.replaceChild(l.content,s)}}}r(ue,"processTemplate");function X(e,t=null){let n=H(e);return typeof t=="function"&&t(n),[...n.content.childNodes]}r(X,"templateToNodes");function q(e,...t){if(e.length===1)return X(e[0]);if(!t.length)return X(e.join(""));let n=e.join(E),o=H(n);return ue(o,t),[...o.content.childNodes]}r(q,"build");function L(e,...t){return F.has(e)?q(F.get(e),...t):(F.set(e,e),q(e,...t))}r(L,"html");function z(e,t,n="error"){let o=n==="warn"?console.warn:console.error,i=t instanceof Error?t:new Error(String(t));return o(`[Esor Error] ${e}:`,i.message),i}r(z,"handleError");var a=null,I=r(e=>a=e,"createLifecycle"),b=r((e,t)=>{if(!a){z("lifecycle","Hook called outside component setup");return}a._lifecycles[e]||(a._lifecycles[e]=[]),a._lifecycles[e].push(t)},"addHook"),A=r(e=>{if(a?._lifecycles?.[e])for(let t of a._lifecycles[e])queueMicrotask(()=>t.call(a),"lifecycle.runHook")},"runHook"),J=r(e=>{let t=e();return typeof t=="function"?b("destroy",t):()=>{}},"onEffect"),Q=r(e=>b("beforeMount",e),"beforeMount"),Y=r(e=>b("mount",e),"onMount"),Z=r(e=>b("beforeUpdate",e),"beforeUpdate"),K=r(e=>b("update",e),"onUpdate"),R=r(e=>b("destroy",e),"onDestroy");function ee(e){for(let n of e.attributes){let{name:o,value:i}=n;o.startsWith("on")||o.startsWith("ref")||(e.props[o]=y(v(i)))}let t=new MutationObserver(n=>{for(let o of n){let i=o.attributeName;if(!i||i.startsWith("on")||i.startsWith("ref"))continue;let u=e.props[i];u&&u(v(e.getAttribute(i)))}});t.observe(e,{attributes:!0}),e._cleanup.push(()=>t.disconnect())}r(ee,"initPropsAndObserve");function v(e){if(e==null)return"";if(e==="true")return!0;if(e==="false")return!1;if(/^-?\d+(\.\d+)?$/.test(e))return Number(e);if(/^[{[]/.test(e))try{return JSON.parse(e)}catch{return e}return e}r(v,"parseAttributeValue");function te(e){e&&(e.emit=(t,n)=>C(t,n,e))}r(te,"initDispatch");var le=/^[a-z][a-z0-9-]*$/,pe="open",de=r((e,t={})=>{var n,o,i;return i=class extends HTMLElement{constructor(){super();T(this,n,this.attachShadow({mode:t.mode||pe}));T(this,o,!1);N(this,"props",Object.create(null));N(this,"_lifecycles",{beforeMount:[],mount:[],beforeUpdate:[],update:[],destroy:[]});N(this,"_cleanup",[]);Promise.resolve().then(()=>{I(this),te(this),ee(this);let s=e?.call(this,this.props);k(s||[s],null,M(this,n)),A("beforeMount")})}connectedCallback(){M(this,o)||(w(this,o,!0),A("mount"))}disconnectedCallback(){A("destroy"),this._cleanup.forEach(s=>s()),this._cleanup=[],w(this,o,!1)}},n=new WeakMap,o=new WeakMap,i},"BaseComponent"),ne=r((e,t,n={})=>{if(typeof customElements<"u"){if(!le.test(e))return error("component",`Invalid tag name: ${e}`,"error");if(customElements.get(e))return error("component",`${e} ya registrado`,"warn");customElements.define(e,de(t,n))}},"component");export{O as batch,Q as beforeMount,Z as beforeUpdate,ne as component,S as computed,m as effect,C as emit,L as html,R as onDestroy,J as onEffect,Y as onMount,K as onUpdate,$ as ref,y as signal};
//# sourceMappingURL=esor.min.js.map
