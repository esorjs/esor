var oe=Object.defineProperty;var re=e=>{throw TypeError(e)};var tt=(e,t,n)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var i=(e,t)=>oe(e,"name",{value:t,configurable:!0});var ie=(e,t,n)=>tt(e,typeof t!="symbol"?t+"":t,n),se=(e,t,n)=>t.has(e)||re("Cannot "+n);var S=(e,t,n)=>(se(e,t,"read from private field"),n?n.call(e):t.get(e)),q=(e,t,n)=>t.has(e)?re("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var ce=(e,t,n)=>(se(e,t,"access private method"),n);var E,I,fe,C=class C{constructor(){q(this,I);q(this,E,new Map);C.current=this}add(t,n){return ce(this,I,fe).call(this,t).add(n),()=>S(this,E).get(t)?.delete(n)}run(t,n){queueMicrotask(()=>{let o=S(this,E).get(t);if(o?.size)for(let s of o)try{s.call(n)}catch(a){(typeof n._catchError=="function"?n._catchError:console.error)("Error in lifecycle hook:",a)}})}clear(t){t?S(this,E).delete(t):S(this,E).clear()}};E=new WeakMap,I=new WeakSet,fe=i(function(t){return S(this,E).has(t)||S(this,E).set(t,new Set),S(this,E).get(t)},"#hooks"),i(C,"Lifecycle"),ie(C,"current");var M=C,ae=i(()=>M.current||(()=>{throw"Lifecycle not initialized"})(),"getLC"),[ue,le,de,pe,ge]=["beforeMount","mount","beforeUpdate","update","destroy"].map(e=>t=>ae().add(e,t)),me=i(e=>{let t=e();return t instanceof Function&&ae().add("destroy",t)||(()=>{})},"onEffect");var O={currentEffect:null,currentComponent:null,pendingEffects:new Set,batchQueue:new Set,isEffectsFlushing:!1,globalEvents:{handlersByType:new Map,nextId:0}},h=O;function B(e,t){let n=O.currentComponent;O.currentComponent=e;try{return t()}finally{O.currentComponent=n}}i(B,"withCurrentComponent");var T=new WeakMap,nt=1;function he(e,t,n){T.has(e)||T.set(e,new Map);let o=T.get(e),s=nt++;return o.set(s,{type:t,handler:n}),s}i(he,"registerEvent");function ve(e,t){return T.get(e)?.get(t)?.handler}i(ve,"getEventHandler");function qt(e,t){let n=T.get(e);n&&(n.delete(t),n.size===0&&T.delete(e))}i(qt,"clearEventHandler");function be(e){T.delete(e)}i(be,"clearAllEventHandlers");var ye=i(e=>e==null?"":e.toString().replace(/[&<>'"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","/":"&#x2F;"})[t]),"escapeHTML");function Ee(e){return e==null?"":String(e).replace(/^["']|["']$/g,"").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}i(Ee,"cleanAttributeValue");var xe="$:",_="data_esor_event",L="data_esor_bind",Q="data_esor_ref",ot=new RegExp(/\s(\w[\w-]*)=(["'])?(?:(?!\2).)*$/),Se=new RegExp(/ref=(["'])?\s*$/),Te=new RegExp(/(@\w+)=(["'])?\s*$/),rt=new RegExp(/["']\s*$/),it=new RegExp(/^(script|style|textarea|title)$/i);function _e(e,t,n,o){let s=e&&e.charAt(e.length-1)==='"'?'"':"'";return e.replace(t,`${n}=${s}${o}${s}`)}i(_e,"replaceAttribute");var st=i(e=>e.replace(rt,""),"removeQuote"),ct=i(e=>e?.template?.nodeType===Node.DOCUMENT_FRAGMENT_NODE,"isTemplateObject");function at(e,t,n){let o=h.currentComponent,s=he(o,t,e);return _e(n,Te,`${_}-${t}`,s)}i(at,"injectEvent");function ft(e,t,n,o){return o.set(n,e),_e(t,Se,`${Q}-${n}`,n)}i(ft,"injectRef");function ut(e,t,n,o,s){n=st(n);let a=n&&n.charAt(n.length-1)==='"'?'"':"'",c=typeof e=="function"?e():e,u=it.test(t)?String(c):c,m=`${L}-${o}`;return n+=`${a}${u}${a} ${m}=${a}true${a}`,s.set(o,{type:"attribute",signal:e,attributeName:t,bindAttr:m}),n}i(ut,"injectSignalAttr");function Ae(e,t,n,o,s){let a=`${xe}${o}`;s.set(o,{type:t?"expression":"text",signal:e,bindAttr:a});let c=t?e():e;return`${n}<!--${a}-->${ye(String(c))}<!--//${a}-->`}i(Ae,"injectExpr");function we(e,t,n,o,s,a){let c=`${xe}${t}`,u={type:"array",signal:s?()=>(e.__signal()||[]).map(e.__mapFn||(f=>f)):typeof a=="function"?a:()=>e,bindAttr:c};n.set(t,u);let r=(Array.isArray(e)?e:[]).map(H).join("");return`${o}<!--${c}-->${r}<!--//${c}-->`}i(we,"injectArray");function lt(e){let t="";for(let n of e.childNodes)n.nodeType===Node.ELEMENT_NODE&&n.hasAttribute("key")&&(n.setAttribute("data-key",n.getAttribute("key")),n.removeAttribute("key")),t+=n.outerHTML||n.textContent;return t}i(lt,"processTemplateNodes");function H(e){return e==null||e===!1?"":Array.isArray(e)?e.reduce((t,n)=>t+H(n),""):e instanceof SVGElement?e.outerHTML:ct(e)?lt(e.template):e?.type==="template-array"?e.templates.reduce((t,n)=>t+H(n),""):e.toString()}i(H,"processVal");function Ne(e,...t){let n="",o=new Map,s=new Map,a=0,c=0;for(let m=0;m<e.length;m++){if(n+=e[m],m>=t.length)continue;let r=t[m],f=e[m].match(ot),l=!!f,p=f?.[1],d=Se.exec(n),g=Te.exec(n),b=d&&typeof r=="function",N=g&&typeof r=="function",et=N?g[1].slice(1):null;b?n=ft(r,n,c++,s):N?n=at(r,et,n):(r?.signal||typeof r=="function")&&l?n=ut(r,p,n,a++,o):Array.isArray(r)&&r.__signalArray===!0?n=we(r,a++,o,n,!0):r?.signal?n=Ae(r,!1,n,a++,o):typeof r=="function"?n=Ae(r,!0,n,a++,o):Array.isArray(r)?n=we(r,a++,o,n,!1,r):r!=null&&(n+=H(r))}let u=document.createElement("template");return u.innerHTML=n.trim(),{template:u.content,signals:o,refs:s}}i(Ne,"processTemplate");var W=new Map;function Me(e,...t){if(t.length===0&&e.raw){if(W.has(e))return W.get(e);let n=Ne(e);return W.set(e,n),n}return Ne(e,...t)}i(Me,"html");function Ce(e,t){let n=e.nextSibling;for(;n&&n!==t;){let o=n.nextSibling;n.parentNode.removeChild(n),n=o}}i(Ce,"removeChildNodesBetween");var P=new WeakMap;function z(e,t){if(P.has(e)){let c=P.get(e)[t];if(c)return c}let n=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT),o=null,s=null;for(;n.nextNode()&&!s;){let c=n.currentNode;!o&&c.nodeValue===t?o=c:o&&c.nodeValue===`//${t}`&&(s=c)}let a=[o,s];return P.set(e,{...P.get(e),[t]:a}),a}i(z,"findCommentPlaceholders");function De(e){let n=HTMLElement.prototype.hasOwnProperty("attachInternals")?e.attachInternals():null;n?.shadowRoot?e.shadowRoot=n.shadowRoot:e.attachShadow({mode:"open"})}i(De,"setupDeclarativeShadowRoot");function Re(e,t=[Q,_,L]){let n={},o=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT,{acceptNode(a){if(a.hasAttributes()){for(let{name:c}of a.attributes)if(t.some(u=>c.startsWith(u)))return NodeFilter.FILTER_ACCEPT}return NodeFilter.FILTER_SKIP}}),s;for(;s=o.nextNode();)for(let a of s.attributes){let c=t.find(u=>a.name.startsWith(u));c&&(n[c]||(n[c]=[]),n[c].push(a))}return Object.keys(n).length?n:null}i(Re,"findAttributesWithEsorDirectives");var $e=(e=>(e[e.Computed=1]="Computed",e[e.Effect=2]="Effect",e[e.Tracking=4]="Tracking",e[e.Notified=8]="Notified",e[e.Recursed=16]="Recursed",e[e.Dirty=32]="Dirty",e[e.PendingComputed=64]="PendingComputed",e[e.PendingEffect=128]="PendingEffect",e[e.Propagated=224]="Propagated",e))($e||{});function Ie({updateComputed:e,notifyEffect:t}){let n,o;return{link(r,f){let l=f.depsTail;if(l!==void 0&&l.dep===r)return;let p=l!==void 0?l.nextDep:f.deps;if(p!==void 0&&p.dep===r){f.depsTail=p;return}let d=r.subsTail;if(!(d!==void 0&&d.sub===f&&u(d,f)))return s(r,f,p,l)},propagate(r){let f=32,l=r,p=0;e:do{let d=r.sub,g=d.flags;if(!(g&244)&&(d.flags=g|f|8,!0)||g&16&&!(g&4)&&(d.flags=g&-17|f|8,!0)||!(g&224)&&u(r,d)&&(d.flags=g|16|f|8,d.subs!==void 0)){let b=d.subs;if(b!==void 0){b.nextSub!==void 0?(b.prevSub=l,r=l=b,f=64,++p):(r=b,f=g&2?128:64);continue}g&2&&(o!==void 0?o.depsTail.nextDep=d.deps:n=d,o=d)}else g&(4|f)?!(g&f)&&g&224&&u(r,d)&&(d.flags=g|f):(d.flags=g|f|8,(g&10)===2&&(o!==void 0?o.depsTail.nextDep=d.deps:n=d,o=d));if((r=l.nextSub)!==void 0){l=r,f=p?64:32;continue}for(;p;){--p;let N=l.dep.subs;if(l=N.prevSub,N.prevSub=void 0,(r=l.nextSub)!==void 0){l=r,f=p?64:32;continue e}}break}while(!0)},startTracking(r){r.depsTail=void 0,r.flags=r.flags&-249|4},endTracking(r){let f=r.depsTail;if(f!==void 0){let l=f.nextDep;l!==void 0&&(m(l),f.nextDep=void 0)}else r.deps!==void 0&&(m(r.deps),r.deps=void 0);r.flags&=-5},updateDirtyFlag(r,f){return a(r.deps)?(r.flags=f|32,!0):(r.flags=f&-65,!1)},processComputedUpdate(r,f){if((f&32||(a(r.deps)||(r.flags=f&-65,!1)))&&e(r)){let l=r.subs;l!==void 0&&c(l)}},processPendingInnerEffects(r,f){if(f&128){r.flags=f&-129;let l=r.deps;do{let p=l.dep;"flags"in p&&p.flags&2&&p.flags&224&&t(p),l=l.nextDep}while(l!==void 0)}},processEffectNotifications(){for(;n!==void 0;){let r=n,f=r.depsTail,l=f.nextDep;l!==void 0?(f.nextDep=void 0,n=l.sub):(n=void 0,o=void 0),t(r)||(r.flags&=-9)}}};function s(r,f,l,p){let d={dep:r,sub:f,nextDep:l,prevSub:void 0,nextSub:void 0};if(p===void 0?f.deps=d:p.nextDep=d,r.subs===void 0)r.subs=d;else{let g=r.subsTail;d.prevSub=g,g.nextSub=d}return f.depsTail=d,r.subsTail=d,d}function a(r){let f=0,l;e:do{l=!1;let p=r.dep;if("flags"in p){let d=p.flags;if((d&33)===33){if(e(p)){let g=p.subs;g.nextSub!==void 0&&c(g),l=!0}}else if((d&65)===65){let g=p.subs;g.nextSub!==void 0&&(g.prevSub=r),r=p.deps,++f;continue}}if(!l&&r.nextDep!==void 0){r=r.nextDep;continue}if(f){let d=r.sub;do{--f;let g=d.subs;if(l){if(e(d)){(r=g.prevSub)!==void 0?(g.prevSub=void 0,c(g),d=r.sub):d=g.sub;continue}}else d.flags&=-65;if((r=g.prevSub)!==void 0){if(g.prevSub=void 0,r.nextDep!==void 0){r=r.nextDep;continue e}d=r.sub}else{if((r=g.nextDep)!==void 0)continue e;d=g.sub}l=!1}while(f)}return l}while(!0)}function c(r){do{let f=r.sub,l=f.flags;(l&96)===64&&(f.flags=l|32|8,(l&10)===2&&(o!==void 0?o.depsTail.nextDep=f.deps:n=f,o=f)),r=r.nextSub}while(r!==void 0)}function u(r,f){let l=f.depsTail;if(l!==void 0){let p=f.deps;do{if(p===r)return!0;if(p===l)break;p=p.nextDep}while(p!==void 0)}return!1}function m(r){do{let f=r.dep,l=r.nextDep,p=r.nextSub,d=r.prevSub;if(p!==void 0?p.prevSub=d:f.subsTail=d,d!==void 0?d.nextSub=p:f.subs=p,f.subs===void 0&&"deps"in f){let g=f.flags;g&32||(f.flags=g|32);let b=f.deps;if(b!==void 0){r=b,f.depsTail.nextDep=l,f.deps=void 0,f.depsTail=void 0;continue}}r=l}while(r!==void 0)}}i(Ie,"createReactiveSystem");var{link:D,propagate:dt,updateDirtyFlag:pt,startTracking:k,endTracking:V,processEffectNotifications:Oe,processComputedUpdate:gt,processPendingInnerEffects:Be}=Ie({updateComputed(e){let t=v;v=e,k(e);try{let n=e.currentValue,o=e.getter(n);return n!==o?(e.currentValue=o,!0):!1}finally{v=t,V(e)}},notifyEffect(e){return"isScope"in e?Et(e):yt(e)}}),He=[],G=0,v,A;function J(){++G}i(J,"startBatch");function X(){--G||Oe()}i(X,"endBatch");function mt(){He.push(v),v=void 0}i(mt,"pauseTracking");function ht(){v=He.pop()}i(ht,"resumeTracking");function U(e){return St.bind({currentValue:e,subs:void 0,subsTail:void 0})}i(U,"signal");function R(e){return xt.bind({currentValue:void 0,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:33,getter:e})}i(R,"computed");function y(e){let t={fn:e,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:2};return v!==void 0?D(t,v):A!==void 0&&D(t,A),Pe(t),ke.bind(t)}i(y,"effect");function vt(e){let t={deps:void 0,depsTail:void 0,flags:2,isScope:!0};return bt(t,e),ke.bind(t)}i(vt,"effectScope");function Pe(e){let t=v;v=e,k(e);try{e.fn()}finally{v=t,V(e)}}i(Pe,"runEffect");function bt(e,t){let n=A;A=e,k(e);try{t()}finally{A=n,V(e)}}i(bt,"runEffectScope");function yt(e){let t=e.flags;return t&32||t&64&&pt(e,t)?Pe(e):Be(e,e.flags),!0}i(yt,"notifyEffect");function Et(e){return e.flags&128?(Be(e,e.flags),!0):!1}i(Et,"notifyEffectScope");function xt(){let e=this.flags;return e&96&&gt(this,e),v!==void 0?D(this,v):A!==void 0&&D(this,A),this.currentValue}i(xt,"computedGetter");function St(...e){if(e.length){if(this.currentValue!==(this.currentValue=e[0])){let t=this.subs;t!==void 0&&(dt(t),G||Oe())}}else return v!==void 0&&D(this,v),this.currentValue}i(St,"signalGetterSetter");function ke(){k(this),V(this)}i(ke,"effectStop");function j(e,t){if(e?.__signalArray)return e;let n=new Proxy(e,{get(o,s,a){if(s==="__signalArray")return!0;if(s==="__signal")return t;let c=Reflect.get(o,s,a);return typeof c!="function"?c:(...u)=>{let m=c.apply(o,u);return Array.isArray(m)?(u.length>0&&(m.__mapFn=u[0]),j(m,t)):m}},set(o,s,a,c){if(s==="__signalArray"||s==="__signal"||Object.is(o[s],a))return!0;let u=Reflect.set(o,s,a,c);return u&&t(),u}});return Object.assign(n,{__signalArray:!0,__signal:t})}i(j,"wrapArray");function x(e){if(!Array.isArray(e))return U(e);let t=U(e),n=j(e,()=>t());function o(...s){if(s.length>0){let a=s[0];if(Object.is(a,t()))return n;t(a),n=j(a,()=>t())}return n}return i(o,"arraySignal"),Object.assign(o,{__signalArray:!0})}i(x,"signal");function $(e){if(h.batchQueue)return e();h.isBatching=!0,h.batchQueue=new Set,J();try{e()}finally{Tt(),X(),h.isBatching=!1,h.batchQueue=null}}i($,"batch");function Tt(){let e=h.batchQueue;h.batchQueue=null;for(let t of e)t();h.batchQueue.forEach(t=>t()),h.batchQueue.clear()}i(Tt,"flushBatch");var K=new WeakMap;function Ve(e){if(K.has(e))return K.get(e);try{let t=e()??null;return K.set(e,t),t}catch{return null}}i(Ve,"evalExpr");var Ue=i((e,t)=>{let n=[];for(let o=e.nextSibling;o&&o!==t;o=o.nextSibling)n.push(o);return n},"collectNodes"),Y=i(e=>e&&!/^(data_esor_|@|ref|key$)/.test(e)&&/^[a-z][\w\-_:]*$/i.test(e),"specialAttr");var F;function _t(e){return F||(F=document.createElement("textarea")),F.innerHTML=e,F.value}i(_t,"decodeHTMLEntities");function je(e){if(typeof e!="string")return e;e.indexOf("&")!==-1&&(e=_t(e));let t=e.trim();if(!t)return t;let n=t.toLowerCase(),o={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0};if(n in o)return o[n];let s=Number(t);if(!Number.isNaN(s))return s;try{return JSON.parse(t)}catch{return t}}i(je,"coerceAttrValue");function At(e){for(let{name:t,value:n}of e.attributes){if(!Y(t))continue;let o=je(Ee(n));e._props[t]=x(o)}}i(At,"generateSpecialAttrSignals");function wt(e){let t=i(o=>{for(let{attributeName:s}of o){if(!Y(s))continue;let a=e._props[s];a&&a(je(e.getAttribute(s)))}},"handler"),n=new MutationObserver(t);n.observe(e,{attributes:!0}),e._cleanup.add(()=>n.disconnect())}i(wt,"observeAttrMutations");function Fe(e){At(e),wt(e)}i(Fe,"initPropsAndObserve");function Le(e,t,n=[],o=[]){let s=[...n],a=[...o],c=t.parentNode,u=Ue(e,t),m=Mt(a,u,s);s.length===a.length&&s.every((r,f)=>r===a[f])||$(()=>{Dt(c,u,m,t),e.__oldItems=[...a]})}i(Le,"reconcileArrays");var qe=i(e=>e&&e.nodeType===Node.ELEMENT_NODE,"isValidDOMNode"),Nt=i(e=>qe(e)?e.getAttribute("data-key"):null,"getNodeKey");function Mt(e,t,n){let o=new Map,s=new Map,a=[];for(let c of t){let u=Nt(c);u&&o.set(u,c)}for(let c=0;c<n.length;c++){let u=We(n[c],c);s.set(u,n[c])}for(let c=0;c<e.length;c++){let u=We(e[c],c);a[c]=u}return e.map((c,u)=>{let m=a[u];return Ct(c,m)})}i(Mt,"createOrReuseNodes");function We(e,t){if(e&&typeof e=="object"){if("key"in e)return`key-${e.key}`;if(e.id)return`item-${e.id}`;if(e.template){let n=e.template.firstElementChild;return n&&n.hasAttribute("key")?n.getAttribute("key"):`template-${t}`}try{return`item-${t}-${JSON.stringify(e)}`}catch{return`item-${t}`}}return`item-${t}-${String(e)}`}i(We,"getItemKey");function Ct(e,t){let n;return e?.template?n=e.template.cloneNode(!0).firstElementChild||document.createElement("div"):(n=document.createElement("div"),n.textContent=String(e)),qe(n)&&n.setAttribute("data-key",t),n}i(Ct,"createNode");function Dt(e,t,n,o){let s=0,a=t.length,c=0,u=n.length,m=a>0?t[a-1].nextSibling:o,r=null;if(!a){for(let f=0;f<u;f++)e.insertBefore(n[f],m);return}if(!u){for(;s<a;)e.removeChild(t[s++]);return}for(;s<a||c<u;){if(t[s]===n[c]){s++,c++;continue}for(;t[a-1]===n[u-1];)a--,u--;if(s===a){let f=u<n.length?c?n[c-1].nextSibling:n[u-c]:m;for(;c<u;)e.insertBefore(n[c++],f)}else if(c===u)for(;s<a;)(!r||!r.has(t[s]))&&e.removeChild(t[s]),s++;else if(t[s]===n[u-1]&&n[c]===t[a-1]){let f=t[--a].nextSibling;e.insertBefore(n[c++],t[s++].nextSibling),e.insertBefore(n[--u],f),t[a]=n[u]}else{if(!r){r=new Map;for(let l=c;l<u;l++)r.set(n[l],l)}let f=r.get(t[s]);if(f==null)e.removeChild(t[s++]);else if(c<f&&f<u){let l=1;for(;s+l<a&&f+l<u&&t[s+l]===n[f+l];)l++;if(l>f-c){let p=t[s];for(;c<f;)e.insertBefore(n[c++],p)}else e.replaceChild(n[c++],t[s++])}else s++}}}i(Dt,"ddiff");function Qe(e,t){let n=e?.shadowRoot;if(!n)return;let o=new Set;for(let s of t){let a=s.name.replace(`${_}-`,"");a&&o.add(a)}for(let s of o){let a=i(c=>{let u=c.target;if(u.hasAttribute(`${_}-${s}`)){let m=Number(u.getAttribute(`${_}-${s}`)),r=ve(e,m);typeof r=="function"&&B(e,()=>{r.call(e,c)})}},"listener");n.addEventListener(s,a,{passive:!1,capture:!0}),e._eventHandlers=e._eventHandlers||new Map,e._eventHandlers.set(s,a)}}i(Qe,"setupEventDelegation");function ze(e,t){if(!(!e||!t))for(let n of e){let o=n.ownerElement;if(!o)continue;let s=Number(n.value);o.removeAttribute(n.name);let a=t.get(s);typeof a=="function"&&a(o)}}i(ze,"setupRefs");function Z(e,t,n){let o=y(()=>{if(!e._isUpdating){e._isUpdating=!0;try{let s;typeof t=="function"?s=t():s=t,n(s)}catch(s){console.error("Error in signal binding:",s)}finally{e._isUpdating=!1}}});e._cleanup.add(o)}i(Z,"bindSignalToElement");function Rt({host:e,type:t,signal:n,bindAttr:o}){$t(e,{signal:n,bindAttr:o,renderer:i((s,a,c)=>{let u=t==="expression"?Ve(()=>c):c;u!=null&&It(e,s,a,u)},"renderer")})}i(Rt,"handleSignalBinding");function $t(e,{signal:t,bindAttr:n,renderer:o}){let[s,a]=z(e.shadowRoot,n);!s||!a||Z(e,t,c=>{o(s,a,c)})}i($t,"bindPlaceholderSignal");function It(e,t,n,o){let s=t.nextSibling;if(s&&s.nodeType===Node.TEXT_NODE)s.textContent=String(o);else{Ce(t,n);let a=document.createTextNode(String(o));n.parentNode.insertBefore(a,n)}}i(It,"renderEvaluated");function Ge(e,t){if(!(!t||t.size===0))for(let{type:n,signal:o,bindAttr:s,attributeName:a}of t.values())switch(n){case"attribute":Ot(e,o,s,a);break;case"array":Bt(e,o,s);break;case"text":case"expression":Rt({host:e,type:n,signal:o,bindAttr:s});break}}i(Ge,"setupSignals");function Ot(e,t,n,o){let s=e.shadowRoot.querySelector(`[${n}]`);s&&(s.removeAttribute(n),Z(e,t,a=>{let c=String(a);s.getAttribute(o)!==c&&s.setAttribute(o,c)}))}i(Ot,"handleAttributeSignal");function Bt(e,t,n){let[o,s]=z(e.shadowRoot,n);!o||!s||Z(e,t,a=>{let c=o.__oldItems||[],u=Array.isArray(a)?a:[];Le(o,s,c,u,e),o.__oldItems=[...u]})}i(Bt,"handleArraySignal");function Je(e,t){let o=class o extends HTMLElement{constructor(){super(),De(this),this._initComponent(),this._render()}_initComponent(){Object.assign(this,{_cleanup:new Set,_isUpdating:!1,_props:{},_eventIds:[],lifecycle:new M}),h.currentComponent=this,Fe(this),this.lifecycle.run("beforeMount",this)}connectedCallback(){this.lifecycle.run("mount",this)}disconnectedCallback(){this.lifecycle.run("destroy",this),this._cleanup.forEach(a=>a()),this._cleanup.clear(),this._props=null,this._eventIds=null,h.currentComponent=null,be(this),this._eventHandlers&&(this._eventHandlers.forEach((a,c)=>this.shadowRoot.removeEventListener(c,a)),this._eventHandlers.clear())}_render(){B(this,()=>{this.lifecycle.run("beforeUpdate",this);let a=typeof t=="function"?t.call(this,this._props):t,{template:c,signals:u,refs:m}=typeof a=="function"?a():a||{};!this.shadowRoot.hasChildNodes()&&c&&this.shadowRoot.appendChild(c.cloneNode(!0));let r=Re(this.shadowRoot);r&&(r.data_esor_ref&&ze(r.data_esor_ref,m),r.data_esor_event&&Qe(this,r.data_esor_event)),Ge(this,u),this.lifecycle.run("update",this)})}};i(o,"EsorComponent");let n=o;return customElements.define(e,n),n}i(Je,"component");function Xe(e=null){let t=e,n=i(o=>o!==void 0?t=o:t,"refFn");return Object.defineProperty(n,"current",{get:i(()=>t,"get"),set:i(o=>t=o,"set"),enumerable:!0}),n}i(Xe,"ref");function Ke(e,t=[]){let n=x(e());return y(()=>(n(e()),t)),n}i(Ke,"memo");var ee={info:{color:"#0066cc",icon:"\u2139\uFE0F"},warn:{color:"#FFA500",icon:"\u26A0\uFE0F"},error:{color:"#FF0000",icon:"\u{1F6AB}"}},te=i((e="info",t="",...n)=>{ee[e]||(e="info");let o=e.charAt(0).toUpperCase()+e.slice(1);console.groupCollapsed(`%c[ESOR ${ee[e].icon}${o}] ${t}`,`color: ${ee[e].color}; font-weight: bold;`),console[e]({message:t,component:h.currentComponent?.constructor?.name||"Unknown",time:new Date().toISOString(),data:n.length?n:void 0}),console[e==="error"?"trace":"debug"](),console.groupEnd()},"log"),Qn=i((...e)=>te("info",...e),"info"),zn=i((...e)=>te("warn",...e),"warn"),w=i((...e)=>te("error",...e),"error");function Ye(e,t){let n=h.currentComponent;if(!n)return w("useEmit must be used within a component"),null;let o=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0});return o.__esor={name:e,detail:t,receivedBy:[],timestamp:Date.now()},n.dispatchEvent(o),o}i(Ye,"useEmit");var ne="esor-store:",Ze=i((e,t={})=>{let n=t.persist?Ht(t.persist):null,o=x(n||e),s=new Set;return t.persist&&y(()=>{let c=i(u=>{if(u.key===ne+t.persist)try{o.set(JSON.parse(u.newValue))}catch(m){w(`Failed to sync state: ${m.message}`)}},"handleStorage");return window.addEventListener("storage",c),()=>window.removeEventListener("storage",c)}),[o,{setState(c){let u=typeof c=="function"?c(o()):c;o.set(u),t.persist&&Pt(t.persist,u),s.forEach(m=>m(u))},subscribe(c){return s.add(c),()=>s.delete(c)},getState:o}]},"store");function Ht(e){try{let t=localStorage.getItem(ne+e);return t?JSON.parse(t):null}catch(t){return w(`Failed to load state: ${t.message}`),null}}i(Ht,"loadFromStorage");function Pt(e,t){try{localStorage.setItem(ne+e,JSON.stringify(t))}catch(n){w(`Failed to save state: ${n.message}`)}}i(Pt,"saveToStorage");export{$ as batch,ue as beforeMount,de as beforeUpdate,Je as component,R as computed,y as effect,Me as html,Ke as memo,ge as onDestroy,me as onEffect,le as onMount,pe as onUpdate,Xe as ref,x as signal,Ze as store,Ye as useEmit};
//# sourceMappingURL=esor.min.js.map
