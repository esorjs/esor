var ae=Object.defineProperty;var fe=e=>{throw TypeError(e)};var ft=(e,t,n)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var r=(e,t)=>ae(e,"name",{value:t,configurable:!0});var ue=(e,t,n)=>ft(e,typeof t!="symbol"?t+"":t,n),le=(e,t,n)=>t.has(e)||fe("Cannot "+n);var S=(e,t,n)=>(le(e,t,"read from private field"),n?n.call(e):t.get(e)),z=(e,t,n)=>t.has(e)?fe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var de=(e,t,n)=>(le(e,t,"access private method"),n);var x,O,he,$=class ${constructor(){z(this,O);z(this,x,new Map);$.current=this}add(t,n){return de(this,O,he).call(this,t).add(n),()=>S(this,x).get(t)?.delete(n)}run(t,n){queueMicrotask(()=>{let o=S(this,x).get(t);if(o?.size)for(let i of o)try{i.call(n)}catch(c){(typeof n._catchError=="function"?n._catchError:console.error)("Error in lifecycle hook:",c)}})}clear(t){t?S(this,x).delete(t):S(this,x).clear()}};x=new WeakMap,O=new WeakSet,he=r(function(t){return S(this,x).has(t)||S(this,x).set(t,new Set),S(this,x).get(t)},"#hooks"),r($,"Lifecycle"),ue($,"current");var C=$,pe=r(()=>C.current||(()=>{throw"Lifecycle not initialized"})(),"getLC"),[me,ge,Ee,ve,ye]=["beforeMount","mount","beforeUpdate","update","destroy"].map(e=>t=>pe().add(e,t)),Te=r(e=>{let t=e();return t instanceof Function&&pe().add("destroy",t)||(()=>{})},"onEffect");var k={currentEffect:null,currentComponent:null,pendingEffects:new Set,batchQueue:new Set,isEffectsFlushing:!1,globalEvents:{handlersByType:new Map,nextId:0}},g=k;function M(e,t){let n=k.currentComponent;k.currentComponent=e;try{return t()}finally{k.currentComponent=n}}r(M,"withCurrentComponent");var A=new WeakMap,ut=1;function xe(e,t,n){A.has(e)||A.set(e,new Map);let o=A.get(e),i=ut++;return o.set(i,{type:t,handler:n}),i}r(xe,"registerEvent");function be(e,t){return A.get(e)?.get(t)?.handler}r(be,"getEventHandler");function nn(e,t){let n=A.get(e);n&&(n.delete(t),n.size===0&&A.delete(e))}r(nn,"clearEventHandler");function Se(e){A.delete(e)}r(Se,"clearAllEventHandlers");var X=r(e=>e==null?"":e.toString().replace(/[&<>'"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","/":"&#x2F;"})[t]),"escapeHTML");function Ae(e){return e==null?"":String(e).replace(/^["']|["']$/g,"").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}r(Ae,"cleanAttributeValue");var _e="$:",y="data_esor_event",J="data_esor_bind",K="data_esor_ref",lt=new RegExp(/\s(\w[\w-]*)=(["'])?(?:(?!\2).)*$/),Ne=new RegExp(/ref=(["'])?\s*$/),we=new RegExp(/(@\w+)=(["'])?\s*$/),dt=new RegExp(/["']\s*$/),pt=new RegExp(/^(script|style|textarea|title)$/i);function Ce(e,t,n,o){let i=e&&e.charAt(e.length-1)==='"'?'"':"'";return e.replace(t,`${n}=${i}${o}${i}`)}r(Ce,"replaceAttribute");var ht=r(e=>e.replace(dt,""),"removeQuote"),mt=r(e=>e?.template?.nodeType===Node.DOCUMENT_FRAGMENT_NODE,"isTemplateObject");function gt(e,t,n){let o=g.currentComponent,i=xe(o,t,e);return Ce(n,we,`${y}-${t}`,i)}r(gt,"injectEvent");function Et(e,t,n,o){return o.set(n,e),Ce(t,Ne,`${K}-${n}`,n)}r(Et,"injectRef");function vt(e,t,n,o,i){n=ht(n);let c=n&&n.charAt(n.length-1)==='"'?'"':"'",a=typeof e=="function"?e():e,u=pt.test(t)?String(a):X(a),p=`${J}-${o}`;return n+=`${c}${u}${c} ${p}=${c}true${c}`,i.set(o,{type:"attribute",signal:e,attributeName:t,bindAttr:p}),n}r(vt,"injectSignalAttr");function $e(e,t,n,o,i){let c=`${_e}${o}`;i.set(o,{type:t?"expression":"text",signal:e,bindAttr:c});let a=t?e():e;return`${n}<!--${c}-->${X(String(a))}<!--//${c}-->`}r($e,"injectExpr");function Me(e,t,n,o,i,c){let a=`${_e}${t}`,u={type:"array",signal:i?()=>(e.__signal()||[]).map(e.__mapFn||(f=>f)):typeof c=="function"?c:()=>e,bindAttr:a};n.set(t,u);let s=(Array.isArray(e)?e:[]).map(B).join("");return`${o}<!--${a}-->${s}<!--//${a}-->`}r(Me,"injectArray");function yt(e){let t="";for(let n of e.childNodes)n.nodeType===Node.ELEMENT_NODE&&n.hasAttribute("key")&&(n.setAttribute("data-key",n.getAttribute("key")),n.removeAttribute("key")),t+=n.outerHTML||n.textContent;return t}r(yt,"processTemplateNodes");function B(e){return e==null||e===!1?"":Array.isArray(e)?e.reduce((t,n)=>t+B(n),""):e instanceof SVGElement?e.outerHTML:mt(e)?yt(e.template):e?.type==="template-array"?e.templates.reduce((t,n)=>t+B(n),""):e.toString()}r(B,"processVal");function De(e,...t){let n="",o=new Map,i=new Map,c=0,a=0;for(let p=0;p<e.length;p++){if(n+=e[p],p>=t.length)continue;let s=t[p],f=e[p].match(lt),l=!!f,h=f?.[1],d=Ne.exec(n),m=we.exec(n),v=d&&typeof s=="function",w=m&&typeof s=="function",at=w?m[1].slice(1):null;v?n=Et(s,n,a++,i):w?n=gt(s,at,n):(s?.signal||typeof s=="function")&&l?n=vt(s,h,n,c++,o):Array.isArray(s)&&s.__signalArray===!0?n=Me(s,c++,o,n,!0):s?.signal?n=$e(s,!1,n,c++,o):typeof s=="function"?n=$e(s,!0,n,c++,o):Array.isArray(s)?n=Me(s,c++,o,n,!1,s):s!=null&&(n+=B(s))}let u=document.createElement("template");return u.innerHTML=n.trim(),{template:u.content,signals:o,refs:i}}r(De,"processTemplate");var G=new WeakMap;function Re(e,...t){if(t.length===0&&e.raw){if(G.has(e))return G.get(e);let n=De(e,...t);return G.set(e,n),n}return De(e,...t)}r(Re,"html");function hn(e,t){return!Object.is(e,t)}r(hn,"valuesChanged");var Ie=r(e=>e instanceof DocumentFragment&&e||e?.content?.cloneNode()||document.createDocumentFragment(),"getDocumentFragment");function Oe(e,t){let n=e.nextSibling;for(;n&&n!==t;){let o=n.nextSibling;n.parentNode.removeChild(n),n=o}}r(Oe,"removeChildNodesBetween");var P=new WeakMap;function V(e,t){if(P.has(e)){let a=P.get(e)[t];if(a)return a}let n=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT),o=null,i=null;for(;n.nextNode()&&!i;){let a=n.currentNode;!o&&a.nodeValue===t?o=a:o&&a.nodeValue===`//${t}`&&(i=a)}let c=[o,i];return P.set(e,{...P.get(e),[t]:c}),c}r(V,"findCommentPlaceholders");function ke(e){let n=HTMLElement.prototype.hasOwnProperty("attachInternals")?e.attachInternals():null;n?.shadowRoot?e.shadowRoot=n.shadowRoot:e.attachShadow({mode:"open"})}r(ke,"setupDeclarativeShadowRoot");function Be(e,t=[K,y,J]){let n={},o=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT,{acceptNode(c){if(c.hasAttributes()){for(let{name:a}of c.attributes)if(t.some(u=>a.startsWith(u)))return NodeFilter.FILTER_ACCEPT}return NodeFilter.FILTER_SKIP}}),i;for(;i=o.nextNode();)for(let c of i.attributes){let a=t.find(u=>c.name.startsWith(u));a&&(n[a]||(n[a]=[]),n[a].push(c))}return Object.keys(n).length?n:null}r(Be,"findAttributesWithEsorDirectives");var Pe=(e=>(e[e.Computed=1]="Computed",e[e.Effect=2]="Effect",e[e.Tracking=4]="Tracking",e[e.Notified=8]="Notified",e[e.Recursed=16]="Recursed",e[e.Dirty=32]="Dirty",e[e.PendingComputed=64]="PendingComputed",e[e.PendingEffect=128]="PendingEffect",e[e.Propagated=224]="Propagated",e))(Pe||{});function Ve({updateComputed:e,notifyEffect:t}){let n,o;return{link(s,f){let l=f.depsTail;if(l!==void 0&&l.dep===s)return;let h=l!==void 0?l.nextDep:f.deps;if(h!==void 0&&h.dep===s){f.depsTail=h;return}let d=s.subsTail;if(!(d!==void 0&&d.sub===f&&u(d,f)))return i(s,f,h,l)},propagate(s){let f=32,l=s,h=0;e:do{let d=s.sub,m=d.flags;if(!(m&244)&&(d.flags=m|f|8,!0)||m&16&&!(m&4)&&(d.flags=m&-17|f|8,!0)||!(m&224)&&u(s,d)&&(d.flags=m|16|f|8,d.subs!==void 0)){let v=d.subs;if(v!==void 0){v.nextSub!==void 0?(v.prevSub=l,s=l=v,f=64,++h):(s=v,f=m&2?128:64);continue}m&2&&(o!==void 0?o.depsTail.nextDep=d.deps:n=d,o=d)}else m&(4|f)?!(m&f)&&m&224&&u(s,d)&&(d.flags=m|f):(d.flags=m|f|8,(m&10)===2&&(o!==void 0?o.depsTail.nextDep=d.deps:n=d,o=d));if((s=l.nextSub)!==void 0){l=s,f=h?64:32;continue}for(;h;){--h;let w=l.dep.subs;if(l=w.prevSub,w.prevSub=void 0,(s=l.nextSub)!==void 0){l=s,f=h?64:32;continue e}}break}while(!0)},startTracking(s){s.depsTail=void 0,s.flags=s.flags&-249|4},endTracking(s){let f=s.depsTail;if(f!==void 0){let l=f.nextDep;l!==void 0&&(p(l),f.nextDep=void 0)}else s.deps!==void 0&&(p(s.deps),s.deps=void 0);s.flags&=-5},updateDirtyFlag(s,f){return c(s.deps)?(s.flags=f|32,!0):(s.flags=f&-65,!1)},processComputedUpdate(s,f){if((f&32||(c(s.deps)||(s.flags=f&-65,!1)))&&e(s)){let l=s.subs;l!==void 0&&a(l)}},processPendingInnerEffects(s,f){if(f&128){s.flags=f&-129;let l=s.deps;do{let h=l.dep;"flags"in h&&h.flags&2&&h.flags&224&&t(h),l=l.nextDep}while(l!==void 0)}},processEffectNotifications(){for(;n!==void 0;){let s=n,f=s.depsTail,l=f.nextDep;l!==void 0?(f.nextDep=void 0,n=l.sub):(n=void 0,o=void 0),t(s)||(s.flags&=-9)}}};function i(s,f,l,h){let d={dep:s,sub:f,nextDep:l,prevSub:void 0,nextSub:void 0};if(h===void 0?f.deps=d:h.nextDep=d,s.subs===void 0)s.subs=d;else{let m=s.subsTail;d.prevSub=m,m.nextSub=d}return f.depsTail=d,s.subsTail=d,d}function c(s){let f=0,l;e:do{l=!1;let h=s.dep;if("flags"in h){let d=h.flags;if((d&33)===33){if(e(h)){let m=h.subs;m.nextSub!==void 0&&a(m),l=!0}}else if((d&65)===65){let m=h.subs;m.nextSub!==void 0&&(m.prevSub=s),s=h.deps,++f;continue}}if(!l&&s.nextDep!==void 0){s=s.nextDep;continue}if(f){let d=s.sub;do{--f;let m=d.subs;if(l){if(e(d)){(s=m.prevSub)!==void 0?(m.prevSub=void 0,a(m),d=s.sub):d=m.sub;continue}}else d.flags&=-65;if((s=m.prevSub)!==void 0){if(m.prevSub=void 0,s.nextDep!==void 0){s=s.nextDep;continue e}d=s.sub}else{if((s=m.nextDep)!==void 0)continue e;d=m.sub}l=!1}while(f)}return l}while(!0)}function a(s){do{let f=s.sub,l=f.flags;(l&96)===64&&(f.flags=l|32|8,(l&10)===2&&(o!==void 0?o.depsTail.nextDep=f.deps:n=f,o=f)),s=s.nextSub}while(s!==void 0)}function u(s,f){let l=f.depsTail;if(l!==void 0){let h=f.deps;do{if(h===s)return!0;if(h===l)break;h=h.nextDep}while(h!==void 0)}return!1}function p(s){do{let f=s.dep,l=s.nextDep,h=s.nextSub,d=s.prevSub;if(h!==void 0?h.prevSub=d:f.subsTail=d,d!==void 0?d.nextSub=h:f.subs=h,f.subs===void 0&&"deps"in f){let m=f.flags;m&32||(f.flags=m|32);let v=f.deps;if(v!==void 0){s=v,f.depsTail.nextDep=l,f.deps=void 0,f.depsTail=void 0;continue}}s=l}while(s!==void 0)}}r(Ve,"createReactiveSystem");var{link:D,propagate:Tt,updateDirtyFlag:xt,startTracking:F,endTracking:H,processEffectNotifications:Fe,processComputedUpdate:bt,processPendingInnerEffects:He}=Ve({updateComputed(e){let t=E;E=e,F(e);try{let n=e.currentValue,o=e.getter(n);return n!==o?(e.currentValue=o,!0):!1}finally{E=t,H(e)}},notifyEffect(e){return"isScope"in e?Ct(e):wt(e)}}),Ue=[],Y=0,E,_;function Z(){++Y}r(Z,"startBatch");function ee(){--Y||Fe()}r(ee,"endBatch");function St(){Ue.push(E),E=void 0}r(St,"pauseTracking");function At(){E=Ue.pop()}r(At,"resumeTracking");function U(e){return Mt.bind({currentValue:e,subs:void 0,subsTail:void 0})}r(U,"signal");function R(e){return $t.bind({currentValue:void 0,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:33,getter:e})}r(R,"computed");function T(e){let t={fn:e,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:2};return E!==void 0?D(t,E):_!==void 0&&D(t,_),We(t),je.bind(t)}r(T,"effect");function _t(e){let t={deps:void 0,depsTail:void 0,flags:2,isScope:!0};return Nt(t,e),je.bind(t)}r(_t,"effectScope");function We(e){let t=E;E=e,F(e);try{e.fn()}finally{E=t,H(e)}}r(We,"runEffect");function Nt(e,t){let n=_;_=e,F(e);try{t()}finally{_=n,H(e)}}r(Nt,"runEffectScope");function wt(e){let t=e.flags;return t&32||t&64&&xt(e,t)?We(e):He(e,e.flags),!0}r(wt,"notifyEffect");function Ct(e){return e.flags&128?(He(e,e.flags),!0):!1}r(Ct,"notifyEffectScope");function $t(){let e=this.flags;return e&96&&bt(this,e),E!==void 0?D(this,E):_!==void 0&&D(this,_),this.currentValue}r($t,"computedGetter");function Mt(...e){if(e.length){if(this.currentValue!==(this.currentValue=e[0])){let t=this.subs;t!==void 0&&(Tt(t),Y||Fe())}}else return E!==void 0&&D(this,E),this.currentValue}r(Mt,"signalGetterSetter");function je(){F(this),H(this)}r(je,"effectStop");var te=new WeakMap;function W(e,t){if(e&&e.__signalArray===!0)return e;if(te.has(e))return te.get(e);let n=new Proxy(e,{get(o,i,c){let a=Reflect.get(o,i,c);return typeof a=="function"?function(...u){let p=a.apply(o,u);return Array.isArray(p)?(p.__signalArray=!0,p.__signal=t,u.length>0&&typeof u[0]=="function"&&(p.__mapFn=u[0]),W(p,t)):p}:a}});return te.set(e,n),n}r(W,"wrapArray");function b(e){if(Array.isArray(e)){let t=U(e),n=W(e,()=>t());return n.__signalArray=!0,r((...i)=>{if(i.length>0){let c=i[0];return t(c),n=W(c,()=>t()),n.__signalArray=!0,n}return n},"func")}return U(e)}r(b,"signal");function I(e){if(g.batchQueue)return e();g.batchQueue=new Set,Z();try{e(),Dt()}finally{ee(),g.batchQueue=null}}r(I,"batch");function Dt(){let e=g.batchQueue;g.batchQueue=null;for(let t of e)t();g.batchQueue.forEach(t=>t()),g.batchQueue.clear()}r(Dt,"flushBatch");function Xe(e,t,n=[],o=[],i){let c=[...n],a=[...o],u=t.parentNode,p=Rt(e,t),s=kt(a,p,c);c.length===a.length&&c.every((f,l)=>f===a[l])||I(()=>{Vt(u,p,s,t),Ge(i,e,t),e.__oldItems=[...a]})}r(Xe,"reconcileArrays");var Rt=r((e,t)=>{let n=[];for(let o=e.nextSibling;o&&o!==t;o=o.nextSibling)n.push(o);return n},"collectNodes"),j=r(e=>e&&e.nodeType===Node.ELEMENT_NODE,"isValidDOMNode"),It=r(e=>j(e)?e.getAttribute("data-key"):null,"getNodeKey");function Ot(e,t,n,o){if(!e||!t||!n?.template||!o?.template)return!1;e.firstChild?.nodeType===3&&e.normalize(),t.firstChild?.nodeType===3&&t.normalize();let i=Le(e),c=Le(t);if(i.length!==c.length)return!1;let a=!1;for(let u=0,p=i.length;u<p;u++)i[u].textContent!==c[u].textContent&&(i[u].textContent=c[u].textContent,a=!0);return a}r(Ot,"updateNodeContent");var Le=r(e=>{let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),o;for(;o=n.nextNode();)t.push(o);return t},"getTextNodes");function kt(e,t,n){let o=new Map,i=new Map,c=[];return t.forEach(a=>{let u=It(a);u&&o.set(u,a)}),n.forEach((a,u)=>i.set(Qe(a,u),a)),e.forEach((a,u)=>c[u]=Qe(a,u)),e.map((a,u)=>{let p=c[u],s=o.get(p),f=i.get(p);if(s?.nodeType===1){if(!f||Bt(f,a)){let l=ze(a,p);return Ot(s,l,f,a)?(Pt(s,l),s):l}return s}return ze(a,p)})}r(kt,"createOrReuseNodes");function Bt(e,t){if(!e||!t)return!0;if(e?.template&&t?.template){let n=qe(e),o=qe(t);return!L(n,o)}return!L(e,t)}r(Bt,"hasChanged");function qe(e){let{template:t}=e;if(!t)return null;let n=[],o=t.cloneNode(!0),i=document.createTreeWalker(o,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode(a){return a.nodeType===3?a.textContent.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}}),c;for(;c=i.nextNode();)if(c.nodeType===3)n.push(c.textContent);else for(let a=0,u=c.attributes.length;a<u;a++){let p=c.attributes[a].value;p.includes("${")&&n.push(p)}return n}r(qe,"extractDynamicValues");function L(e,t){if(e===t)return!0;if(!e||!t||typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((n,o)=>L(n,t[o]));if(typeof e=="object"){let n=Object.keys(e),o=Object.keys(t);return n.length!==o.length?!1:n.every(i=>L(e[i],t[i]))}return String(e)===String(t)}r(L,"areValuesEqual");function Pt(e,t){if(!(!j(e)||!j(t)))for(let n=e.attributes.length-1;n>=0;n--){let o=e.attributes[n];o.name.startsWith(y)&&t.setAttribute(o.name,o.value)}}r(Pt,"copyEventAttributes");function Qe(e,t){if(e&&typeof e=="object"){if("key"in e)return`key-${e.key}`;if(e.id)return`item-${e.id}`;if(e.template){let n=e.template.firstElementChild;return n&&n.hasAttribute("key")?n.getAttribute("key"):`template-${t}`}try{return`item-${t}-${JSON.stringify(e)}`}catch{return`item-${t}`}}return`item-${t}-${String(e)}`}r(Qe,"getItemKey");function ze(e,t){let n;return e?.template?n=e.template.cloneNode(!0).firstElementChild||document.createElement("div"):(n=document.createElement("div"),n.textContent=String(e)),j(n)&&n.setAttribute("data-key",t),n}r(ze,"createNode");var $n=r((e,t,n)=>e.insertBefore(t,n),"moveBefore");function Vt(e,t,n,o){let i=0,c=t.length,a=0,u=n.length,p=c>0?t[c-1].nextSibling:o,s=null;if(!c){for(let f=0;f<u;f++)e.insertBefore(n[f],p);return}if(!u){for(;i<c;)e.removeChild(t[i++]);return}for(;i<c||a<u;){if(t[i]===n[a]){i++,a++;continue}for(;t[c-1]===n[u-1];)c--,u--;if(i===c){let f=u<n.length?a?n[a-1].nextSibling:n[u-a]:p;for(;a<u;)e.insertBefore(n[a++],f)}else if(a===u)for(;i<c;)(!s||!s.has(t[i]))&&e.removeChild(t[i]),i++;else if(t[i]===n[u-1]&&n[a]===t[c-1]){let f=t[--c].nextSibling;e.insertBefore(n[a++],t[i++].nextSibling),e.insertBefore(n[--u],f),t[c]=n[u]}else{if(!s){s=new Map;for(let l=a;l<u;l++)s.set(n[l],l)}let f=s.get(t[i]);if(f==null)e.removeChild(t[i++]);else if(a<f&&f<u){let l=1;for(;i+l<c&&f+l<u&&t[i+l]===n[f+l];)l++;if(l>f-a){let h=t[i];for(;a<f;)e.insertBefore(n[a++],h)}else e.replaceChild(n[a++],t[i++])}else i++}}}r(Vt,"ddiff");function Je(e,t){let n=e?.shadowRoot;if(!n)return;let o=new Set;for(let i of t){let c=i.name.replace(`${y}-`,"");c&&o.add(c)}for(let i of o){let c=r(a=>{let u=a.target;if(u.hasAttribute(`${y}-${i}`)){let p=Number(u.getAttribute(`${y}-${i}`)),s=be(e,p);typeof s=="function"&&M(e,()=>{s.call(e,a)})}},"listener");n.addEventListener(i,c,{passive:!1,capture:!0}),e._eventHandlers=e._eventHandlers||new Map,e._eventHandlers.set(i,c)}}r(Je,"setupEventDelegation");function Ke(e,t){if(!(!e||!t))for(let n of e){let o=n.ownerElement;if(!o)continue;let i=Number(n.value);o.removeAttribute(n.name);let c=t.get(i);typeof c=="function"&&c(o)}}r(Ke,"setupRefs");function q(e,t,n){let o=T(()=>{if(!e._isUpdating){e._isUpdating=!0;try{n(t())}finally{e._isUpdating=!1}}});e._cleanup.add(o)}r(q,"bindSignalToElement");function Ye(e,t){if(!(!t||t.size===0))for(let{type:n,signal:o,bindAttr:i,attributeName:c}of t.values())switch(n){case"attribute":Ft(e,o,i,c);break;case"array":Ht(e,o,i);break;case"text":case"expression":Ze({host:e,type:n,signal:o,bindAttr:i});break}}r(Ye,"setupSignals");function Ft(e,t,n,o){let i=e.shadowRoot.querySelector(`[${n}]`);i&&(i.removeAttribute(n),q(e,t,c=>{let a=String(c);i.getAttribute(o)!==a&&i.setAttribute(o,a)}))}r(Ft,"handleAttributeSignal");function Ht(e,t,n){let[o,i]=V(e.shadowRoot,n);!o||!i||q(e,t,c=>{let a=o.__oldItems||[],u=Array.isArray(c)?c:[];Xe(o,i,a,u,e)})}r(Ht,"handleArraySignal");function Ge(e,t,n){let{shadowRoot:o}=e,i=Wt(o,t,n);Ut(e,i)}r(Ge,"bindEventsInRange");function Ut(e,t){for(let n of t)for(let o of Array.from(n.attributes)){if(!o.name.startsWith(`${y}`))continue;let i=o.name.replace(y,""),c=parseInt(o.value,10),a=g.globalEvents.handlersByType.get(i)?.get(c);typeof a=="function"&&(n.addEventListener(i,(...u)=>M(e,()=>a.call(e,...u))),n.removeAttribute(o.name))}}r(Ut,"bindEvents");function Wt(e,t,n){let o=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);if(!t&&!n){for(;i.nextNode();)o.push(i.currentNode);return o}let c=t?.nextSibling||e.firstChild;if(!c)return o;i.currentNode=c;do{if(i.currentNode===n)break;o.push(i.currentNode)}while(i.nextNode());return o}r(Wt,"getElementsInRange");var ne=new Map;function et(e,t){let n=Ie(t);return ne.has(e)||ne.set(e,n.cloneNode(!0)),ne.get(e).cloneNode(!0)}r(et,"cachedTemplate");var oe=new WeakMap;function jt(e){if(oe.has(e))return oe.get(e);try{let t=e()??null;return oe.set(e,t),t}catch{return null}}r(jt,"evalExpr");function Lt(e,t,n,o){let i=t.nextSibling;if(i&&i.nodeType===Node.TEXT_NODE)i.textContent=String(o);else{Oe(t,n);let c=document.createTextNode(String(o));n.parentNode.insertBefore(c,n)}}r(Lt,"renderEvaluated");function qt(e,{signal:t,bindAttr:n,renderer:o}){let[i,c]=V(e.shadowRoot,n);!i||!c||q(e,t,a=>{o(i,c,a)})}r(qt,"bindPlaceholderSignal");function Ze({host:e,type:t,signal:n,bindAttr:o}){qt(e,{signal:n,bindAttr:o,renderer:r((i,c,a)=>{let u=t==="expression"?jt(()=>a):a;u!=null&&Lt(e,i,c,u)},"renderer")})}r(Ze,"handleSignalBinding");var re=r(e=>e&&!/^(data_esor_|@|ref|key$)/.test(e)&&/^[a-z][\w\-_:]*$/i.test(e),"specialAttr");var Q;function Qt(e){return Q||(Q=document.createElement("textarea")),Q.innerHTML=e,Q.value}r(Qt,"decodeHTMLEntities");function tt(e){if(typeof e!="string")return e;e.indexOf("&")!==-1&&(e=Qt(e));let t=e.trim();if(!t)return t;let n=t.toLowerCase(),o={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0};if(n in o)return o[n];let i=Number(t);if(!Number.isNaN(i))return i;try{return JSON.parse(t)}catch{return t}}r(tt,"coerceAttrValue");function zt(e){for(let{name:t,value:n}of e.attributes){if(!re(t))continue;let o=tt(Ae(n));e._props[t]=b(o)}}r(zt,"generateSpecialAttrSignals");function Xt(e){let t=r(o=>{for(let{attributeName:i}of o){if(!re(i))continue;let c=e._props[i];c&&c(tt(e.getAttribute(i)))}},"handler"),n=new MutationObserver(t);n.observe(e,{attributes:!0}),e._cleanup.add(()=>n.disconnect())}r(Xt,"observeAttrMutations");function nt(e){zt(e),Xt(e)}r(nt,"initPropsAndObserve");function ot(e,t){let o=class o extends HTMLElement{constructor(){super(),ke(this),this._initEsorComponent(this),this._render()}_initEsorComponent(c){Object.assign(c,{_cleanup:new Set,_isUpdating:!1,_props:{},_eventIds:[],lifecycle:new C}),g.currentComponent=c,nt(c),c.lifecycle.run("beforeMount",c)}connectedCallback(){this.lifecycle.run("mount",this)}disconnectedCallback(){this.lifecycle.run("destroy",this),this._cleanup.forEach(c=>c()),this._cleanup.clear(),Se(this)}_render(){M(this,()=>{this.lifecycle.run("beforeUpdate",this);let c=t.call(this,this._props),{template:a,signals:u,refs:p}=typeof c=="function"?c():c||{};this.shadowRoot.hasChildNodes()||this.shadowRoot.appendChild(et(e,a));let s=Be(this.shadowRoot);s&&(s.data_esor_ref&&Ke(s.data_esor_ref,p),s.data_esor_event&&Je(this,s.data_esor_event)),Ye(this,u),this.lifecycle.run("update",this)})}};r(o,"EsorComponent");let n=o;return customElements.define(e,n),n}r(ot,"component");function rt(e=null){let t=e;return new Proxy(()=>{},{apply:r((n,o,i)=>i.length?t=i[0]:t,"apply"),get:r((n,o)=>t&&(t[o]===void 0?t:t[o]),"get"),set:r((n,o,i)=>!!t&&(t[o]=i,!0),"set")})}r(rt,"ref");function it(e,t=[]){let n=b(e());return T(()=>(n(e()),t)),n}r(it,"memo");var ie={info:{color:"#0066cc",icon:"\u2139\uFE0F"},warn:{color:"#FFA500",icon:"\u26A0\uFE0F"},error:{color:"#FF0000",icon:"\u{1F6AB}"}},se=r((e="info",t="",...n)=>{ie[e]||(e="info");let o=e.charAt(0).toUpperCase()+e.slice(1);console.groupCollapsed(`%c[ESOR ${ie[e].icon}${o}] ${t}`,`color: ${ie[e].color}; font-weight: bold;`),console[e]({message:t,component:g.currentComponent?.constructor?.name||"Unknown",time:new Date().toISOString(),data:n.length?n:void 0}),console[e==="error"?"trace":"debug"](),console.groupEnd()},"log"),lo=r((...e)=>se("info",...e),"info"),po=r((...e)=>se("warn",...e),"warn"),N=r((...e)=>se("error",...e),"error");function st(e,t){let n=g.currentComponent;if(!n)return N("useEmit must be used within a component"),null;let o=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0});return o.__esor={name:e,detail:t,receivedBy:[],timestamp:Date.now()},n.dispatchEvent(o),o}r(st,"useEmit");var ce="esor-store:",ct=r((e,t={})=>{let n=t.persist?Gt(t.persist):null,o=b(n||e),i=new Set;return t.persist&&T(()=>{let a=r(u=>{if(u.key===ce+t.persist)try{o.set(JSON.parse(u.newValue))}catch(p){N(`Failed to sync state: ${p.message}`)}},"handleStorage");return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)}),[o,{setState(a){let u=typeof a=="function"?a(o()):a;o.set(u),t.persist&&Jt(t.persist,u),i.forEach(p=>p(u))},subscribe(a){return i.add(a),()=>i.delete(a)},getState:o}]},"store");function Gt(e){try{let t=localStorage.getItem(ce+e);return t?JSON.parse(t):null}catch(t){return N(`Failed to load state: ${t.message}`),null}}r(Gt,"loadFromStorage");function Jt(e,t){try{localStorage.setItem(ce+e,JSON.stringify(t))}catch(n){N(`Failed to save state: ${n.message}`)}}r(Jt,"saveToStorage");export{I as batch,me as beforeMount,Ee as beforeUpdate,ot as component,R as computed,T as effect,Re as html,it as memo,ye as onDestroy,Te as onEffect,ge as onMount,ve as onUpdate,rt as ref,b as signal,ct as store,st as useEmit};
//# sourceMappingURL=esor.min.js.map
