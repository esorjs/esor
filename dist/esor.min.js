var G=Object.defineProperty;var U=e=>{throw TypeError(e)};var se=(e,t,n)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var o=(e,t)=>G(e,"name",{value:t,configurable:!0});var C=(e,t,n)=>se(e,typeof t!="symbol"?t+"":t,n),fe=(e,t,n)=>t.has(e)||U("Cannot "+n);var W=(e,t,n)=>(fe(e,t,"read from private field"),n?n.call(e):t.get(e)),B=(e,t,n)=>t.has(e)?U("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var l=null,ue=0,P=[],le=100,d=o(e=>{let t=e,n=new Set;return o(c=>{if(c===void 0)return l&&n.add(l),t;let s=typeof c=="function"?c(t):c;if(!Object.is(s,t)){t=s;for(let b of n)b()}return t},"getterSetter")},"signal"),h=o(e=>{let t=0;if(++t>le){console.warn("Maximum effect update depth exceeded");return}let n=o(()=>{let r=l;l=n;try{e()}finally{l=r,t--}},"reactive");return n(),()=>P.splice(P.indexOf(n),1)},"effect"),N=o(e=>{let t=d();return h(()=>t(e())),()=>t()},"computed"),T=o(e=>{let t=l;l={id:ue++};try{return e()}finally{l=t}},"batch");function E(e,t,n=null){let r=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0});return n&&n.dispatchEvent(r),r}o(E,"emit");function $(e=null){let t=e;return n=>n!==void 0?t=n:t}o($,"ref");function H(e){return e&&(e.__nodeGroups=!0),e}o(H,"markNode");function x(e){return S(e,H)}o(x,"markedFragment");function S(e,t=null,n=null){let r=document.createDocumentFragment();if(!e?.length)return r;for(let c of e)c&&(c=typeof t=="function"?t(c,r):c,Array.isArray(c)?r.appendChild(S(c,t)):r.appendChild(c));return n&&r.childNodes.length&&n.appendChild(r),r}o(S,"createFragment");function p(e,t,n="error"){let r=n==="warn"?console.warn:console.error,c=t instanceof Error?t:new Error(String(t));return r(`[Esor Framework Error] ${e}:`,c.message),c}o(p,"handleError");function u(e,t,n){try{return e()}catch(r){return p(t,r),n}}o(u,"tryCatch");function v(e,t){!e||!t||!t.parentNode||u(()=>{let n=t.parentNode,r=o(i=>{for(let f of i)!f||f.parentNode!==n||(f._cleanup&&typeof f._cleanup=="function"&&f._cleanup(),n.removeChild(f))},"removeNodes"),c=t.__nodeGroups||[],s=new Map(c.map(i=>[i.key,i])),b=e.map((i,f)=>{let A=Array.isArray(i)?i.filter(Boolean):[i],g=A.find(M=>M?.getAttribute?.("key")!=null),w=g?g.getAttribute("key"):`__key_${f}`,ie=A.map(M=>M?.outerHTML||"").join("|");return{key:w,nodes:A,state:ie}}),ce=new Map(b.map(i=>[i.key,i]));for(let i of c)!ce.has(i.key)&&r(i.nodes);let m=t;for(let i of b){let f=s.get(i.key);if(f)if(f.state!==i.state)r(f.nodes),n.insertBefore(x(i.nodes),m.nextSibling);else{if(f.nodes[0]!==m.nextSibling){let g=document.createDocumentFragment();for(let w of f.nodes)g.appendChild(w);n.insertBefore(g,m.nextSibling)}i.nodes=f.nodes}else n.insertBefore(x(i.nodes),m.nextSibling);m=i.nodes[i.nodes.length-1]||m}t.__nodeGroups=b},"list.reconcile")}o(v,"reconcile");var O=new WeakMap,_="\uFEFF\uFEFF";function pe(e,t,n=null){!e||!t||(n&&n.parentNode===t?t.insertBefore(e,n):t.appendChild(e))}o(pe,"insertFragment");function ae(e,t){typeof t=="function"?t(e):t&&typeof t=="object"&&"current"in t&&(t.current=e)}o(ae,"setRef");function me(e,t,n){let r=t.slice(2).toLowerCase();e.addEventListener(r,n),e._cleanup=()=>e.removeEventListener(r,n)}o(me,"setEvent");function de(e,t){Object.assign(e.style,t)}o(de,"setStyle");function V(e,t,n){t==="value"||t==="checked"?e[t]=n:n===!1||n===null||n===void 0?e.removeAttribute(t):e.setAttribute(t,n)}o(V,"setAttribute");function L(e,t){if(!e||typeof t!="function")return;let n=e._cleanup;n&&n();let r=h(t);return e._cleanup=r,r}o(L,"setEffect");function he(e,t){let n=e.parentNode,r=e.nextSibling;for(;r&&r.__nodeGroups;)r._cleanup&&r._cleanup(),n.removeChild(r),r=e.nextSibling;t?.length&&pe(x(t),n,e.nextSibling)}o(he,"replaceNodes");function ye(e,t){let n=o(r=>{u(()=>{if(Array.isArray(r))v(r,e);else{let c=document.createTextNode(String(r??""));H(c),he(e,[c])}},"html.updateContent")},"updateContent");typeof t=="function"?L(e,()=>n(t())):n(t)}o(ye,"setContent");var D=o((e,t,n)=>{t?(e.removeAttribute(t),t==="ref"?ae(e,n):t[0]=="o"&&t[1]=="n"?me(e,t,n):t==="className"?e.setAttribute("class",n):t==="style"&&typeof n=="object"?L(e,()=>de(e,n)):typeof n=="function"?L(e,()=>V(e,t,n())):V(e,t,n)):ye(e,n)},"render");function be(e,t,n){let r=Array.from(e.attributes);for(let c of r)c.value===_&&D(e,c.name,t[n++]);return n}o(be,"processAttributes");function ge(e,t,n){if(e.nodeValue===_){let r=document.createComment("");e.replaceWith(r),D(r,null,t[n++])}else{let r=z(e.nodeValue.replaceAll(_,"<!>"));for(let c of Array.from(r.content.childNodes))c.nodeType===8&&D(c,null,t[n++]);e.replaceWith(r.content)}return n}o(ge,"processTextNode");function z(e){let t=document.createElement("template");return t.innerHTML=e,t}o(z,"createTemplate");function F(e,t=null){return u(()=>{let n=z(e);return typeof t=="function"&&t(n),[...n.content.childNodes]},"html.templateToNodes",[])}o(F,"templateToNodes");function xe(e){let t=[],n=document.createTreeWalker(e.content,5),r;for(;r=n.nextNode();)t.push(r);return t}o(xe,"collectNodes");function I(e,...t){return u(()=>e.length===1?F(e[0]):t.length?F(e.join(_),n=>{let r=xe(n),c=0;for(let s of r)s.nodeType===1&&s.attributes.length?c=be(s,t,c):s.nodeType===3&&s.nodeValue.includes(_)&&(c=ge(s,t,c));return r}):F(e.join("")),"html.build",[])}o(I,"build");function j(e,...t){return O.has(e)?I(O.get(e),...t):(O.set(e,e),I(e,...t))}o(j,"html");var a=null,q=o(e=>a=e,"createLifecycle"),y=o((e,t)=>{if(!a){p("lifecycle","Hook called outside component setup");return}a._lifecycles[e]||(a._lifecycles[e]=[]),a._lifecycles[e].push(t)},"addHook"),k=o(e=>{if(a?._lifecycles?.[e])for(let t of a._lifecycles[e])queueMicrotask(()=>u(()=>t.call(a),"lifecycle.runHook"))},"runHook"),J=o(e=>{let t=e();return typeof t=="function"?y("destroy",t):()=>{}},"onEffect"),X=o(e=>y("beforeMount",e),"beforeMount"),Q=o(e=>y("mount",e),"onMount"),Y=o(e=>y("beforeUpdate",e),"beforeUpdate"),Z=o(e=>y("update",e),"onUpdate"),K=o(e=>y("destroy",e),"onDestroy");var R=o(e=>e==null?"":String(e).replace(/[&<>'"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[t]),"sanitizeHtml");var _e={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0};function ee(e){if(typeof e!="string")return e;let t=e.trim(),n=t.toLowerCase();return _e[n]??(/^[\d.]+$/.test(t)?parseFloat(t):t[0]==="{"||t[0]==="["?Ae(t):t)}o(ee,"parseValue");function Ae(e){try{return JSON.parse(e)}catch{}}o(Ae,"parseJson");var te=o(e=>e.startsWith("ref")||e.startsWith("on"),"shouldSkipAttribute"),Ce=o(e=>{let t=e.attributes;for(let n=0;n<t.length;n++){let{name:r,value:c}=t[n];te(r)||(e.props[r]=d(ee(R(c))))}},"initAttributes"),Ee=o(e=>{let t=new MutationObserver(n=>{for(let r of n){let c=r.attributeName;if(!c||te(c))continue;let s=e.props[c];s&&s(ee(e.getAttribute(c)||""))}});t.observe(e,{attributes:!0}),e._cleanup.push(()=>t.disconnect())},"observeAttributes"),ne=o(e=>{u(()=>{Ce(e),Ee(e)},"props.initPropsAndObserve")},"initPropsAndObserve");function oe(e){e&&(e.emit=(t,n)=>E(t,n,e))}o(oe,"initDispatch");var Se=/^[a-z][a-z0-9-]*$/,ke="open",we=o((e,{mode:t}={})=>{var n,r;return r=class extends HTMLElement{constructor(){super();B(this,n,this.attachShadow({mode:t||ke}));C(this,"props",Object.create(null));C(this,"_lifecycles",{beforeMount:[],mount:[],beforeUpdate:[],update:[],destroy:[]});C(this,"_cleanup",[]);u(()=>{q(this),oe(this),ne(this);let s=e?.call(this,this.props);S(s||[],null,W(this,n)),k("beforeMount")},"component.init")}connectedCallback(){k("mount")}disconnectedCallback(){k("destroy");for(let s=this._cleanup.length-1;s>=0;s--)u(this._cleanup[s],"component.cleanup");this._cleanup.length=0}},n=new WeakMap,r},"BaseComponent"),re=o((e,t,n={})=>{if(!Se.test(e))return p("component",`Invalid tag name: ${e}`,"error");if(customElements.get(e))return p("component",`${e} ya registrado`,"warn");customElements.define(e,we(t,n))},"component");export{T as batch,X as beforeMount,Y as beforeUpdate,re as component,N as computed,h as effect,E as emit,p as handleError,j as html,K as onDestroy,J as onEffect,Q as onMount,Z as onUpdate,$ as ref,d as signal,u as tryCatch};
//# sourceMappingURL=esor.min.js.map
