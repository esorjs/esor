var U=Object.defineProperty;var W=e=>{throw TypeError(e)};var se=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var r=(e,t)=>U(e,"name",{value:t,configurable:!0});var C=(e,t,n)=>se(e,typeof t!="symbol"?t+"":t,n),fe=(e,t,n)=>t.has(e)||W("Cannot "+n);var B=(e,t,n)=>(fe(e,t,"read from private field"),n?n.call(e):t.get(e)),P=(e,t,n)=>t.has(e)?W("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var l=null,ue=0,g=[],le=100,d=r(e=>{let t=e;return r(o=>{if(o===void 0)return l&&!g.includes(l)&&g.push(l),t;let c=typeof o=="function"?o(t):o;if(!Object.is(c,t)){t=c;for(let s of g)s()}return t},"getterSetter")},"signal"),h=r(e=>{let t=0;if(++t>le){console.warn("Maximum effect update depth exceeded");return}let n=r(()=>{let o=l;l=n;try{e()}finally{l=o,t--}},"reactiveEffect");return n(),()=>g.splice(g.indexOf(n),1)},"effect"),T=r(e=>{let t=d();return h(()=>t(e())),()=>t()},"computed"),H=r(e=>{let t=l;l={id:ue++};try{return e()}finally{l=t}},"batch");function E(e,t,n=null){let o=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0});return n&&n.dispatchEvent(o),o}r(E,"emit");function $(e=null){let t=e;return n=>n!==void 0?t=n:t}r($,"ref");function O(e){return e&&(e.__nodeGroups=!0),e}r(O,"markNode");function x(e){return S(e,O)}r(x,"markedFragment");function S(e,t=null,n=null){let o=document.createDocumentFragment();if(!e?.length)return o;for(let c of e)c&&(c=typeof t=="function"?t(c,o):c,Array.isArray(c)?o.appendChild(S(c,t)):o.appendChild(c));return n&&o.childNodes.length&&n.appendChild(o),o}r(S,"createFragment");function p(e,t,n="error"){let o=n==="warn"?console.warn:console.error,c=t instanceof Error?t:new Error(String(t));return o(`[Esor Framework Error] ${e}:`,c.message),c}r(p,"handleError");function u(e,t,n){try{return e()}catch(o){return p(t,o),n}}r(u,"tryCatch");function v(e,t){!e||!t||!t.parentNode||u(()=>{let n=t.parentNode,o=r(i=>{for(let f of i)!f||f.parentNode!==n||(f._cleanup&&typeof f._cleanup=="function"&&f._cleanup(),n.removeChild(f))},"removeNodes"),c=t.__nodeGroups||[],s=new Map(c.map(i=>[i.key,i])),M=e.map((i,f)=>{let A=Array.isArray(i)?i.filter(Boolean):[i],b=A.find(N=>N?.getAttribute?.("key")!=null),w=b?b.getAttribute("key"):`__key_${f}`,ie=A.map(N=>N?.outerHTML||"").join("|");return{key:w,nodes:A,state:ie}}),ce=new Map(M.map(i=>[i.key,i]));for(let i of c)!ce.has(i.key)&&o(i.nodes);let m=t;for(let i of M){let f=s.get(i.key);if(f)if(f.state!==i.state)o(f.nodes),n.insertBefore(x(i.nodes),m.nextSibling);else{if(f.nodes[0]!==m.nextSibling){let b=document.createDocumentFragment();for(let w of f.nodes)b.appendChild(w);n.insertBefore(b,m.nextSibling)}i.nodes=f.nodes}else n.insertBefore(x(i.nodes),m.nextSibling);m=i.nodes[i.nodes.length-1]||m}t.__nodeGroups=M},"list.reconcile")}r(v,"reconcile");var L=new WeakMap,_="\uFEFF\uFEFF";function pe(e,t,n=null){!e||!t||(n&&n.parentNode===t?t.insertBefore(e,n):t.appendChild(e))}r(pe,"insertFragment");function ae(e,t){typeof t=="function"?t(e):t&&typeof t=="object"&&"current"in t&&(t.current=e)}r(ae,"setRef");function me(e,t,n){let o=t.slice(2).toLowerCase();e.addEventListener(o,n),e._cleanup=()=>e.removeEventListener(o,n)}r(me,"setEvent");function de(e,t){Object.assign(e.style,t)}r(de,"setStyle");function V(e,t,n){t==="value"||t==="checked"?e[t]=n:n===!1||n===null||n===void 0?e.removeAttribute(t):e.setAttribute(t,n)}r(V,"setAttribute");function D(e,t){let n=e._cleanup;n&&n();let o=h(t);return e._cleanup=o,o}r(D,"setEffect");function he(e,t){let n=e.parentNode,o=e.nextSibling;for(;o&&o.__nodeGroups;)o._cleanup&&o._cleanup(),n.removeChild(o),o=e.nextSibling;t?.length&&pe(x(t),n,e.nextSibling)}r(he,"replaceNodes");function ye(e,t){let n=r(o=>{u(()=>{if(Array.isArray(o))v(o,e);else{let c=document.createTextNode(String(o??""));O(c),he(e,[c])}},"html.updateContent")},"updateContent");typeof t=="function"?D(e,()=>n(t())):n(t)}r(ye,"applyContent");var F=r((e,t,n)=>{t?(e.removeAttribute(t),t==="ref"?ae(e,n):t[0]=="o"&&t[1]=="n"?me(e,t,n):t==="className"?e.setAttribute("class",n):t==="style"&&typeof n=="object"?D(e,()=>de(e,n)):typeof n=="function"?D(e,()=>V(e,t,n())):V(e,t,n)):ye(e,n)},"render");function be(e,t,n){let o=Array.from(e.attributes);for(let c of o)c.value===_&&F(e,c.name,t[n++]);return n}r(be,"processAttributes");function ge(e,t,n){if(e.nodeValue===_){let o=document.createComment("");e.replaceWith(o),F(o,null,t[n++])}else{let o=z(e.nodeValue.replaceAll(_,"<!>"));for(let c of Array.from(o.content.childNodes))c.nodeType===8&&F(c,null,t[n++]);e.replaceWith(o.content)}return n}r(ge,"processTextNode");function z(e){let t=document.createElement("template");return t.innerHTML=e,t}r(z,"createTemplate");function j(e,t=null){return u(()=>{let n=z(e);return typeof t=="function"&&t(n),[...n.content.childNodes]},"html.templateToNodes",[])}r(j,"templateToNodes");function xe(e){let t=[],n=document.createTreeWalker(e.content,5),o;for(;o=n.nextNode();)t.push(o);return t}r(xe,"collectNodes");function I(e,...t){return u(()=>e.length===1?j(e[0]):t.length?j(e.join(_),n=>{let o=xe(n),c=0;for(let s of o)s.nodeType===1&&s.attributes.length?c=be(s,t,c):s.nodeType===3&&s.nodeValue.includes(_)&&(c=ge(s,t,c));return o}):j(e.join("")),"html.build",[])}r(I,"build");function G(e,...t){return L.has(e)?I(L.get(e),...t):(L.set(e,e),I(e,...t))}r(G,"html");var a=null,q=r(e=>a=e,"createLifecycle"),y=r((e,t)=>{if(!a){p("lifecycle","Hook called outside component setup");return}a._lifecycles[e]||(a._lifecycles[e]=[]),a._lifecycles[e].push(t)},"addHook"),k=r(e=>{if(a?._lifecycles?.[e])for(let t of a._lifecycles[e])queueMicrotask(()=>u(()=>t.call(a),"lifecycle.runHook"))},"runHook"),J=r(e=>{let t=e();return typeof t=="function"?y("destroy",t):()=>{}},"onEffect"),X=r(e=>y("beforeMount",e),"beforeMount"),Q=r(e=>y("mount",e),"onMount"),Y=r(e=>y("beforeUpdate",e),"beforeUpdate"),Z=r(e=>y("update",e),"onUpdate"),K=r(e=>y("destroy",e),"onDestroy");var R=r(e=>e==null?"":String(e).replace(/[&<>'"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[t]),"sanitizeHtml");var _e={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0};function ee(e){if(typeof e!="string")return e;let t=e.trim(),n=t.toLowerCase();return _e[n]??(/^[\d.]+$/.test(t)?parseFloat(t):t[0]==="{"||t[0]==="["?Ae(t):t)}r(ee,"parseValue");function Ae(e){try{return JSON.parse(e)}catch{}}r(Ae,"parseJson");var te=r(e=>e.startsWith("ref")||e.startsWith("on"),"shouldSkipAttribute"),Ce=r(e=>{let t=e.attributes;for(let n=0;n<t.length;n++){let{name:o,value:c}=t[n];te(o)||(e.props[o]=d(ee(R(c))))}},"initAttributes"),Ee=r(e=>{let t=new MutationObserver(n=>{for(let o of n){let c=o.attributeName;if(!c||te(c))continue;let s=e.props[c];s&&s(ee(e.getAttribute(c)||""))}});t.observe(e,{attributes:!0}),e._cleanup.push(()=>t.disconnect())},"observeAttributes"),ne=r(e=>{u(()=>{Ce(e),Ee(e)},"props.initPropsAndObserve")},"initPropsAndObserve");function oe(e){e&&(e.emit=(t,n)=>E(t,n,e))}r(oe,"initDispatch");var Se=/^[a-z][a-z0-9-]*$/,ke="open",Me=r((e,{mode:t}={})=>{var n,o;return o=class extends HTMLElement{constructor(){super();P(this,n,this.attachShadow({mode:t||ke}));C(this,"props",Object.create(null));C(this,"_lifecycles",{beforeMount:[],mount:[],beforeUpdate:[],update:[],destroy:[]});C(this,"_cleanup",[]);u(()=>{q(this),oe(this),ne(this);let s=e?.call(this,this.props);S(s||[],null,B(this,n)),k("beforeMount")},"component.init")}connectedCallback(){k("mount")}disconnectedCallback(){k("destroy");for(let s=this._cleanup.length-1;s>=0;s--)u(this._cleanup[s],"component.cleanup");this._cleanup.length=0}},n=new WeakMap,o},"BaseComponent"),re=r((e,t,n={})=>{if(!Se.test(e))return p("component",`Invalid tag name: ${e}`,"error");if(customElements.get(e))return p("component",`${e} ya registrado`,"warn");customElements.define(e,Me(t,n))},"component");export{H as batch,X as beforeMount,Y as beforeUpdate,re as component,T as computed,h as effect,E as emit,p as handleError,G as html,K as onDestroy,J as onEffect,Q as onMount,Z as onUpdate,$ as ref,d as signal,u as tryCatch};
//# sourceMappingURL=esor.min.js.map
