var j=Object.defineProperty;var W=e=>{throw TypeError(e)};var ce=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var o=(e,t)=>j(e,"name",{value:t,configurable:!0});var A=(e,t,n)=>ce(e,typeof t!="symbol"?t+"":t,n),ie=(e,t,n)=>t.has(e)||W("Cannot "+n);var B=(e,t,n)=>(ie(e,t,"read from private field"),n?n.call(e):t.get(e)),U=(e,t,n)=>t.has(e)?W("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var m=null,se=0,g=o(e=>{let t=e,n=new Set;return o(c=>{if(c===void 0)return m&&n.add(m),t;let s=typeof c=="function"?c(t):c;return Object.is(s,t)||(t=s,n.forEach(l=>l())),t},"getterSetter")},"signal"),d=o(e=>{let t=!1,n=o(()=>{if(t)return;t=!0;let r=m;m=n;try{e()}finally{m=r,t=!1}},"reactive");return n(),()=>subs.delete(n)},"effect"),T=o(e=>{let t=g();return d(()=>t(e())),()=>t()},"computed"),O=o(e=>{let t=m;m={id:se++};try{return e()}finally{m=t}},"batch");function k(e,t,n=null){let r=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0});return n&&n.dispatchEvent(r),r}o(k,"emit");function $(e=null){let t=e;return n=>n!==void 0?t=n:t}o($,"ref");function w(e){return e&&(e.__nodeGroups=!0),e}o(w,"markNode");function _(e){return S(e,w)}o(_,"markedFragment");function S(e,t=null,n=null){let r=document.createDocumentFragment();if(!e?.length)return r;for(let c of e)c&&(c=typeof t=="function"?t(c,r):c,Array.isArray(c)?r.appendChild(S(c,t)):r.appendChild(c));return n&&r.childNodes.length&&n.appendChild(r),r}o(S,"createFragment");function h(e,t,n="error"){let r=n==="warn"?console.warn:console.error,c=t instanceof Error?t:new Error(String(t));return r(`[Esor Framework Error] ${e}:`,c.message),c}o(h,"handleError");function u(e,t,n){try{return e()}catch(r){return h(t,r),n}}o(u,"tryCatch");function v(e,t){!e||!t||!t.parentNode||u(()=>{let n=t.parentNode,r=o(i=>{for(let f of i)!f||f.parentNode!==n||(f._cleanup&&typeof f._cleanup=="function"&&f._cleanup(),n.removeChild(f))},"removeNodes"),c=o((i,f)=>i.length!==f.length||i.some((b,E)=>!b.isEqualNode(f[E])),"nodesChanged"),s=t.__nodeGroups||[],l=new Map(s.map(i=>[i.key,i])),p=e.map((i,f)=>{let b=Array.isArray(i)?i.filter(Boolean):[i];return{key:b.find(re=>re?.getAttribute?.("key")!=null)?.getAttribute("key")||`__key_${f}`,nodes:b}}),N=new Map(p.map(i=>[i.key,i]));for(let i of s)!N.has(i.key)&&r(i.nodes);let a=t;for(let i of p){let f=l.get(i.key);if(f)if(c(f.nodes,i.nodes))r(f.nodes),n.insertBefore(_(i.nodes),a.nextSibling);else{let b=a.nextSibling;if(f.nodes[0]!==b){let E=document.createDocumentFragment();for(let G of f.nodes)E.appendChild(G);n.insertBefore(E,b)}i.nodes=f.nodes}else n.insertBefore(_(i.nodes),a.nextSibling);a=i.nodes[i.nodes.length-1]||a}t.__nodeGroups=p},"list.reconcile")}o(v,"reconcile");var F=new WeakMap,C="\uFEFF\uFEFF";function H(e){let t=document.createElement("template");return t.innerHTML=e,t}o(H,"createTemplate");var D=o((e,t,n)=>{if(t)if(e.removeAttribute(t),t==="ref")typeof n=="function"?n(e):n&&(n.current=e);else if(t[0]=="o"&&t[1]=="n"&&typeof n=="function"){let r=t.slice(2).toLowerCase();e.addEventListener(r,n),e._cleanup=()=>e.removeEventListener(r,n)}else t==="style"&&typeof n=="object"?d(()=>Object.assign(e.style,n)):typeof n=="function"?d(()=>P(e,t,n())):P(e,t,n);else fe(e,n)},"render");function P(e,t,n){t==="value"||t==="checked"?e[t]=n:n===!1||n===null?e.removeAttribute(t):e.setAttribute(t,n)}o(P,"setAttribute");function fe(e,t){let n=o(r=>{u(()=>{if(typeof r=="boolean"&&(r=""),Array.isArray(r))v(r,e);else{let c=document.createTextNode(String(r??""));w(c),le(e,[c])}},"html.updateContent")},"updateContent");typeof t=="function"?d(()=>n(t())):n(t)}o(fe,"setContent");function le(e,t){let n=e.parentNode,r=e.nextSibling;for(;r&&r.__nodeGroups;)r._cleanup&&r._cleanup(),n.removeChild(r),r=e.nextSibling;t?.length&&ue(_(t),n,e.nextSibling)}o(le,"replaceNodes");function ue(e,t,n=null){!e||!t||(n&&n.parentNode===t?t.insertBefore(e,n):t.appendChild(e))}o(ue,"insertFragment");function pe(e,t){let n=[],r=document.createTreeWalker(e.content,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);for(;r.nextNode();)n.push(r.currentNode);let c=0;for(let s=0;s<n.length;s++){let l=n[s];if(l.nodeType===Node.ELEMENT_NODE&&l.attributes.length)for(let p of Array.from(l.attributes))p.value===C&&D(l,p.name,t[c++]);else if(l.nodeType===Node.TEXT_NODE&&l.nodeValue.includes(C))if(l.nodeValue===C){let p=document.createComment("");l.parentNode.replaceChild(p,l),D(p,null,t[c++])}else{let p=H(l.nodeValue.replaceAll(C,"<!>")),N=Array.from(p.content.childNodes);for(let a=0;a<N.length;a++){let i=N[a];i.nodeType===Node.COMMENT_NODE&&D(i,null,t[c++])}l.parentNode.replaceChild(p.content,l)}}}o(pe,"processTemplate");function z(e,t=null){return u(()=>{let n=H(e);return typeof t=="function"&&t(n),[...n.content.childNodes]},"html.templateToNodes",[])}o(z,"templateToNodes");function V(e,...t){return u(()=>{if(e.length===1)return z(e[0]);if(!t.length)return z(e.join(""));let n=e.join(C),r=H(n);return pe(r,t),[...r.content.childNodes]},"html.build",[])}o(V,"build");function L(e,...t){return F.has(e)?V(F.get(e),...t):(F.set(e,e),V(e,...t))}o(L,"html");var y=null,q=o(e=>y=e,"createLifecycle"),x=o((e,t)=>{if(!y){h("lifecycle","Hook called outside component setup");return}y._lifecycles[e]||(y._lifecycles[e]=[]),y._lifecycles[e].push(t)},"addHook"),M=o(e=>{if(y?._lifecycles?.[e])for(let t of y._lifecycles[e])queueMicrotask(()=>u(()=>t.call(y),"lifecycle.runHook"))},"runHook"),X=o(e=>{let t=e();return typeof t=="function"?x("destroy",t):()=>{}},"onEffect"),I=o(e=>x("beforeMount",e),"beforeMount"),J=o(e=>x("mount",e),"onMount"),Q=o(e=>x("beforeUpdate",e),"beforeUpdate"),R=o(e=>x("update",e),"onUpdate"),Y=o(e=>x("destroy",e),"onDestroy");var Z=o(e=>e==null?"":String(e).replace(/[&<>'"]/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[t]),"sanitizeHtml");var ae=[[/(true|false)/,e=>e[0]==="true"],[/^[\d.]+$/,parseFloat],[/^[{[]/,JSON.parse]];function K(e){if(typeof e!="string")return e;let t=e.trim();for(let[n,r]of ae)if(n.test(t)){try{return r(t)}catch{}break}return t}o(K,"parseValue");var ee=o(e=>e.startsWith("ref")||e.startsWith("on"),"shouldSkipAttribute"),me=o(e=>{let t=e.attributes;for(let n=0;n<t.length;n++){let{name:r,value:c}=t[n];ee(r)||(e.props[r]=g(K(Z(c))))}},"initAttributes"),de=o(e=>{let t=new MutationObserver(n=>{for(let r of n){let c=r.attributeName;if(!c||ee(c))continue;let s=e.props[c];s&&s(K(e.getAttribute(c)||""))}});t.observe(e,{attributes:!0}),e._cleanup.push(()=>t.disconnect())},"observeAttributes"),te=o(e=>{u(()=>{me(e),de(e)},"props.initPropsAndObserve")},"initPropsAndObserve");function ne(e){e&&(e.emit=(t,n)=>k(t,n,e))}o(ne,"initDispatch");var he=/^[a-z][a-z0-9-]*$/,ye="open",be=o((e,{mode:t}={})=>{var n,r;return r=class extends HTMLElement{constructor(){super();U(this,n,this.attachShadow({mode:t||ye}));A(this,"props",Object.create(null));A(this,"_lifecycles",{beforeMount:[],mount:[],beforeUpdate:[],update:[],destroy:[]});A(this,"_cleanup",[]);u(()=>{q(this),ne(this),te(this);let s=e?.call(this,this.props);S(s||[],null,B(this,n)),M("beforeMount")},"component.init")}connectedCallback(){M("mount")}disconnectedCallback(){M("destroy");for(let s=this._cleanup.length-1;s>=0;s--)u(this._cleanup[s],"component.cleanup");this._cleanup.length=0}},n=new WeakMap,r},"BaseComponent"),oe=o((e,t,n={})=>{if(typeof customElements<"u"){if(!he.test(e))return h("component",`Invalid tag name: ${e}`,"error");if(customElements.get(e))return h("component",`${e} ya registrado`,"warn");customElements.define(e,be(t,n))}},"component");export{O as batch,I as beforeMount,Q as beforeUpdate,oe as component,T as computed,d as effect,k as emit,h as handleError,L as html,Y as onDestroy,X as onEffect,J as onMount,R as onUpdate,$ as ref,g as signal,u as tryCatch};
//# sourceMappingURL=esor.min.js.map
