var U=Object.defineProperty;var W=t=>{throw TypeError(t)};var ct=(t,e,n)=>e in t?U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var r=(t,e)=>U(t,"name",{value:e,configurable:!0});var N=(t,e,n)=>ct(t,typeof e!="symbol"?e+"":e,n),st=(t,e,n)=>e.has(t)||W("Cannot "+n);var B=(t,e,n)=>(st(t,e,"read from private field"),n?n.call(t):e.get(t)),P=(t,e,n)=>e.has(t)?W("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);var p=null,ft=0,b=[],ut=100,m=r(t=>{let e=t;return r(o=>{if(o===void 0)return p&&!b.includes(p)&&b.push(p),e;let i=typeof o=="function"?o(e):o;if(!Object.is(i,e)){e=i;for(let s of b)s()}return e},"getterSetter")},"signal"),d=r(t=>{let e=0;if(++e>ut){console.warn("Maximum effect update depth exceeded");return}let n=r(()=>{let o=p;p=n;try{t()}finally{p=o,e--}},"reactiveEffect");return n(),()=>b.splice(b.indexOf(n),1)},"effect"),T=r(t=>{let e=m();return d(()=>e(t())),()=>e()},"computed"),H=r(t=>{let e=p;p={id:ft++};try{return t()}finally{p=e}},"batch");function C(t,e,n=null){let o=new CustomEvent(t,{detail:e,bubbles:!0,composed:!0,cancelable:!0});return n&&n.dispatchEvent(o),o}r(C,"emit");function $(t=null){let e=t;return n=>n!==void 0?e=n:e}r($,"ref");function O(t){return t&&(t.__nodeGroups=!0),t}r(O,"markNode");function g(t){return E(t,O)}r(g,"markedFragment");function E(t,e=null,n=null){let o=document.createDocumentFragment();if(!t?.length)return o;for(let i of t)i&&(i=typeof e=="function"?e(i,o):i,Array.isArray(i)?o.appendChild(E(i,e)):o.appendChild(i));return n&&o.childNodes.length&&n.appendChild(o),o}r(E,"createFragment");function l(t,e,n="error"){let o=n==="warn"?console.warn:console.error,i=e instanceof Error?e:new Error(String(e));return o(`[Esor Framework Error] ${t}:`,i.message),i}r(l,"handleError");function u(t,e,n){try{return t()}catch(o){return l(e,o),n}}r(u,"tryCatch");function v(t,e){!t||!e||!e.parentNode||u(()=>{let n=e.parentNode,o=r(c=>{for(let f of c)!f||f.parentNode!==n||(f._cleanup&&typeof f._cleanup=="function"&&f._cleanup(),n.removeChild(f))},"removeNodes"),i=e.__nodeGroups||[],s=new Map(i.map(c=>[c.key,c])),S=t.map((c,f)=>{let A=Array.isArray(c)?c.filter(Boolean):[c],y=A.find(w=>w?.getAttribute?.("key")!=null),M=y?y.getAttribute("key"):`__key_${f}`,it=A.map(w=>w?.outerHTML||"").join("|");return{key:M,nodes:A,state:it}}),rt=new Map(S.map(c=>[c.key,c]));for(let c of i)!rt.has(c.key)&&o(c.nodes);let a=e;for(let c of S){let f=s.get(c.key);if(f)if(f.state!==c.state)o(f.nodes),n.insertBefore(g(c.nodes),a.nextSibling);else{if(f.nodes[0]!==a.nextSibling){let y=document.createDocumentFragment();for(let M of f.nodes)y.appendChild(M);n.insertBefore(y,a.nextSibling)}c.nodes=f.nodes}else n.insertBefore(g(c.nodes),a.nextSibling);a=c.nodes[c.nodes.length-1]||a}e.__nodeGroups=S},"list.reconcile")}r(v,"reconcile");var D=new WeakMap,x="\uFEFF\uFEFF";function pt(t,e,n=null){!t||!e||(n&&n.parentNode===e?e.insertBefore(t,n):e.appendChild(t))}r(pt,"insertFragment");function lt(t,e){typeof e=="function"?e(t):e&&typeof e=="object"&&"current"in e&&(e.current=t)}r(lt,"setRef");function at(t,e,n){let o=e.slice(2).toLowerCase();t.addEventListener(o,n),t._cleanup=()=>t.removeEventListener(o,n)}r(at,"setEvent");function mt(t,e){Object.assign(t.style,e)}r(mt,"setStyle");function V(t,e,n){e==="value"||e==="checked"?t[e]=n:n===!1||n===null||n===void 0?t.removeAttribute(e):t.setAttribute(e,n)}r(V,"setAttribute");function F(t,e){let n=t._cleanup;n&&n();let o=d(e);return t._cleanup=o,o}r(F,"setEffect");function dt(t,e){let n=t.parentNode,o=t.nextSibling;for(;o&&o.__nodeGroups;)o._cleanup&&o._cleanup(),n.removeChild(o),o=t.nextSibling;e?.length&&pt(g(e),n,t.nextSibling)}r(dt,"replaceNodes");function ht(t,e){let n=r(o=>{u(()=>{if(Array.isArray(o))v(o,t);else{let i=document.createTextNode(String(o??""));O(i),dt(t,[i])}},"html.updateContent")},"updateContent");typeof e=="function"?F(t,()=>n(e())):n(e)}r(ht,"applyContent");var j=r((t,e,n)=>{e?(t.removeAttribute(e),e==="ref"?lt(t,n):e[0]=="o"&&e[1]=="n"?at(t,e,n):e==="className"?t.setAttribute("class",n):e==="style"&&typeof n=="object"?F(t,()=>mt(t,n)):typeof n=="function"?F(t,()=>V(t,e,n())):V(t,e,n)):ht(t,n)},"render");function yt(t,e,n){let o=Array.from(t.attributes);for(let i of o)i.value===x&&j(t,i.name,e[n++]);return n}r(yt,"processAttributes");function bt(t,e,n){if(t.nodeValue===x){let o=document.createComment("");t.replaceWith(o),j(o,null,e[n++])}else{let o=z(t.nodeValue.replaceAll(x,"<!>"));for(let i of Array.from(o.content.childNodes))i.nodeType===8&&j(i,null,e[n++]);t.replaceWith(o.content)}return n}r(bt,"processTextNode");function z(t){let e=document.createElement("template");return e.innerHTML=t,e}r(z,"createTemplate");function G(t,e=null){return u(()=>{let n=z(t);return typeof e=="function"&&e(n),[...n.content.childNodes]},"html.templateToNodes",[])}r(G,"templateToNodes");function gt(t){let e=[],n=document.createTreeWalker(t.content,5),o;for(;o=n.nextNode();)e.push(o);return e}r(gt,"collectNodes");function I(t,...e){return u(()=>t.length===1?G(t[0]):e.length?G(t.join(x),n=>{let o=gt(n),i=0;for(let s of o)s.nodeType===1&&s.attributes.length?i=yt(s,e,i):s.nodeType===3&&s.nodeValue.includes(x)&&(i=bt(s,e,i));return o}):G(t.join("")),"html.build",[])}r(I,"build");function L(t,...e){return D.has(t)?I(D.get(t),...e):(D.set(t,t),I(t,...e))}r(L,"html");var _={beforeMount:[],mount:[],beforeUpdate:[],update:[],destroy:[]},h=r((t,e)=>{if(typeof e!="function")return l("lifecycle","Hook must be a function"),()=>{};let n=_[t];return n?(n.push(e),()=>{let o=n.indexOf(e);o!==-1&&n.splice(o,1)}):()=>{}},"addHook"),k=r((t,e)=>{if(!(!e||!_[t]))for(let n of _[t])queueMicrotask(()=>u(()=>n.call(e),"lifecycle.runHook"))},"runHook"),Xt=r(t=>{_[t]&&(_[t]=[])},"clearHook"),q=r(t=>{let e=t();return typeof e=="function"?h("destroy",e):()=>{}},"onEffect"),J=r(t=>h("beforeMount",t),"beforeMount"),X=r(t=>h("mount",t),"onMount"),Q=r(t=>h("beforeUpdate",t),"beforeUpdate"),Y=r(t=>h("update",t),"onUpdate"),Z=r(t=>h("destroy",t),"onDestroy");var K=r(t=>t==null?"":String(t).replace(/[&<>'"]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[e]),"sanitizeHtml");var xt={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0};function R(t){if(typeof t!="string")return t;let e=t.trim(),n=e.toLowerCase();return xt[n]??(/^[\d.]+$/.test(e)?parseFloat(e):e[0]==="{"||e[0]==="["?_t(e):e)}r(R,"parseValue");function _t(t){try{return JSON.parse(t)}catch{}}r(_t,"parseJson");var tt=r(t=>t.startsWith("ref")||t.startsWith("on"),"shouldSkipAttribute"),At=r(t=>{let e=t.attributes;for(let n=0;n<e.length;n++){let{name:o,value:i}=e[n];tt(o)||(t.props[o]=m(R(K(i))))}},"initAttributes"),Ct=r(t=>{let e=new MutationObserver(n=>{for(let o of n){let i=o.attributeName;if(!i||tt(i))continue;let s=t.props[i];s&&s(R(t.getAttribute(i)||""))}});e.observe(t,{attributes:!0}),t._cleanup.push(()=>e.disconnect())},"observeAttributes"),et=r(t=>{u(()=>{At(t),Ct(t)},"props.initPropsAndObserve")},"initPropsAndObserve");function nt(t){t&&(t.emit=(e,n)=>C(e,n,t))}r(nt,"initDispatch");var Et=/^[a-z][a-z0-9-]*$/,kt="open",St=r((t,{mode:e}={})=>{var n,o;return o=class extends HTMLElement{constructor(){super();P(this,n,this.attachShadow({mode:e||kt}));N(this,"props",Object.create(null));N(this,"_cleanup",[]);u(()=>{nt(this),et(this);let s=t?.call(this,this.props);E(s||[],null,B(this,n)),k("beforeMount",this)},"component.init")}connectedCallback(){k("mount",this)}disconnectedCallback(){k("destroy",this);for(let s=this._cleanup.length-1;s>=0;s--)u(this._cleanup[s],"component.cleanup");this._cleanup.length=0}},n=new WeakMap,o},"BaseComponent"),ot=r((t,e,n={})=>{if(!Et.test(t))return l("component",`Invalid tag name: ${t}`,"error");if(customElements.get(t))return l("component",`${t} ya registrado`,"warn");customElements.define(t,St(e,n))},"component");export{H as batch,J as beforeMount,Q as beforeUpdate,ot as component,T as computed,d as effect,C as emit,l as handleError,L as html,Z as onDestroy,q as onEffect,X as onMount,Y as onUpdate,$ as ref,m as signal,u as tryCatch};
//# sourceMappingURL=esor.min.js.map
